import{E as z,r as a,p as e}from"./index-QHzcgHe1.js";import{A}from"./alert-circle-Zvregbhl.js";import{C as _}from"./check-circle-pdbRLUjc.js";import{E as D}from"./eye-off-rYnT668Z.js";import{E as M}from"./eye-D8xIUmp0.js";const O=z.injectEndpoints({endpoints:l=>({getVariants:l.query({query:s=>({url:"product-variants",method:"get",params:s}),providesTags:s=>{var r;const t=((r=s==null?void 0:s.data)==null?void 0:r.variants)||(s==null?void 0:s.variants)||(s==null?void 0:s.items)||[];return t.length?[...t.map(({_id:u,id:d})=>({type:"Products",id:u||d})),{type:"Products",id:"VARIANTS_LIST"}]:[{type:"Products",id:"VARIANTS_LIST"}]}}),getVariant:l.query({query:s=>({url:`product-variants/${s}`,method:"get"}),providesTags:(s,t,r)=>[{type:"Products",id:r}]}),createVariant:l.mutation({query:s=>({url:"product-variants",method:"post",data:s}),invalidatesTags:[{type:"Products",id:"VARIANTS_LIST"}]}),updateVariant:l.mutation({query:({id:s,...t})=>({url:`product-variants/${s}`,method:"put",data:t}),invalidatesTags:(s,t,{id:r})=>[{type:"Products",id:r},{type:"Products",id:"VARIANTS_LIST"}]}),deleteVariant:l.mutation({query:s=>({url:`product-variants/${s}`,method:"delete"}),invalidatesTags:(s,t,r)=>[{type:"Products",id:r},{type:"Products",id:"VARIANTS_LIST"}]}),getVariantsByBaseProduct:l.query({query:s=>({url:`product-variants/base-product/${s}`,method:"get"}),providesTags:(s,t,r)=>[{type:"Products",id:r},{type:"Products",id:"VARIANTS_LIST"}]})}),overrideExisting:!1}),{useGetVariantsQuery:se,useCreateVariantMutation:te,useUpdateVariantMutation:re,useDeleteVariantMutation:ae,useGetVariantsByBaseProductQuery:ie}=O,U=a.forwardRef(({type:l="text",label:s,name:t,value:r,onChange:u,onBlur:d,placeholder:h,validator:x,error:B,showError:L=!0,showSuccess:j=!0,debounceMs:V=300,required:E=!1,disabled:P=!1,className:R="",inputClassName:b="",labelClassName:I="",helpText:$,...C},k)=>{const[y,w]=a.useState(null),[v,f]=a.useState(!1),[i,p]=a.useState(!1),[m,T]=a.useState(!1),[n,c]=a.useState(null);a.useEffect(()=>{if(n&&clearTimeout(n),!x||!i)return;f(!0);const S=setTimeout(()=>{const G=x(r);w(G),f(!1)},V);return c(S),()=>{S&&clearTimeout(S)}},[r,x,V,i]),a.useEffect(()=>()=>{n&&clearTimeout(n)},[n]);const F=S=>{if(p(!0),x){const G=x(r);w(G)}d&&d(S)},q=S=>{u&&u(S)},o=B||y,g=!o&&r&&i,N=L&&o&&i,H=j&&g&&!v,Q=l==="password"&&m?"text":l;return e.jsxs("div",{className:`space-y-1 ${R}`,children:[s&&e.jsxs("label",{htmlFor:t,className:`block text-sm font-medium text-gray-700 ${I}`,children:[s,E&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:k,type:Q,name:t,id:t,value:r||"",onChange:q,onBlur:F,placeholder:h,disabled:P,className:`
            input w-full pr-10
            ${N?"border-red-300 focus:border-red-500 focus:ring-red-500":""}
            ${H?"border-green-300 focus:border-green-500 focus:ring-green-500":""}
            ${P?"bg-gray-50 cursor-not-allowed":""}
            ${b}
          `,...C}),l==="password"&&e.jsx("button",{type:"button",onClick:()=>T(!m),className:"absolute inset-y-0 right-8 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:m?e.jsx(D,{className:"h-4 w-4"}):e.jsx(M,{className:"h-4 w-4"})}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:[v&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),N&&e.jsx(A,{className:"h-4 w-4 text-red-500"}),H&&e.jsx(_,{className:"h-4 w-4 text-green-500"})]})]}),$&&!N&&e.jsx("p",{className:"text-xs text-gray-500",children:$}),N&&e.jsxs("div",{className:"text-xs text-red-600",children:[e.jsxs("p",{className:"flex items-center font-medium",children:[e.jsx(A,{className:"h-3 w-3 mr-1 flex-shrink-0"}),o]}),o&&e.jsxs("p",{className:"mt-1 text-red-500 italic",children:[o.includes("required")&&"This field is required",o.includes("minimum")&&"Please enter a higher value",o.includes("maximum")&&"Please enter a lower value",o.includes("length")&&"Please check the length",o.includes("format")&&"Please check the format",o.includes("invalid")&&"Please enter a valid value"]})]}),H&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),"Looks good!"]})]})});U.displayName="ValidatedInput";const J=a.forwardRef(({label:l,name:s,value:t,onChange:r,onBlur:u,placeholder:d,validator:h,error:x,showError:B=!0,showSuccess:L=!0,debounceMs:j=300,required:V=!1,disabled:E=!1,rows:P=3,className:R="",labelClassName:b="",helpText:I,...$},C)=>{const[k,y]=a.useState(null),[w,v]=a.useState(!1),[f,i]=a.useState(!1),[p,m]=a.useState(null);a.useEffect(()=>{if(p&&clearTimeout(p),!h||!f)return;v(!0);const g=setTimeout(()=>{const N=h(t);y(N),v(!1)},j);return m(g),()=>{g&&clearTimeout(g)}},[t,h,j,f]),a.useEffect(()=>()=>{p&&clearTimeout(p)},[p]);const T=g=>{if(i(!0),h){const N=h(t);y(N)}u&&u(g)},n=g=>{r&&r(g)},c=x||k,F=!c&&t&&f,q=B&&c&&f,o=L&&F&&!w;return e.jsxs("div",{className:`space-y-1 ${R}`,children:[l&&e.jsxs("label",{htmlFor:s,className:`block text-sm font-medium text-gray-700 ${b}`,children:[l,V&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:C,name:s,id:s,value:t||"",onChange:n,onBlur:T,placeholder:d,disabled:E,rows:P,className:`
            input w-full resize-none
            ${q?"border-red-300 focus:border-red-500 focus:ring-red-500":""}
            ${o?"border-green-300 focus:border-green-500 focus:ring-green-500":""}
            ${E?"bg-gray-50 cursor-not-allowed":""}
          `,...$}),e.jsxs("div",{className:"absolute top-2 right-2",children:[w&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),q&&e.jsx(A,{className:"h-4 w-4 text-red-500"}),o&&e.jsx(_,{className:"h-4 w-4 text-green-500"})]})]}),I&&!q&&e.jsx("p",{className:"text-xs text-gray-500",children:I}),q&&e.jsxs("div",{className:"text-xs text-red-600",children:[e.jsxs("p",{className:"flex items-center font-medium",children:[e.jsx(A,{className:"h-3 w-3 mr-1 flex-shrink-0"}),c]}),c&&e.jsxs("p",{className:"mt-1 text-red-500 italic",children:[c.includes("required")&&"This field is required",c.includes("minimum")&&"Please enter a higher value",c.includes("maximum")&&"Please enter a lower value",c.includes("length")&&"Please check the length",c.includes("format")&&"Please check the format",c.includes("invalid")&&"Please enter a valid value"]})]}),o&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),"Looks good!"]})]})});J.displayName="ValidatedTextarea";const K=a.forwardRef(({label:l,name:s,value:t,onChange:r,onBlur:u,validator:d,error:h,showError:x=!0,showSuccess:B=!0,required:L=!1,disabled:j=!1,options:V=[],placeholder:E="Select an option...",className:P="",labelClassName:R="",helpText:b,...I},$)=>{const[C,k]=a.useState(null),[y,w]=a.useState(!1),v=n=>{if(w(!0),d){const c=d(t);k(c)}u&&u(n)},f=n=>{if(d){const c=d(n.target.value);k(c)}r&&r(n)},i=h||C,p=!i&&t&&y,m=x&&i&&y,T=B&&p;return e.jsxs("div",{className:`space-y-1 ${P}`,children:[l&&e.jsxs("label",{htmlFor:s,className:`block text-sm font-medium text-gray-700 ${R}`,children:[l,L&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{ref:$,name:s,id:s,value:t||"",onChange:f,onBlur:v,disabled:j,className:`
            input w-full pr-10
            ${m?"border-red-300 focus:border-red-500 focus:ring-red-500":""}
            ${T?"border-green-300 focus:border-green-500 focus:ring-green-500":""}
            ${j?"bg-gray-50 cursor-not-allowed":""}
          `,...I,children:[e.jsx("option",{value:"",children:E}),V.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))]}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:[m&&e.jsx(A,{className:"h-4 w-4 text-red-500"}),T&&e.jsx(_,{className:"h-4 w-4 text-green-500"})]})]}),b&&!m&&e.jsx("p",{className:"text-xs text-gray-500",children:b}),m&&e.jsxs("div",{className:"text-xs text-red-600",children:[e.jsxs("p",{className:"flex items-center font-medium",children:[e.jsx(A,{className:"h-3 w-3 mr-1 flex-shrink-0"}),i]}),i&&e.jsxs("p",{className:"mt-1 text-red-500 italic",children:[i.includes("required")&&"This field is required",i.includes("minimum")&&"Please enter a higher value",i.includes("maximum")&&"Please enter a lower value",i.includes("length")&&"Please check the length",i.includes("format")&&"Please check the format",i.includes("invalid")&&"Please enter a valid value"]})]}),T&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),"Looks good!"]})]})});K.displayName="ValidatedSelect";export{K as V,ae as a,te as b,re as c,U as d,ie as e,se as u};
