import{r as c,bn as Oe,d as Ie,R as pe,bo as ze,bp as Ke,bq as qe,br as Ve,bs as Ge,bt as Qe,p as e,S as V,ad as G,a1 as Je,U as He,aH as Ye,s as We,w as W,x as he,y as X,A as Z,B as ge,z as T}from"./index-QHzcgHe1.js";import{P as Xe}from"./PrintModal-C-XpLZIw.js";import{u as Ze}from"./suppliersApi-TtAmQji1.js";import{u as es}from"./chartOfAccountsApi-CmNpcq75.js";import{D as ss}from"./download-ULFDWFy_.js";import{P as as}from"./plus-wthIFHeq.js";import{P as ee}from"./phone-DmhyAe7y.js";import{S as ts}from"./save-CQRiczmt.js";import{F as ns}from"./filter-DkEczEi5.js";import{P as rs}from"./printer-Dmqc0NC_.js";import{E as ls}from"./eye-D8xIUmp0.js";import{P as cs}from"./pen-square-D_ZZfkE6.js";import{T as is}from"./trash-2-G7GOGhVq.js";import"./useCompanyInfo-CJ-A3-l8.js";import"./settingsApi-D-e2N-LC.js";const Ne=(C=new Date)=>{const u=C.getFullYear(),Q=String(C.getMonth()+1).padStart(2,"0"),R=String(C.getDate()).padStart(2,"0");return`${u}-${Q}-${R}`},Ps=()=>{var oe,me,xe,ue;const C=Ne(),[u,Q]=c.useState({fromDate:C,toDate:C,voucherCode:"",amount:"",particular:""}),[R,je]=c.useState({page:1,limit:50}),[se,ye]=c.useState({key:"date",direction:"desc"}),[be,ae]=c.useState(!1),[S,te]=c.useState(null),[o,m]=c.useState({date:C,amount:"",particular:"",supplier:"",customer:"",notes:""}),[n,k]=c.useState(null),[r,B]=c.useState(null),[h,_]=c.useState(null),[g,b]=c.useState(""),[N,f]=c.useState(""),[E,j]=c.useState(""),[i,O]=c.useState("supplier"),[I,P]=c.useState(-1),[z,D]=c.useState(-1),[K,$]=c.useState(-1),{data:l,isLoading:fe,error:ne,refetch:J}=Oe({...u,...R,sortConfig:se},{refetchOnMountOrArgChange:!0}),{data:v,isLoading:ds,error:os,refetch:ve}=Ze({search:"",limit:100},{refetchOnMountOrArgChange:!0}),{data:L,isLoading:ms,error:xs,refetch:we}=Ie({search:"",limit:100},{refetchOnMountOrArgChange:!0}),{data:p,isLoading:us}=es({accountType:"expense",isActive:"true"},{refetchOnMountOrArgChange:!0}),A=pe.useMemo(()=>{var s;return((s=v==null?void 0:v.data)==null?void 0:s.suppliers)||(v==null?void 0:v.suppliers)||v||[]},[v]),M=((oe=L==null?void 0:L.data)==null?void 0:oe.customers)||(L==null?void 0:L.customers)||L||[],y=pe.useMemo(()=>Array.isArray(p)?p:Array.isArray(p==null?void 0:p.data)?p.data:Array.isArray(p==null?void 0:p.accounts)?p.accounts:[],[p]);c.useEffect(()=>{if(n&&A.length>0){const s=A.find(t=>t._id===n._id);s&&(s.pendingBalance!==n.pendingBalance||s.advanceBalance!==n.advanceBalance||s.currentBalance!==n.currentBalance)&&k(s)}},[A]),c.useEffect(()=>{if(r&&M.length>0){const s=M.find(t=>t._id===r._id);s&&(s.pendingBalance!==r.pendingBalance||s.advanceBalance!==r.advanceBalance||s.currentBalance!==r.currentBalance)&&B(s)}},[M]);const[Ce,{isLoading:re}]=ze(),[Se]=Ke(),[ke]=qe(),[Be]=Ve(),[Ee]=Ge(),[Pe]=Qe(),H=()=>{m({date:Ne(),amount:"",particular:"",supplier:"",customer:"",notes:""}),k(null),B(null),_(null),b(""),f(""),j(""),O("supplier"),P(-1),D(-1),$(-1)},le=s=>{const t=A.find(a=>a._id===s);k(t),m(a=>({...a,supplier:s,customer:""})),B(null),f("")},ce=s=>{const t=M.find(a=>a._id===s);B(t),m(a=>({...a,customer:s,supplier:""})),k(null),b("")},De=s=>{b(s),P(-1),s===""&&(k(null),m(t=>({...t,supplier:""})))},$e=s=>{f(s),D(-1),s===""&&(B(null),m(t=>({...t,customer:""})))},ie=s=>{const t=y==null?void 0:y.find(a=>a._id===s);t&&(_(t),j(t.accountName||""),m(a=>({...a,particular:t.accountName||""})))},Le=s=>{j(s),$(-1),s===""&&(_(null),m(t=>({...t,particular:""})))},Ae=s=>{const t=(y==null?void 0:y.filter(a=>(a.accountName||"").toLowerCase().includes(E.toLowerCase())||(a.accountCode||"").includes(E)))||[];if(!(!E||t.length===0))switch(s.key){case"ArrowDown":s.preventDefault(),$(a=>a<t.length-1?a+1:0);break;case"ArrowUp":s.preventDefault(),$(a=>a>0?a-1:t.length-1);break;case"Enter":if(s.preventDefault(),K>=0&&K<t.length){const a=t[K];ie(a._id),j(a.accountName||""),$(-1)}break;case"Escape":s.preventDefault(),j(""),$(-1);break}},Me=s=>{const t=A.filter(a=>(a.companyName||a.name||a.displayName||"").toLowerCase().includes(g.toLowerCase())||(a.phone||"").includes(g)||(a.email||"").toLowerCase().includes(g.toLowerCase()));if(!(!g||t.length===0))switch(s.key){case"ArrowDown":s.preventDefault(),P(a=>a<t.length-1?a+1:0);break;case"ArrowUp":s.preventDefault(),P(a=>a>0?a-1:t.length-1);break;case"Enter":if(s.preventDefault(),I>=0&&I<t.length){const a=t[I];le(a._id),b(a.displayName||a.companyName||a.name||""),P(-1)}break;case"Escape":s.preventDefault(),b(""),P(-1);break}},Fe=s=>{const t=(M||[]).filter(a=>(a.displayName||a.businessName||a.name||`${a.firstName||""} ${a.lastName||""}`.trim()||a.email||"").toLowerCase().includes(N.toLowerCase())||(a.phone||"").includes(N)||(a.email||"").toLowerCase().includes(N.toLowerCase()))||[];if(!(!N||t.length===0))switch(s.key){case"ArrowDown":s.preventDefault(),D(a=>a<t.length-1?a+1:0);break;case"ArrowUp":s.preventDefault(),D(a=>a>0?a-1:t.length-1);break;case"Enter":if(s.preventDefault(),z>=0&&z<t.length){const a=t[z],d=a.displayName||a.businessName||a.name||`${a.firstName||""} ${a.lastName||""}`.trim()||a.email||"";ce(a._id),f(d),D(-1)}break;case"Escape":s.preventDefault(),f(""),D(-1);break}},U=(s,t)=>{Q(a=>({...a,[s]:t})),je(a=>({...a,page:1}))},Y=s=>{ye(t=>({key:s,direction:t.key===s&&t.direction==="asc"?"desc":"asc"}))},Te=()=>{if(!o.amount||o.amount<=0){T("Please enter a valid amount");return}if(i==="expense"&&!h){T("Please select an expense account");return}if(i==="supplier"&&!n){T("Please select a supplier");return}if(i==="customer"&&!r){T("Please select a customer");return}const s={date:o.date,amount:parseFloat(o.amount),particular:o.particular,supplier:i==="supplier"?o.supplier:void 0,customer:i==="customer"?o.customer:void 0,notes:o.notes};Ce(s).unwrap().then(()=>{H(),ge("Cash payment created successfully"),J(),i==="customer"&&o.customer?we():i==="supplier"&&o.supplier&&ve()}).catch(t=>{T(X(t))})},_e=async(s="csv")=>{try{const t={...u,...R,sortConfig:se};let a;s==="excel"?a=await Se(t).unwrap():s==="pdf"?a=await Be(t).unwrap():s==="json"?a=await Ee(t).unwrap():a=await ke(t).unwrap();const d=(a==null?void 0:a.filename)||(s==="excel"?"cash_payments.xlsx":s==="pdf"?"cash_payments.pdf":s==="json"?"cash_payments.json":"cash_payments.csv"),x=await Pe(d).unwrap(),F=x instanceof Blob?x:new Blob([x],{type:s==="excel"?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":s==="pdf"?"application/pdf":s==="json"?"application/json":"text/csv"}),q=URL.createObjectURL(F),w=document.createElement("a");w.href=q,w.download=d,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(q),ge(`Exported cash payments as ${s.toUpperCase()}`)}catch(t){T(X(t,"Cash Payments Export"))}},Ue=s=>{const t={invoiceNumber:s.voucherCode,orderNumber:s.voucherCode,createdAt:s.date,invoiceDate:s.date,customer:s.customer||null,customerInfo:s.customer||null,supplier:s.supplier||null,pricing:{subtotal:s.amount||0,total:s.amount||0,discountAmount:0,taxAmount:0},total:s.amount||0,subtotal:s.amount||0,items:[],payment:{method:"Cash",status:"Paid",amountPaid:s.amount||0},notes:s.notes||s.particular||""};te(t),ae(!0)},de=((me=l==null?void 0:l.data)==null?void 0:me.cashPayments)||(l==null?void 0:l.cashPayments)||((xe=l==null?void 0:l.data)==null?void 0:xe.payments)||(l==null?void 0:l.payments)||[],Re=((ue=l==null?void 0:l.data)==null?void 0:ue.pagination)||(l==null?void 0:l.pagination)||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cash Payments"}),e.jsx("p",{className:"text-gray-600",children:"Manage and view all cash payment transactions"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:_e,className:"btn btn-secondary flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:H,className:"btn btn-primary btn-md",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"New Payment"]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Payment Details"})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"supplier",checked:i==="supplier",onChange:s=>{O(s.target.value),B(null),_(null),f(""),j(""),m(t=>({...t,customer:"",particular:""}))},className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Supplier"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"customer",checked:i==="customer",onChange:s=>{O(s.target.value),k(null),_(null),b(""),j(""),m(t=>({...t,supplier:"",particular:""}))},className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Customer"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"expense",checked:i==="expense",onChange:s=>{O(s.target.value),k(null),B(null),b(""),f(""),m(t=>({...t,supplier:"",customer:"",particular:""}))},className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Expense"})]})]})]}),i==="supplier"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:g,onChange:s=>De(s.target.value),onKeyDown:Me,className:"input w-full pr-10",placeholder:"Search or select supplier..."}),e.jsx(V,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),g&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg",children:A.filter(s=>(s.companyName||s.name||s.displayName||"").toLowerCase().includes(g.toLowerCase())||(s.phone||"").includes(g)||(s.email||"").toLowerCase().includes(g.toLowerCase())).map((s,t)=>e.jsxs("div",{onClick:()=>{le(s._id),b(s.displayName||s.companyName||s.name||""),P(-1)},className:`px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 ${I===t?"bg-blue-50":""}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.displayName||s.companyName||s.name||"Unknown"}),e.jsx("div",{className:"text-sm text-gray-600 capitalize mt-0.5",children:s.businessType&&s.reliability?`${s.businessType} • ${s.reliability}`:s.businessType||s.reliability||""}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-gray-500",children:"Outstanding Balance:"})," ",e.jsxs("span",{className:`font-medium ${(s.pendingBalance||0)>0?"text-red-600":"text-green-600"}`,children:["$",Math.round(s.pendingBalance||0)]})]}),s.phone&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx("span",{children:s.phone})]}),s.email&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(G,{className:"h-3 w-3"}),e.jsx("span",{children:s.email})]})]})]},s._id))}),n&&e.jsx("div",{className:"mt-3 bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Je,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:n.displayName||n.companyName||n.name||"Unknown Supplier"}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:n.businessType&&n.reliability?`${n.businessType} • ${n.reliability}`:n.businessType||n.reliability||"Supplier Information"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Outstanding Balance:"}),e.jsxs("span",{className:`text-sm font-medium ${(n.pendingBalance||0)>0?"text-red-600":"text-green-600"}`,children:["$",Math.round(n.pendingBalance||0)]})]}),n.phone&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ee,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:n.phone})]}),n.email&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(G,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:n.email})]})]})]})]})})]}),i==="customer"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:N,onChange:s=>$e(s.target.value),onKeyDown:Fe,className:"input w-full pr-10",placeholder:"Search customers by name, email, or business..."}),e.jsx(V,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),N&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg",children:(M||[]).filter(s=>(s.displayName||s.businessName||s.name||`${s.firstName||""} ${s.lastName||""}`.trim()||s.email||"").toLowerCase().includes(N.toLowerCase())||(s.phone||"").includes(N)||(s.email||"").toLowerCase().includes(N.toLowerCase())).map((s,t)=>{const a=s.pendingBalance||0,d=s.advanceBalance||0,x=a-d,F=x<0,q=a>0||d>0,w=s.displayName||s.businessName||s.name||`${s.firstName||""} ${s.lastName||""}`.trim()||s.email||"Unknown";return e.jsxs("div",{onClick:()=>{ce(s._id),f(w),D(-1)},className:`px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 ${z===t?"bg-blue-50":""}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:w}),e.jsx("div",{className:"text-sm text-gray-600 capitalize mt-0.5",children:s.businessType||""}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[q&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-gray-500",children:F?"Payables:":"Receivables:"})," ",e.jsxs("span",{className:`font-medium ${F?"text-red-600":"text-green-600"}`,children:["$",Math.abs(x).toFixed(2)]})]}),s.phone&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx("span",{children:s.phone})]}),s.email&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(G,{className:"h-3 w-3"}),e.jsx("span",{children:s.email})]})]})]},s._id)})}),r&&e.jsx("div",{className:"mt-3 bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(He,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:r.displayName||r.businessName||r.name||`${r.firstName||""} ${r.lastName||""}`.trim()||r.email||"Unknown Customer"}),e.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[r.businessType?`${r.businessType} • `:"",r.phone||"No phone"]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[(()=>{const s=r.pendingBalance||0,t=r.advanceBalance||0,a=s-t,d=a<0,x=a>0;return s>0||t>0?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:d?"Payables:":"Receivables:"}),e.jsxs("span",{className:`text-sm font-medium ${d?"text-red-600":x?"text-green-600":"text-gray-600"}`,children:["$",Math.abs(a).toFixed(2)]})]}):null})(),r.email&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(G,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:r.email})]})]})]})]})})]}),i==="expense"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expense Account *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:h?h.accountName:E,onChange:s=>Le(s.target.value),onKeyDown:Ae,onFocus:()=>{h&&j(h.accountName||"")},className:"input w-full pr-10",placeholder:"Search expense account (e.g., Rent Expense, Utilities Expense, etc.)",required:!0}),e.jsx(V,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),E&&!h&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg",children:y==null?void 0:y.filter(s=>(s.accountName||"").toLowerCase().includes(E.toLowerCase())||(s.accountCode||"").includes(E)).map((s,t)=>e.jsxs("div",{onClick:()=>{ie(s._id),j(s.accountName||""),$(-1)},className:`px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 ${K===t?"bg-blue-50":""}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.accountName||"Unknown"}),s.accountCode&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",s.accountCode]})]},s._id))})]}),i==="expense"&&h&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Expense Account"}),e.jsxs("div",{className:"px-3 py-2 bg-blue-50 border border-blue-200 rounded",children:[e.jsx("div",{className:"font-medium text-blue-900",children:h.accountName||"Unknown"}),h.accountCode&&e.jsxs("div",{className:"text-sm text-blue-700",children:["Code: ",h.accountCode]})]})]}),(n||r)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Balance"}),e.jsxs("div",{className:"space-y-1",children:[i==="supplier"&&n&&e.jsxs(e.Fragment,{children:[n.pendingBalance>0&&e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-red-50 border border-red-200 rounded",children:[e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Payables:"}),e.jsx("span",{className:"text-sm font-bold text-red-700",children:n.pendingBalance.toFixed(2)})]}),n.advanceBalance>0&&e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-green-50 border border-green-200 rounded",children:[e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Advance:"}),e.jsx("span",{className:"text-sm font-bold text-green-700",children:n.advanceBalance.toFixed(2)})]}),n.pendingBalance===0&&n.advanceBalance===0&&e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded text-sm text-gray-600 text-center",children:"No balance"}),n.pendingBalance>0&&n.advanceBalance>0&&e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-50 border-2 border-blue-300 rounded",children:[e.jsx("span",{className:"text-sm font-bold text-blue-700",children:"Net Balance:"}),e.jsx("span",{className:`text-sm font-bold ${n.pendingBalance-n.advanceBalance>0?"text-red-700":"text-green-700"}`,children:(n.pendingBalance-n.advanceBalance).toFixed(2)})]})]}),i==="customer"&&r&&e.jsx(e.Fragment,{children:(()=>{const s=r.pendingBalance||0,t=r.advanceBalance||0,a=s-t,d=a<0,x=a>0;return s>0||t>0?e.jsxs("div",{className:`flex items-center justify-between px-3 py-2 rounded ${d?"bg-red-50 border border-red-200":x?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[e.jsx("span",{className:`text-sm font-medium ${d?"text-red-700":x?"text-green-700":"text-gray-700"}`,children:d?"Payables:":x?"Receivables:":"Balance:"}),e.jsx("span",{className:`text-sm font-bold ${d?"text-red-700":x?"text-green-700":"text-gray-700"}`,children:Math.abs(a).toFixed(2)})]}):e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded text-sm text-gray-600 text-center",children:"No balance"})})()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:o.amount,onChange:s=>{const t=s.target.value===""?"":parseFloat(s.target.value)||"";m(a=>({...a,amount:t}))},className:"input w-full",placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:o.date,onChange:s=>m(t=>({...t,date:s.target.value})),className:"input w-full pr-10"}),e.jsx(Ye,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("input",{type:"text",value:o.particular,onChange:s=>m(t=>({...t,particular:s.target.value})),className:"input w-full",placeholder:"Enter payment description or notes..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:o.notes,onChange:s=>m(t=>({...t,notes:s.target.value})),className:"input w-full h-20 resize-none",placeholder:"Additional notes..."})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:H,className:"btn btn-secondary flex items-center space-x-2",children:[e.jsx(We,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset"})]}),e.jsxs("button",{onClick:Te,disabled:re,className:"btn btn-primary flex items-center space-x-2",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx("span",{children:re?"Saving...":"Save Payment"})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ns,{className:"h-5 w-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters"})]})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:u.fromDate,onChange:s=>U("fromDate",s.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:u.toDate,onChange:s=>U("toDate",s.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voucher Code"}),e.jsx("input",{type:"text",placeholder:"Contains...",value:u.voucherCode,onChange:s=>U("voucherCode",s.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsx("input",{type:"number",placeholder:"Equals...",value:u.amount,onChange:s=>U("amount",s.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Particular"}),e.jsx("input",{type:"text",placeholder:"Contains...",value:u.particular,onChange:s=>U("particular",s.target.value),className:"input"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:()=>J(),className:"btn btn-primary w-full flex items-center justify-center space-x-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{children:"Search"})]})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Cash Payments From: ",W(u.fromDate)," To: ",W(u.toDate)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[Re.totalItems||0," records"]}),e.jsx("button",{onClick:()=>J(),className:"p-2 text-gray-400 hover:text-gray-600",title:"Refresh",children:e.jsx(he,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"card-content p-0",children:fe?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(he,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading cash payments..."})]}):ne?e.jsx("div",{className:"p-8 text-center text-red-600",children:e.jsxs("p",{children:["Error loading cash payments: ",X(ne).message]})}):de.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:e.jsx("p",{children:"No cash payments found for the selected criteria."})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Y("date"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Date"}),e.jsx(Z,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Y("voucherCode"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Voucher Code"}),e.jsx(Z,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Y("amount"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Amount"}),e.jsx(Z,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Particular"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier/Customer/Expense"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:de.map((s,t)=>e.jsxs("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:W(s.date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.voucherCode}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Math.round(s.amount)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:s.particular}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.supplier?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.supplier.displayName||s.supplier.companyName||s.supplier.name||"Unknown Supplier"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Supplier"})]}):s.customer?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.customer.displayName||s.customer.businessName||s.customer.name||`${s.customer.firstName||""} ${s.customer.lastName||""}`.trim()||s.customer.email||"Unknown Customer"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Customer"})]}):s.paymentType==="expense"?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-orange-600",children:"Expense"}),e.jsx("div",{className:"text-gray-500 text-xs",children:s.particular||"N/A"})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Ue(s),className:"text-green-600 hover:text-green-900",title:"Print",children:e.jsx(rs,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-blue-600 hover:text-blue-900",title:"View",children:e.jsx(ls,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",title:"Edit",children:e.jsx(cs,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(is,{className:"h-4 w-4"})})]})})]},s._id))})]})})})})]}),e.jsx(Xe,{isOpen:be,onClose:()=>{ae(!1),te(null)},orderData:S,documentTitle:"Cash Payment",partyLabel:S!=null&&S.supplier?"Supplier":S!=null&&S.customer?"Customer":"Payee"}),!1]})};export{Ps as default};
