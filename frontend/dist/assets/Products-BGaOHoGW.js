import{D as Ge,ah as ft,r as v,p as n,a2 as er,L as Se,X as te,B as J,y as Q,ai as Kr,z as Fe,O as z,aj as Zr,S as ot,P as ke,ak as ht,I as ze,T as br,al as en,am as tn,R as rn,E as lt,u as nn,an,ao as sn,x as tr,ap as on}from"./index-QHzcgHe1.js";import{c as ln,d as cn,e as dn,f as un,g as fn,p as hn,h as mn,i as xn,j as pn,k as vn,l as gn,m as yn,a as bn}from"./productsApi-BS7itgd6.js";import{u as _n}from"./useFuzzySearch-CPK0wZPc.js";import{D as jn}from"./ConfirmationDialog-CpWps3pF.js";import{a as wn}from"./useConfirmation-BFyzFbUJ.js";import{D as Nn}from"./database-O62o8Dd4.js";import{U as En}from"./upload-D2S2_33i.js";import{C as mt}from"./chevron-up-C3PDmoXo.js";import{C as xt}from"./chevron-down-oX_1uWoZ.js";import{D as he}from"./download-ULFDWFy_.js";import{F as On}from"./file-spreadsheet-rsHRZgSZ.js";import{H as Sn}from"./help-circle-Yi58xA3P.js";import{C as kn}from"./check-circle-pdbRLUjc.js";import{A as $n}from"./alert-circle-Zvregbhl.js";import{F as Pn}from"./filter-DkEczEi5.js";import{P as _r}from"./pen-square-D_ZZfkE6.js";import{T as jr}from"./trash-2-G7GOGhVq.js";import{S as Cn}from"./save-CQRiczmt.js";import{C as wr,B as An}from"./BarcodeScanner-w-FL6Exq.js";import{C as In}from"./check-CWpXnlSq.js";import{P as Ue}from"./printer-Dmqc0NC_.js";import{N as Tn}from"./NotesPanel-DQRcuSBD.js";import{u as Mn}from"./investorsApi-CmY5oUXQ.js";import{P as Rn}from"./plus-wthIFHeq.js";import"./info-L9xTXcgi.js";import"./message-square-DH13qjhm.js";import"./history-DhghIn6j.js";import"./lock-8uvSbQ7f.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Ge("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Ge("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=Ge("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=Ge("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]),Ln=({onImportComplete:t,filters:e={}})=>{const a=ft(),[r,i]=v.useState(!1),[s,o]=v.useState(!1),[l,p]=v.useState(!1),[x,E]=v.useState(null),[d,N]=v.useState(null),[y,k]=v.useState(!1),[T,S]=v.useState("csv"),[c]=ln(),[_]=cn(),[$]=dn(),[L]=un(),[m]=fn(),M=async()=>{try{return await m().unwrap()}catch{const b=await m();return b.data||b}},f=async h=>(await a(hn.endpoints.downloadFile.initiate(h))).data,j=async()=>{try{o(!0);const h=await c(e).unwrap(),b=await f(h.filename),A=(b==null?void 0:b.data)||b,w=new Blob([A],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a"),B=URL.createObjectURL(w);g.setAttribute("href",B),g.setAttribute("download",h.filename),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g),J(`Exported ${h.recordCount} products to CSV`)}catch(h){Q(h,"CSV Export")}finally{o(!1)}},O=async()=>{try{o(!0);const h=await _(e).unwrap(),b=await f(h.filename),A=(b==null?void 0:b.data)||b,w=new Blob([A],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),g=document.createElement("a"),B=URL.createObjectURL(w);g.setAttribute("href",B),g.setAttribute("download",h.filename),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g),J(`Exported ${h.recordCount} products to Excel`)}catch(h){Q(h,"Excel Export")}finally{o(!1)}},P=h=>{const b=h.target.files[0];if(b){const w=Kr(b,{allowedTypes:["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],maxSizeInMB:10,required:!0});if(w){Fe(w),h.target.value="";return}E(b),S(b.type.includes("csv")?"csv":"excel")}},F=async()=>{var h,b,A;if(!x){z.error("Please select a file to import");return}try{p(!0);const w=T==="csv"?await L(x).unwrap():await $(x).unwrap();N(w.results||((h=w.data)==null?void 0:h.results));const g=w.results||((b=w.data)==null?void 0:b.results);(g==null?void 0:g.success)>0&&(J(`Successfully imported ${g.success} products`),t&&t()),((A=g==null?void 0:g.errors)==null?void 0:A.length)>0&&Zr(`${g.errors.length} products failed to import`)}catch(w){Q(w,"Product Import")}finally{p(!1)}},D=async()=>{try{const h=await M(),b=(h==null?void 0:h.data)||h,A=new Blob([b],{type:"text/csv;charset=utf-8;"}),w=document.createElement("a"),g=URL.createObjectURL(A);w.setAttribute("href",g),w.setAttribute("download","product_template.csv"),w.style.visibility="hidden",document.body.appendChild(w),w.click(),document.body.removeChild(w),J("Template downloaded successfully")}catch(h){Q(h,"Template Download")}},u=()=>{E(null),N(null),k(!1)};return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:()=>i(!r),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Nn,{className:"h-5 w-5 text-gray-600"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Import / Export Products"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:h=>{h.stopPropagation(),k(!0)},className:"btn btn-primary btn-sm",children:[n.jsx(En,{className:"h-4 w-4 mr-2"}),"Import Products"]}),r?n.jsx(mt,{className:"h-4 w-4 text-gray-400"}):n.jsx(xt,{className:"h-4 w-4 text-gray-400"})]})]}),r&&n.jsxs("div",{className:"border-t border-gray-200 p-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(er,{className:"h-5 w-5 text-blue-600 mr-2"}),n.jsx("h4",{className:"font-medium text-gray-900",children:"Export to CSV"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Export all products to a CSV file for backup or analysis."}),n.jsxs(Se,{onClick:j,isLoading:s,className:"btn btn-secondary btn-sm w-full",children:[n.jsx(he,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(On,{className:"h-5 w-5 text-green-600 mr-2"}),n.jsx("h4",{className:"font-medium text-gray-900",children:"Export to Excel"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Export all products to an Excel file with formatting."}),n.jsxs(Se,{onClick:O,isLoading:s,className:"btn btn-secondary btn-sm w-full",children:[n.jsx(he,{className:"h-4 w-4 mr-2"}),"Export Excel"]})]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Sn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Import Guidelines"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:"• Download the template to see the required format"}),n.jsx("li",{children:"• Required fields: Product Name, Category"}),n.jsx("li",{children:"• Supported formats: CSV, Excel (.xlsx)"}),n.jsx("li",{children:"• Maximum file size: 10MB"}),n.jsx("li",{children:"• Products with duplicate names will be skipped"})]}),n.jsxs("button",{onClick:D,className:"btn btn-primary btn-xs mt-3",children:[n.jsx(he,{className:"h-3 w-3 mr-1"}),"Download Template"]})]})]})}),y&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Import Products"}),n.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600",children:n.jsx(te,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"p-6",children:d?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Import Results"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[n.jsx(kn,{className:"h-6 w-6 text-green-600 mx-auto mb-1"}),n.jsx("div",{className:"text-lg font-semibold text-green-600",children:d.success}),n.jsx("div",{className:"text-sm text-green-700",children:"Success"})]}),n.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[n.jsx($n,{className:"h-6 w-6 text-red-600 mx-auto mb-1"}),n.jsx("div",{className:"text-lg font-semibold text-red-600",children:d.errors.length}),n.jsx("div",{className:"text-sm text-red-700",children:"Errors"})]})]}),d.errors.length>0&&n.jsxs("div",{className:"max-h-40 overflow-y-auto",children:[n.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Errors:"}),n.jsxs("div",{className:"space-y-2",children:[d.errors.slice(0,10).map((h,b)=>n.jsxs("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:["Row ",h.row,": ",h.error]},b)),d.errors.length>10&&n.jsxs("div",{className:"text-sm text-gray-500",children:["... and ",d.errors.length-10," more errors"]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:u,className:"btn btn-primary btn-sm",children:"Close"})})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"}),n.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:P,className:"input w-full"})]}),x&&n.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(er,{className:"h-4 w-4 text-gray-600 mr-2"}),n.jsx("span",{className:"text-sm text-gray-700",children:x.name}),n.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[(x.size/1024/1024).toFixed(2)," MB"]})]})}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{onClick:u,className:"btn btn-secondary btn-sm",children:"Cancel"}),n.jsx(Se,{onClick:F,isLoading:l,disabled:!x,className:"btn btn-primary btn-sm",children:"Import Products"})]})]})})]})})]})]})},Fn=({filters:t,onFiltersChange:e,categories:a=[],onClearFilters:r})=>{const[i,s]=v.useState(!1),o=(d,N)=>{e({...t,[d]:N})},l=d=>{const N={...t};delete N[d],e(N)},p=()=>{e({}),r&&r()},x=Object.keys(t).some(d=>t[d]!==""&&t[d]!==null&&t[d]!==void 0),E=()=>Object.keys(t).filter(d=>t[d]!==""&&t[d]!==null&&t[d]!==void 0).length;return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:()=>s(!i),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Pn,{className:"h-5 w-5 text-gray-600"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Filters"}),x&&n.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full",children:[E()," active"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[x&&n.jsx("button",{onClick:d=>{d.stopPropagation(),p()},className:"text-sm text-red-600 hover:text-red-800 font-medium",children:"Clear All"}),i?n.jsx(mt,{className:"h-4 w-4 text-gray-400"}):n.jsx(xt,{className:"h-4 w-4 text-gray-400"})]})]}),i&&n.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(ot,{className:"h-4 w-4 inline mr-1"}),"Search Products"]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Product name or description...",value:t.search||"",onChange:d=>o("search",d.target.value),className:"input pl-8"}),n.jsx(ot,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.search&&n.jsx("button",{onClick:()=>l("search"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n.jsx(te,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(ke,{className:"h-4 w-4 inline mr-1"}),"Status"]}),n.jsxs("select",{value:t.status||"",onChange:d=>o("status",d.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Statuses"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"discontinued",children:"Discontinued"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(ht,{className:"h-4 w-4 inline mr-1"}),"Category"]}),n.jsxs("select",{value:t.category||"",onChange:d=>o("category",d.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Categories"}),a.map(d=>n.jsx("option",{value:d._id,children:d.name},d._id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(ze,{className:"h-4 w-4 inline mr-1"}),"Stock Status"]}),n.jsxs("select",{value:t.stockStatus||"",onChange:d=>o("stockStatus",d.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Stock Levels"}),n.jsx("option",{value:"lowStock",children:"Low Stock"}),n.jsx("option",{value:"outOfStock",children:"Out of Stock"}),n.jsx("option",{value:"inStock",children:"In Stock"})]})]})]}),x&&n.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Active Filters:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(t).map(([d,N])=>{if(!N||N==="")return null;let y=N,k=d;switch(d){case"status":k="Status",y=N.charAt(0).toUpperCase()+N.slice(1);break;case"category":k="Category";const T=a.find(S=>S._id===N);y=T?T.name:N;break;case"stockStatus":k="Stock",y=N==="lowStock"?"Low Stock":N==="outOfStock"?"Out of Stock":N==="inStock"?"In Stock":N;break;case"search":k="Search",y=`"${N}"`;break;default:k=d.charAt(0).toUpperCase()+d.slice(1)}return n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[k,": ",y,n.jsx("button",{onClick:()=>l(d),className:"ml-1 hover:text-blue-600",children:n.jsx(te,{className:"h-3 w-3"})})]},d)})})]})]})]})},Un=(t=[],e={})=>{const{idField:a="_id",onBulkOperation:r=null,enableUndo:i=!0,maxUndoHistory:s=10}=e,[o,l]=v.useState(new Set),[p,x]=v.useState(!1),[E,d]=v.useState(!1),[N,y]=v.useState({current:0,total:0,message:""}),[k,T]=v.useState([]),[S,c]=v.useState(null),_=v.useRef([]),$=v.useCallback(u=>{l(h=>{const b=new Set(h);return b.has(u)?b.delete(u):b.add(u),x(b.size===t.length&&t.length>0),b})},[t]),L=v.useCallback((u=null)=>{const h=u||t,b=new Set(h.map(A=>A[a]));l(b),x(!0)},[t,a]),m=v.useCallback(()=>{l(new Set),x(!1)},[]),M=v.useCallback((u=null)=>{p?m():L(u||t)},[p,t,L,m]),f=v.useCallback(()=>t.filter(u=>o.has(u[a])),[t,o,a]),j=v.useCallback(u=>o.has(u),[o]),O=o.size,P=v.useCallback(async(u,h={})=>{const b=f();if(b.length===0)return{success:!1,message:"No items selected"};d(!0),y({current:0,total:b.length,message:"Starting operation..."});const A=b.map(g=>({...g})),w={id:Date.now().toString(),type:u,timestamp:new Date().toISOString(),items:A,data:h};try{let g=0,B=0;const U=[];for(let R=0;R<b.length;R++){const G=b[R];y({current:R+1,total:b.length,message:`Processing ${G.name||G.orderNumber||G.businessName||"item"}...`});try{r&&await r(G,u,h),g++}catch(Z){B++,U.push({item:G,error:Z.message||"Unknown error"})}await new Promise(Z=>setTimeout(Z,50))}return i&&(T(R=>{const G=[w,...R].slice(0,s);return _.current=G,G}),c(w)),g>0&&m(),d(!1),y({current:0,total:0,message:""}),{success:!0,successCount:g,failureCount:B,errors:U,operationRecord:w}}catch(g){return d(!1),y({current:0,total:0,message:""}),{success:!1,message:g.message||"Operation failed",operationRecord:w}}},[f,r,i,s,m]),F=v.useCallback(async()=>{if(k.length===0||!S)return{success:!1,message:"No operation to undo"};d(!0),y({current:0,total:S.items.length,message:"Undoing operation..."});try{for(let u=0;u<S.items.length;u++){const h=S.items[u];y({current:u+1,total:S.items.length,message:`Reverting ${h.name||h.orderNumber||h.businessName||"item"}...`}),r&&await r(h,`undo_${S.type}`,S.data),await new Promise(b=>setTimeout(b,50))}return T(u=>u.filter(h=>h.id!==S.id)),c(k[1]||null),d(!1),y({current:0,total:0,message:""}),{success:!0,message:"Operation undone successfully"}}catch(u){return d(!1),y({current:0,total:0,message:""}),{success:!1,message:u.message||"Undo failed"}}},[k,S,r]),D=v.useCallback(()=>{T([]),c(null),_.current=[]},[]);return{selectedIds:Array.from(o),selectedCount:O,isSelectAll:p,isSelected:j,getSelectedItems:f,toggleSelection:$,selectAll:L,deselectAll:m,toggleSelectAll:M,isOperationInProgress:E,operationProgress:N,canUndo:i&&S!==null,undoHistory:k,executeBulkOperation:P,undoLastOperation:F,clearUndoHistory:D}},Gn=({selectedCount:t,isOperationInProgress:e,operationProgress:a,canUndo:r,onBulkUpdate:i,onBulkDelete:s,onBulkExport:o,onBulkStatusChange:l,onBulkCategoryChange:p,onBulkPriceUpdate:x,onBulkStockAdjust:E,onUndo:d,onClearSelection:N,availableActions:y=["update","delete","export","status","category","price","stock"],className:k=""})=>t===0&&!e?null:n.jsxs("div",{className:`bg-primary-50 border border-primary-200 rounded-lg p-4 ${k}`,children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(rr,{className:"h-5 w-5 text-primary-600"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[t," ",t===1?"item":"items"," selected"]})]}),e&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary-600 border-t-transparent"}),n.jsxs("span",{className:"text-sm text-gray-600",children:[a.message||"Processing..."," (",a.current,"/",a.total,")"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 flex-wrap",children:[r&&n.jsxs("button",{onClick:d,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",title:"Undo last operation",children:[n.jsx(Bn,{className:"h-4 w-4 mr-1"}),"Undo"]}),y.includes("update")&&i&&n.jsxs("button",{onClick:i,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(_r,{className:"h-4 w-4 mr-1"}),"Update"]}),y.includes("status")&&l&&n.jsxs("button",{onClick:l,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(rr,{className:"h-4 w-4 mr-1"}),"Change Status"]}),y.includes("category")&&p&&n.jsxs("button",{onClick:p,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(ht,{className:"h-4 w-4 mr-1"}),"Change Category"]}),y.includes("price")&&x&&n.jsxs("button",{onClick:x,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(br,{className:"h-4 w-4 mr-1"}),"Update Prices"]}),y.includes("stock")&&E&&n.jsxs("button",{onClick:E,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(ke,{className:"h-4 w-4 mr-1"}),"Adjust Stock"]}),y.includes("export")&&o&&n.jsxs("button",{onClick:o,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(he,{className:"h-4 w-4 mr-1"}),"Export"]}),y.includes("delete")&&s&&n.jsxs("button",{onClick:s,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-red-700 bg-white border border-red-300 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(jr,{className:"h-4 w-4 mr-1"}),"Delete"]}),n.jsxs("button",{onClick:N,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(te,{className:"h-4 w-4 mr-1"}),"Clear"]})]})]}),e&&a.total>0&&n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${a.current/a.total*100}%`}})})})]}),zn=({isOpen:t,onClose:e,selectedCount:a,updateType:r,onConfirm:i,categories:s=[],statusOptions:o=[],tierOptions:l=[],isLoading:p=!1})=>{const[x,E]=v.useState({}),[d,N]=v.useState({});if(!t)return null;const y=(c,_)=>{E($=>({...$,[c]:_})),N($=>({...$,[c]:null}))},k=c=>{c.preventDefault();const _={};if(r==="price"&&!x.priceType&&(_.priceType="Please select a price type"),r==="price"&&x.priceValue===void 0&&(_.priceValue="Please enter a price value"),r==="category"&&!x.category&&(_.category="Please select a category"),r==="status"&&!x.status&&(_.status="Please select a status"),r==="stock"&&x.stockAdjustment===void 0&&(_.stockAdjustment="Please enter a stock adjustment"),r==="tier"&&!x.tier&&(_.tier="Please select a tier"),Object.keys(_).length>0){N(_);return}i(x)},T=()=>{switch(r){case"price":return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Type"}),n.jsxs("select",{value:x.priceType||"",onChange:c=>y("priceType",c.target.value),className:`w-full px-3 py-2 border rounded-md ${d.priceType?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select price type"}),n.jsx("option",{value:"retail",children:"Retail Price"}),n.jsx("option",{value:"wholesale",children:"Wholesale Price"}),n.jsx("option",{value:"cost",children:"Cost Price"})]}),d.priceType&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.priceType})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Update Method"}),n.jsxs("select",{value:x.updateMethod||"set",onChange:c=>y("updateMethod",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"set",children:"Set to value"}),n.jsx("option",{value:"increase",children:"Increase by amount"}),n.jsx("option",{value:"decrease",children:"Decrease by amount"}),n.jsx("option",{value:"percentage",children:"Change by percentage"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),n.jsx("input",{type:"number",step:"0.01",value:x.priceValue||"",onChange:c=>y("priceValue",parseFloat(c.target.value)),className:`w-full px-3 py-2 border rounded-md ${d.priceValue?"border-red-300":"border-gray-300"}`,placeholder:"Enter value"}),d.priceValue&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.priceValue})]})]});case"category":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{value:x.category||"",onChange:c=>y("category",c.target.value),className:`w-full px-3 py-2 border rounded-md ${d.category?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select category"}),s.map(c=>n.jsx("option",{value:c._id||c.id,children:c.name},c._id||c.id))]}),d.category&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.category})]});case"status":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{value:x.status||"",onChange:c=>y("status",c.target.value),className:`w-full px-3 py-2 border rounded-md ${d.status?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select status"}),o.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))]}),d.status&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.status})]});case"stock":return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adjustment Method"}),n.jsxs("select",{value:x.stockMethod||"set",onChange:c=>y("stockMethod",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"set",children:"Set to value"}),n.jsx("option",{value:"increase",children:"Increase by amount"}),n.jsx("option",{value:"decrease",children:"Decrease by amount"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Adjustment"}),n.jsx("input",{type:"number",value:x.stockAdjustment||"",onChange:c=>y("stockAdjustment",parseInt(c.target.value)),className:`w-full px-3 py-2 border rounded-md ${d.stockAdjustment?"border-red-300":"border-gray-300"}`,placeholder:"Enter amount"}),d.stockAdjustment&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.stockAdjustment})]})]});case"tier":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Tier"}),n.jsxs("select",{value:x.tier||"",onChange:c=>y("tier",c.target.value),className:`w-full px-3 py-2 border rounded-md ${d.tier?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select tier"}),l.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))]}),d.tier&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.tier})]});case"tags":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),n.jsx("input",{type:"text",value:x.tags||"",onChange:c=>y("tags",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"tag1, tag2, tag3"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter tags separated by commas. Existing tags will be replaced."})]});default:return null}},S=()=>({price:"Bulk Update Prices",category:"Bulk Change Category",status:"Bulk Change Status",stock:"Bulk Adjust Stock",tier:"Bulk Change Customer Tier",tags:"Bulk Update Tags"})[r]||"Bulk Update";return n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),n.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:n.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:S()}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(te,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(ze,{className:"h-5 w-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:["This will update ",n.jsx("strong",{children:a})," ",a===1?"item":"items","."]})]})}),n.jsxs("form",{onSubmit:k,children:[T(),n.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:e,disabled:p,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),n.jsxs(Se,{type:"submit",isLoading:p,className:"px-4 py-2 bg-primary-600 text-white rounded-md text-sm font-medium hover:bg-primary-700",children:[n.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Update ",a," ",a===1?"Item":"Items"]})]})]})]})})]})})};var pt={},Ve={},V={};Object.defineProperty(V,"__esModule",{value:!0});function Vn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Hn=function t(e,a){Vn(this,t),this.data=e,this.text=a.text||e,this.options=a};V.default=Hn;Object.defineProperty(Ve,"__esModule",{value:!0});Ve.CODE39=void 0;var qn=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Xn=V,Wn=Yn(Xn);function Yn(t){return t&&t.__esModule?t:{default:t}}function Jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Kn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Zn=function(t){Kn(e,t);function e(a,r){return Jn(this,e),a=a.toUpperCase(),r.mod43&&(a+=ra(na(a))),Qn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return qn(e,[{key:"encode",value:function(){for(var r=tt("*"),i=0;i<this.data.length;i++)r+=tt(this.data[i])+"0";return r+=tt("*"),{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(Wn.default),Er=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],ea=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function tt(t){return ta(Or(t))}function ta(t){return ea[t].toString(2)}function ra(t){return Er[t]}function Or(t){return Er.indexOf(t)}function na(t){for(var e=0,a=0;a<t.length;a++)e+=Or(t[a]);return e=e%43,e}Ve.CODE39=Zn;var K={},vt={},pe={},I={};Object.defineProperty(I,"__esModule",{value:!0});var we;function rt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var Sr=I.SET_A=0,kr=I.SET_B=1,$r=I.SET_C=2;I.SHIFT=98;var aa=I.START_A=103,ia=I.START_B=104,sa=I.START_C=105;I.MODULO=103;I.STOP=106;I.FNC1=207;I.SET_BY_CODE=(we={},rt(we,aa,Sr),rt(we,ia,kr),rt(we,sa,$r),we);I.SWAP={101:Sr,100:kr,99:$r};I.A_START_CHAR="Ð";I.B_START_CHAR="Ñ";I.C_START_CHAR="Ò";I.A_CHARS="[\0-_È-Ï]";I.B_CHARS="[ -È-Ï]";I.C_CHARS="(Ï*[0-9]{2}Ï*)";I.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(pe,"__esModule",{value:!0});var oa=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),la=V,ca=da(la),q=I;function da(t){return t&&t.__esModule?t:{default:t}}function ua(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fa(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ha(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ma=function(t){ha(e,t);function e(a,r){ua(this,e);var i=fa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.substring(1),r));return i.bytes=a.split("").map(function(s){return s.charCodeAt(0)}),i}return oa(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.bytes,i=r.shift()-105,s=q.SET_BY_CODE[i];if(s===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&r.unshift(q.FNC1);var o=e.next(r,1,s);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(i)+o.result+e.getBar((o.checksum+i)%q.MODULO)+e.getBar(q.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var r=this.options.ean128||!1;return typeof r=="string"&&(r=r.toLowerCase()==="true"),r}}],[{key:"getBar",value:function(r){return q.BARS[r]?q.BARS[r].toString():""}},{key:"correctIndex",value:function(r,i){if(i===q.SET_A){var s=r.shift();return s<32?s+64:s-32}else return i===q.SET_B?r.shift()-32:(r.shift()-48)*10+r.shift()-48}},{key:"next",value:function(r,i,s){if(!r.length)return{result:"",checksum:0};var o=void 0,l=void 0;if(r[0]>=200){l=r.shift()-105;var p=q.SWAP[l];p!==void 0?o=e.next(r,i+1,p):((s===q.SET_A||s===q.SET_B)&&l===q.SHIFT&&(r[0]=s===q.SET_A?r[0]>95?r[0]-96:r[0]:r[0]<32?r[0]+96:r[0]),o=e.next(r,i+1,s))}else l=e.correctIndex(r,s),o=e.next(r,i+1,s);var x=e.getBar(l),E=l*i;return{result:x+o.result,checksum:E+o.checksum}}}]),e}(ca.default);pe.default=ma;var gt={};Object.defineProperty(gt,"__esModule",{value:!0});var ne=I,Pr=function(e){return e.match(new RegExp("^"+ne.A_CHARS+"*"))[0].length},Cr=function(e){return e.match(new RegExp("^"+ne.B_CHARS+"*"))[0].length},Ar=function(e){return e.match(new RegExp("^"+ne.C_CHARS+"*"))[0]};function yt(t,e){var a=e?ne.A_CHARS:ne.B_CHARS,r=t.match(new RegExp("^("+a+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(r)return r[1]+"Ì"+Ir(t.substring(r[1].length));var i=t.match(new RegExp("^"+a+"+"))[0];return i.length===t.length?t:i+String.fromCharCode(e?205:206)+yt(t.substring(i.length),!e)}function Ir(t){var e=Ar(t),a=e.length;if(a===t.length)return t;t=t.substring(a);var r=Pr(t)>=Cr(t);return e+String.fromCharCode(r?206:205)+yt(t,r)}gt.default=function(t){var e=void 0,a=Ar(t).length;if(a>=2)e=ne.C_START_CHAR+Ir(t);else{var r=Pr(t)>Cr(t);e=(r?ne.A_START_CHAR:ne.B_START_CHAR)+yt(t,r)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(i,s){return"Ë"+s})};Object.defineProperty(vt,"__esModule",{value:!0});var xa=pe,pa=Tr(xa),va=gt,ga=Tr(va);function Tr(t){return t&&t.__esModule?t:{default:t}}function ya(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ba(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _a=function(t){ba(e,t);function e(a,r){if(ya(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(a))var i=nt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,ga.default)(a),r));else var i=nt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return nt(i)}return e}(pa.default);vt.default=_a;var bt={};Object.defineProperty(bt,"__esModule",{value:!0});var ja=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),wa=pe,Na=Ea(wa),nr=I;function Ea(t){return t&&t.__esModule?t:{default:t}}function Oa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sa(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ka(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var $a=function(t){ka(e,t);function e(a,r){return Oa(this,e),Sa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,nr.A_START_CHAR+a,r))}return ja(e,[{key:"valid",value:function(){return new RegExp("^"+nr.A_CHARS+"+$").test(this.data)}}]),e}(Na.default);bt.default=$a;var _t={};Object.defineProperty(_t,"__esModule",{value:!0});var Pa=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ca=pe,Aa=Ia(Ca),ar=I;function Ia(t){return t&&t.__esModule?t:{default:t}}function Ta(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ma(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ra(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Da=function(t){Ra(e,t);function e(a,r){return Ta(this,e),Ma(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,ar.B_START_CHAR+a,r))}return Pa(e,[{key:"valid",value:function(){return new RegExp("^"+ar.B_CHARS+"+$").test(this.data)}}]),e}(Aa.default);_t.default=Da;var jt={};Object.defineProperty(jt,"__esModule",{value:!0});var Ba=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),La=pe,Fa=Ua(La),ir=I;function Ua(t){return t&&t.__esModule?t:{default:t}}function Ga(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function za(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Va(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ha=function(t){Va(e,t);function e(a,r){return Ga(this,e),za(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,ir.C_START_CHAR+a,r))}return Ba(e,[{key:"valid",value:function(){return new RegExp("^"+ir.C_CHARS+"+$").test(this.data)}}]),e}(Fa.default);jt.default=Ha;Object.defineProperty(K,"__esModule",{value:!0});K.CODE128C=K.CODE128B=K.CODE128A=K.CODE128=void 0;var qa=vt,Xa=He(qa),Wa=bt,Ya=He(Wa),Ja=_t,Qa=He(Ja),Ka=jt,Za=He(Ka);function He(t){return t&&t.__esModule?t:{default:t}}K.CODE128=Xa.default;K.CODE128A=Ya.default;K.CODE128B=Qa.default;K.CODE128C=Za.default;var H={},wt={},Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.SIDE_BIN="101";Y.MIDDLE_BIN="01010";Y.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};Y.EAN2_STRUCTURE=["LL","LG","GL","GG"];Y.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];Y.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var qe={},se={};Object.defineProperty(se,"__esModule",{value:!0});var ei=Y,ti=function(e,a,r){var i=e.split("").map(function(o,l){return ei.BINARIES[a[l]]}).map(function(o,l){return o?o[e[l]]:""});if(r){var s=e.length-1;i=i.map(function(o,l){return l<s?o+r:o})}return i.join("")};se.default=ti;Object.defineProperty(qe,"__esModule",{value:!0});var ri=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),de=Y,ni=se,sr=Mr(ni),ai=V,ii=Mr(ai);function Mr(t){return t&&t.__esModule?t:{default:t}}function si(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function li(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ci=function(t){li(e,t);function e(a,r){si(this,e);var i=oi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.fontSize=!r.flat&&r.fontSize>r.width*10?r.width*10:r.fontSize,i.guardHeight=r.height+i.fontSize/2+r.textMargin,i}return ri(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(r,i){return this.text.substr(r,i)}},{key:"leftEncode",value:function(r,i){return(0,sr.default)(r,i)}},{key:"rightText",value:function(r,i){return this.text.substr(r,i)}},{key:"rightEncode",value:function(r,i){return(0,sr.default)(r,i)}},{key:"encodeGuarded",value:function(){var r={fontSize:this.fontSize},i={height:this.guardHeight};return[{data:de.SIDE_BIN,options:i},{data:this.leftEncode(),text:this.leftText(),options:r},{data:de.MIDDLE_BIN,options:i},{data:this.rightEncode(),text:this.rightText(),options:r},{data:de.SIDE_BIN,options:i}]}},{key:"encodeFlat",value:function(){var r=[de.SIDE_BIN,this.leftEncode(),de.MIDDLE_BIN,this.rightEncode(),de.SIDE_BIN];return{data:r.join(""),text:this.text}}}]),e}(ii.default);qe.default=ci;Object.defineProperty(wt,"__esModule",{value:!0});var di=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ne=function t(e,a,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,a);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,a,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},ui=Y,fi=qe,hi=mi(fi);function mi(t){return t&&t.__esModule?t:{default:t}}function xi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function vi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var or=function(e){var a=e.substr(0,12).split("").map(function(r){return+r}).reduce(function(r,i,s){return s%2?r+i*3:r+i},0);return(10-a%10)%10},gi=function(t){vi(e,t);function e(a,r){xi(this,e),a.search(/^[0-9]{12}$/)!==-1&&(a+=or(a));var i=pi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.lastChar=r.lastChar,i}return di(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===or(this.data)}},{key:"leftText",value:function(){return Ne(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var r=this.data.substr(1,6),i=ui.EAN13_STRUCTURE[this.data[0]];return Ne(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,i)}},{key:"rightText",value:function(){return Ne(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var r=this.data.substr(7,6);return Ne(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRRRR")}},{key:"encodeGuarded",value:function(){var r=Ne(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(r.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(r.push({data:"00"}),r.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),r}}]),e}(hi.default);wt.default=gi;var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});var yi=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Me=function t(e,a,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,a);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,a,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},bi=qe,_i=ji(bi);function ji(t){return t&&t.__esModule?t:{default:t}}function wi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ni(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ei(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var lr=function(e){var a=e.substr(0,7).split("").map(function(r){return+r}).reduce(function(r,i,s){return s%2?r+i:r+i*3},0);return(10-a%10)%10},Oi=function(t){Ei(e,t);function e(a,r){return wi(this,e),a.search(/^[0-9]{7}$/)!==-1&&(a+=lr(a)),Ni(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return yi(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===lr(this.data)}},{key:"leftText",value:function(){return Me(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var r=this.data.substr(0,4);return Me(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,"LLLL")}},{key:"rightText",value:function(){return Me(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var r=this.data.substr(4,4);return Me(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRR")}}]),e}(_i.default);Nt.default=Oi;var Et={};Object.defineProperty(Et,"__esModule",{value:!0});var Si=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ki=Y,$i=se,Pi=Rr($i),Ci=V,Ai=Rr(Ci);function Rr(t){return t&&t.__esModule?t:{default:t}}function Ii(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ti(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Mi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ri=function(e){var a=e.split("").map(function(r){return+r}).reduce(function(r,i,s){return s%2?r+i*9:r+i*3},0);return a%10},Di=function(t){Mi(e,t);function e(a,r){return Ii(this,e),Ti(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Si(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var r=ki.EAN5_STRUCTURE[Ri(this.data)];return{data:"1011"+(0,Pi.default)(this.data,r,"01"),text:this.text}}}]),e}(Ai.default);Et.default=Di;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});var Bi=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Li=Y,Fi=se,Ui=Dr(Fi),Gi=V,zi=Dr(Gi);function Dr(t){return t&&t.__esModule?t:{default:t}}function Vi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function qi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Xi=function(t){qi(e,t);function e(a,r){return Vi(this,e),Hi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Bi(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var r=Li.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,Ui.default)(this.data,r,"01"),text:this.text}}}]),e}(zi.default);Ot.default=Xi;var $e={};Object.defineProperty($e,"__esModule",{value:!0});var Wi=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();$e.checksum=ct;var Yi=se,ue=Br(Yi),Ji=V,Qi=Br(Ji);function Br(t){return t&&t.__esModule?t:{default:t}}function Ki(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function es(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ts=function(t){es(e,t);function e(a,r){Ki(this,e),a.search(/^[0-9]{11}$/)!==-1&&(a+=ct(a));var i=Zi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.displayValue=r.displayValue,r.fontSize>r.width*10?i.fontSize=r.width*10:i.fontSize=r.fontSize,i.guardHeight=r.height+i.fontSize/2+r.textMargin,i}return Wi(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==ct(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=(0,ue.default)(this.data.substr(0,6),"LLLLLL"),r+="01010",r+=(0,ue.default)(this.data.substr(6,6),"RRRRRR"),r+="101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101"+(0,ue.default)(this.data[0],"L"),options:{height:this.guardHeight}}),r.push({data:(0,ue.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),r.push({data:"01010",options:{height:this.guardHeight}}),r.push({data:(0,ue.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),r.push({data:(0,ue.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),r}}]),e}(Qi.default);function ct(t){var e=0,a;for(a=1;a<11;a+=2)e+=parseInt(t[a]);for(a=0;a<11;a+=2)e+=parseInt(t[a])*3;return(10-e%10)%10}$e.default=ts;var St={};Object.defineProperty(St,"__esModule",{value:!0});var rs=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ns=se,as=Lr(ns),is=V,ss=Lr(is),os=$e;function Lr(t){return t&&t.__esModule?t:{default:t}}function ls(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function cs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ds=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],us=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],fs=function(t){cs(e,t);function e(a,r){ls(this,e);var i=at(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));if(i.isValid=!1,a.search(/^[0-9]{6}$/)!==-1)i.middleDigits=a,i.upcA=cr(a,"0"),i.text=r.text||""+i.upcA[0]+a+i.upcA[i.upcA.length-1],i.isValid=!0;else if(a.search(/^[01][0-9]{7}$/)!==-1)if(i.middleDigits=a.substring(1,a.length-1),i.upcA=cr(i.middleDigits,a[0]),i.upcA[i.upcA.length-1]===a[a.length-1])i.isValid=!0;else return at(i);else return at(i);return i.displayValue=r.displayValue,r.fontSize>r.width*10?i.fontSize=r.width*10:i.fontSize=r.fontSize,i.guardHeight=r.height+i.fontSize/2+r.textMargin,i}return rs(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=this.encodeMiddleDigits(),r+="010101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101",options:{height:this.guardHeight}}),r.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),r.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),r}},{key:"encodeMiddleDigits",value:function(){var r=this.upcA[0],i=this.upcA[this.upcA.length-1],s=us[parseInt(i)][parseInt(r)];return(0,as.default)(this.middleDigits,s)}}]),e}(ss.default);function cr(t,e){for(var a=parseInt(t[t.length-1]),r=ds[a],i="",s=0,o=0;o<r.length;o++){var l=r[o];l==="X"?i+=t[s++]:i+=l}return i=""+e+i,""+i+(0,os.checksum)(i)}St.default=fs;Object.defineProperty(H,"__esModule",{value:!0});H.UPCE=H.UPC=H.EAN2=H.EAN5=H.EAN8=H.EAN13=void 0;var hs=wt,ms=ve(hs),xs=Nt,ps=ve(xs),vs=Et,gs=ve(vs),ys=Ot,bs=ve(ys),_s=$e,js=ve(_s),ws=St,Ns=ve(ws);function ve(t){return t&&t.__esModule?t:{default:t}}H.EAN13=ms.default;H.EAN8=ps.default;H.EAN5=gs.default;H.EAN2=bs.default;H.UPC=js.default;H.UPCE=Ns.default;var me={},Xe={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.START_BIN="1010";Pe.END_BIN="11101";Pe.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(Xe,"__esModule",{value:!0});var Es=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Re=Pe,Os=V,Ss=ks(Os);function ks(t){return t&&t.__esModule?t:{default:t}}function $s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ps(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Cs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var As=function(t){Cs(e,t);function e(){return $s(this,e),Ps(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Es(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var r=this,i=this.data.match(/.{2}/g).map(function(s){return r.encodePair(s)}).join("");return{data:Re.START_BIN+i+Re.END_BIN,text:this.text}}},{key:"encodePair",value:function(r){var i=Re.BINARIES[r[1]];return Re.BINARIES[r[0]].split("").map(function(s,o){return(s==="1"?"111":"1")+(i[o]==="1"?"000":"0")}).join("")}}]),e}(Ss.default);Xe.default=As;var kt={};Object.defineProperty(kt,"__esModule",{value:!0});var Is=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ts=Xe,Ms=Rs(Ts);function Rs(t){return t&&t.__esModule?t:{default:t}}function Ds(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bs(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ls(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var dr=function(e){var a=e.substr(0,13).split("").map(function(r){return parseInt(r,10)}).reduce(function(r,i,s){return r+i*(3-s%2*2)},0);return Math.ceil(a/10)*10-a},Fs=function(t){Ls(e,t);function e(a,r){return Ds(this,e),a.search(/^[0-9]{13}$/)!==-1&&(a+=dr(a)),Bs(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Is(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===dr(this.data)}}]),e}(Ms.default);kt.default=Fs;Object.defineProperty(me,"__esModule",{value:!0});me.ITF14=me.ITF=void 0;var Us=Xe,Gs=Fr(Us),zs=kt,Vs=Fr(zs);function Fr(t){return t&&t.__esModule?t:{default:t}}me.ITF=Gs.default;me.ITF14=Vs.default;var W={},oe={};Object.defineProperty(oe,"__esModule",{value:!0});var Hs=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),qs=V,Xs=Ws(qs);function Ws(t){return t&&t.__esModule?t:{default:t}}function Ys(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Js(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Qs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ks=function(t){Qs(e,t);function e(a,r){return Ys(this,e),Js(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Hs(e,[{key:"encode",value:function(){for(var r="110",i=0;i<this.data.length;i++){var s=parseInt(this.data[i]),o=s.toString(2);o=Zs(o,4-o.length);for(var l=0;l<o.length;l++)r+=o[l]=="0"?"100":"110"}return r+="1001",{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(Xs.default);function Zs(t,e){for(var a=0;a<e;a++)t="0"+t;return t}oe.default=Ks;var $t={},le={};Object.defineProperty(le,"__esModule",{value:!0});le.mod10=eo;le.mod11=to;function eo(t){for(var e=0,a=0;a<t.length;a++){var r=parseInt(t[a]);(a+t.length)%2===0?e+=r:e+=r*2%10+Math.floor(r*2/10)}return(10-e%10)%10}function to(t){for(var e=0,a=[2,3,4,5,6,7],r=0;r<t.length;r++){var i=parseInt(t[t.length-1-r]);e+=a[r%a.length]*i}return(11-e%11)%11}Object.defineProperty($t,"__esModule",{value:!0});var ro=oe,no=io(ro),ao=le;function io(t){return t&&t.__esModule?t:{default:t}}function so(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function lo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var co=function(t){lo(e,t);function e(a,r){return so(this,e),oo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a+(0,ao.mod10)(a),r))}return e}(no.default);$t.default=co;var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});var uo=oe,fo=mo(uo),ho=le;function mo(t){return t&&t.__esModule?t:{default:t}}function xo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function po(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function vo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var go=function(t){vo(e,t);function e(a,r){return xo(this,e),po(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a+(0,ho.mod11)(a),r))}return e}(fo.default);Pt.default=go;var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});var yo=oe,bo=_o(yo),ur=le;function _o(t){return t&&t.__esModule?t:{default:t}}function jo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function No(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Eo=function(t){No(e,t);function e(a,r){return jo(this,e),a+=(0,ur.mod10)(a),a+=(0,ur.mod10)(a),wo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return e}(bo.default);Ct.default=Eo;var At={};Object.defineProperty(At,"__esModule",{value:!0});var Oo=oe,So=ko(Oo),fr=le;function ko(t){return t&&t.__esModule?t:{default:t}}function $o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Po(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Co(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ao=function(t){Co(e,t);function e(a,r){return $o(this,e),a+=(0,fr.mod11)(a),a+=(0,fr.mod10)(a),Po(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return e}(So.default);At.default=Ao;Object.defineProperty(W,"__esModule",{value:!0});W.MSI1110=W.MSI1010=W.MSI11=W.MSI10=W.MSI=void 0;var Io=oe,To=Ce(Io),Mo=$t,Ro=Ce(Mo),Do=Pt,Bo=Ce(Do),Lo=Ct,Fo=Ce(Lo),Uo=At,Go=Ce(Uo);function Ce(t){return t&&t.__esModule?t:{default:t}}W.MSI=To.default;W.MSI10=Ro.default;W.MSI11=Bo.default;W.MSI1010=Fo.default;W.MSI1110=Go.default;var We={};Object.defineProperty(We,"__esModule",{value:!0});We.pharmacode=void 0;var zo=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Vo=V,Ho=qo(Vo);function qo(t){return t&&t.__esModule?t:{default:t}}function Xo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Yo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Jo=function(t){Yo(e,t);function e(a,r){Xo(this,e);var i=Wo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.number=parseInt(a,10),i}return zo(e,[{key:"encode",value:function(){for(var r=this.number,i="";!isNaN(r)&&r!=0;)r%2===0?(i="11100"+i,r=(r-2)/2):(i="100"+i,r=(r-1)/2);return i=i.slice(0,-2),{data:i,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(Ho.default);We.pharmacode=Jo;var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.codabar=void 0;var Qo=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ko=V,Zo=el(Ko);function el(t){return t&&t.__esModule?t:{default:t}}function tl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function nl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var al=function(t){nl(e,t);function e(a,r){tl(this,e),a.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(a="A"+a+"A");var i=rl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.toUpperCase(),r));return i.text=i.options.text||i.text.replace(/[A-D]/g,""),i}return Qo(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var r=[],i=this.getEncodings(),s=0;s<this.data.length;s++)r.push(i[this.data.charAt(s)]),s!==this.data.length-1&&r.push("0");return{text:this.text,data:r.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(Zo.default);Ye.codabar=al;var xe={},Je={},Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","ÿ"];Ae.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];Ae.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]};Object.defineProperty(Je,"__esModule",{value:!0});var il=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),De=Ae,sl=V,ol=ll(sl);function ll(t){return t&&t.__esModule?t:{default:t}}function cl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ul(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var fl=function(t){ul(e,t);function e(a,r){return cl(this,e),dl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return il(e,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.data.split("").flatMap(function(l){return De.MULTI_SYMBOLS[l]||l}),i=r.map(function(l){return e.getEncoding(l)}).join(""),s=e.checksum(r,20),o=e.checksum(r.concat(s),15);return{text:this.text,data:e.getEncoding("ÿ")+i+e.getEncoding(s)+e.getEncoding(o)+e.getEncoding("ÿ")+"1"}}}],[{key:"getEncoding",value:function(r){return De.BINARIES[e.symbolValue(r)]}},{key:"getSymbol",value:function(r){return De.SYMBOLS[r]}},{key:"symbolValue",value:function(r){return De.SYMBOLS.indexOf(r)}},{key:"checksum",value:function(r,i){var s=r.slice().reverse().reduce(function(o,l,p){var x=p%i+1;return o+e.symbolValue(l)*x},0);return e.getSymbol(s%47)}}]),e}(ol.default);Je.default=fl;var It={};Object.defineProperty(It,"__esModule",{value:!0});var hl=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ml=Je,xl=pl(ml);function pl(t){return t&&t.__esModule?t:{default:t}}function vl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function yl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var bl=function(t){yl(e,t);function e(a,r){return vl(this,e),gl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return hl(e,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),e}(xl.default);It.default=bl;Object.defineProperty(xe,"__esModule",{value:!0});xe.CODE93FullASCII=xe.CODE93=void 0;var _l=Je,jl=Ur(_l),wl=It,Nl=Ur(wl);function Ur(t){return t&&t.__esModule?t:{default:t}}xe.CODE93=jl.default;xe.CODE93FullASCII=Nl.default;var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.GenericBarcode=void 0;var El=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ol=V,Sl=kl(Ol);function kl(t){return t&&t.__esModule?t:{default:t}}function $l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Cl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Al=function(t){Cl(e,t);function e(a,r){return $l(this,e),Pl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return El(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(Sl.default);Qe.GenericBarcode=Al;Object.defineProperty(pt,"__esModule",{value:!0});var Il=Ve,Be=K,fe=H,hr=me,Ee=W,Tl=We,Ml=Ye,mr=xe,Rl=Qe;pt.default={CODE39:Il.CODE39,CODE128:Be.CODE128,CODE128A:Be.CODE128A,CODE128B:Be.CODE128B,CODE128C:Be.CODE128C,EAN13:fe.EAN13,EAN8:fe.EAN8,EAN5:fe.EAN5,EAN2:fe.EAN2,UPC:fe.UPC,UPCE:fe.UPCE,ITF14:hr.ITF14,ITF:hr.ITF,MSI:Ee.MSI,MSI10:Ee.MSI10,MSI11:Ee.MSI11,MSI1010:Ee.MSI1010,MSI1110:Ee.MSI1110,pharmacode:Tl.pharmacode,codabar:Ml.codabar,CODE93:mr.CODE93,CODE93FullASCII:mr.CODE93FullASCII,GenericBarcode:Rl.GenericBarcode};var ge={};Object.defineProperty(ge,"__esModule",{value:!0});var Dl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};ge.default=function(t,e){return Dl({},t,e)};var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.default=Bl;function Bl(t){var e=[];function a(r){if(Array.isArray(r))for(var i=0;i<r.length;i++)a(r[i]);else r.text=r.text||"",r.data=r.data||"",e.push(r)}return a(t),e}var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.default=Ll;function Ll(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var Rt={},Dt={},Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.default=Fl;function Fl(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var a in e)e.hasOwnProperty(a)&&(a=e[a],typeof t[a]=="string"&&(t[a]=parseInt(t[a],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});var Ul={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};Ze.default=Ul;Object.defineProperty(Dt,"__esModule",{value:!0});var Gl=Ke,zl=Gr(Gl),Vl=Ze,xr=Gr(Vl);function Gr(t){return t&&t.__esModule?t:{default:t}}function Hl(t){var e={};for(var a in xr.default)xr.default.hasOwnProperty(a)&&(t.hasAttribute("jsbarcode-"+a.toLowerCase())&&(e[a]=t.getAttribute("jsbarcode-"+a.toLowerCase())),t.hasAttribute("data-"+a.toLowerCase())&&(e[a]=t.getAttribute("data-"+a.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,zl.default)(e),e}Dt.default=Hl;var Bt={},Lt={},X={};Object.defineProperty(X,"__esModule",{value:!0});X.getTotalWidthOfEncodings=X.calculateEncodingAttributes=X.getBarcodePadding=X.getEncodingHeight=X.getMaximumHeightOfEncodings=void 0;var ql=ge,Xl=Wl(ql);function Wl(t){return t&&t.__esModule?t:{default:t}}function zr(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function Vr(t,e,a){if(a.displayValue&&e<t){if(a.textAlign=="center")return Math.floor((t-e)/2);if(a.textAlign=="left")return 0;if(a.textAlign=="right")return Math.floor(t-e)}return 0}function Yl(t,e,a){for(var r=0;r<t.length;r++){var i=t[r],s=(0,Xl.default)(e,i.options),o;s.displayValue?o=Kl(i.text,s,a):o=0;var l=i.data.length*s.width;i.width=Math.ceil(Math.max(o,l)),i.height=zr(i,s),i.barcodePadding=Vr(o,l,s)}}function Jl(t){for(var e=0,a=0;a<t.length;a++)e+=t[a].width;return e}function Ql(t){for(var e=0,a=0;a<t.length;a++)t[a].height>e&&(e=t[a].height);return e}function Kl(t,e,a){var r;if(a)r=a;else if(typeof document<"u")r=document.createElement("canvas").getContext("2d");else return 0;r.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var i=r.measureText(t);if(!i)return 0;var s=i.width;return s}X.getMaximumHeightOfEncodings=Ql;X.getEncodingHeight=zr;X.getBarcodePadding=Vr;X.calculateEncodingAttributes=Yl;X.getTotalWidthOfEncodings=Jl;Object.defineProperty(Lt,"__esModule",{value:!0});var Zl=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ec=ge,tc=rc(ec),it=X;function rc(t){return t&&t.__esModule?t:{default:t}}function nc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ac=function(){function t(e,a,r){nc(this,t),this.canvas=e,this.encodings=a,this.options=r}return Zl(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var a=0;a<this.encodings.length;a++){var r=(0,tc.default)(this.options,this.encodings[a].options);this.drawCanvasBarcode(r,this.encodings[a]),this.drawCanvasText(r,this.encodings[a]),this.moveCanvasDrawing(this.encodings[a])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var a=this.canvas.getContext("2d");a.save(),(0,it.calculateEncodingAttributes)(this.encodings,this.options,a);var r=(0,it.getTotalWidthOfEncodings)(this.encodings),i=(0,it.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=r+this.options.marginLeft+this.options.marginRight,this.canvas.height=i,a.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(a.fillStyle=this.options.background,a.fillRect(0,0,this.canvas.width,this.canvas.height)),a.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(a,r){var i=this.canvas.getContext("2d"),s=r.data,o;a.textPosition=="top"?o=a.marginTop+a.fontSize+a.textMargin:o=a.marginTop,i.fillStyle=a.lineColor;for(var l=0;l<s.length;l++){var p=l*a.width+r.barcodePadding;s[l]==="1"?i.fillRect(p,o,a.width,a.height):s[l]&&i.fillRect(p,o,a.width,a.height*s[l])}}},{key:"drawCanvasText",value:function(a,r){var i=this.canvas.getContext("2d"),s=a.fontOptions+" "+a.fontSize+"px "+a.font;if(a.displayValue){var o,l;a.textPosition=="top"?l=a.marginTop+a.fontSize-a.textMargin:l=a.height+a.textMargin+a.marginTop+a.fontSize,i.font=s,a.textAlign=="left"||r.barcodePadding>0?(o=0,i.textAlign="left"):a.textAlign=="right"?(o=r.width-1,i.textAlign="right"):(o=r.width/2,i.textAlign="center"),i.fillText(r.text,o,l)}}},{key:"moveCanvasDrawing",value:function(a){var r=this.canvas.getContext("2d");r.translate(a.width,0)}},{key:"restoreCanvas",value:function(){var a=this.canvas.getContext("2d");a.restore()}}]),t}();Lt.default=ac;var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});var ic=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),sc=ge,oc=lc(sc),st=X;function lc(t){return t&&t.__esModule?t:{default:t}}function cc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Le="http://www.w3.org/2000/svg",dc=function(){function t(e,a,r){cc(this,t),this.svg=e,this.encodings=a,this.options=r,this.document=r.xmlDocument||document}return ic(t,[{key:"render",value:function(){var a=this.options.marginLeft;this.prepareSVG();for(var r=0;r<this.encodings.length;r++){var i=this.encodings[r],s=(0,oc.default)(this.options,i.options),o=this.createGroup(a,s.marginTop,this.svg);this.setGroupOptions(o,s),this.drawSvgBarcode(o,s,i),this.drawSVGText(o,s,i),a+=i.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,st.calculateEncodingAttributes)(this.encodings,this.options);var a=(0,st.getTotalWidthOfEncodings)(this.encodings),r=(0,st.getMaximumHeightOfEncodings)(this.encodings),i=a+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(i,r),this.options.background&&this.drawRect(0,0,i,r,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(a,r,i){var s=i.data,o;r.textPosition=="top"?o=r.fontSize+r.textMargin:o=0;for(var l=0,p=0,x=0;x<s.length;x++)p=x*r.width+i.barcodePadding,s[x]==="1"?l++:l>0&&(this.drawRect(p-r.width*l,o,r.width*l,r.height,a),l=0);l>0&&this.drawRect(p-r.width*(l-1),o,r.width*l,r.height,a)}},{key:"drawSVGText",value:function(a,r,i){var s=this.document.createElementNS(Le,"text");if(r.displayValue){var o,l;s.setAttribute("style","font:"+r.fontOptions+" "+r.fontSize+"px "+r.font),r.textPosition=="top"?l=r.fontSize-r.textMargin:l=r.height+r.textMargin+r.fontSize,r.textAlign=="left"||i.barcodePadding>0?(o=0,s.setAttribute("text-anchor","start")):r.textAlign=="right"?(o=i.width-1,s.setAttribute("text-anchor","end")):(o=i.width/2,s.setAttribute("text-anchor","middle")),s.setAttribute("x",o),s.setAttribute("y",l),s.appendChild(this.document.createTextNode(i.text)),a.appendChild(s)}}},{key:"setSvgAttributes",value:function(a,r){var i=this.svg;i.setAttribute("width",a+"px"),i.setAttribute("height",r+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 "+a+" "+r),i.setAttribute("xmlns",Le),i.setAttribute("version","1.1"),i.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(a,r,i){var s=this.document.createElementNS(Le,"g");return s.setAttribute("transform","translate("+a+", "+r+")"),i.appendChild(s),s}},{key:"setGroupOptions",value:function(a,r){a.setAttribute("style","fill:"+r.lineColor+";")}},{key:"drawRect",value:function(a,r,i,s,o){var l=this.document.createElementNS(Le,"rect");return l.setAttribute("x",a),l.setAttribute("y",r),l.setAttribute("width",i),l.setAttribute("height",s),o.appendChild(l),l}}]),t}();Ft.default=dc;var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});var uc=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();function fc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var hc=function(){function t(e,a,r){fc(this,t),this.object=e,this.encodings=a,this.options=r}return uc(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();Ut.default=hc;Object.defineProperty(Bt,"__esModule",{value:!0});var mc=Lt,xc=Gt(mc),pc=Ft,vc=Gt(pc),gc=Ut,yc=Gt(gc);function Gt(t){return t&&t.__esModule?t:{default:t}}Bt.default={CanvasRenderer:xc.default,SVGRenderer:vc.default,ObjectRenderer:yc.default};var ye={};Object.defineProperty(ye,"__esModule",{value:!0});function zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ht(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var bc=function(t){Ht(e,t);function e(a,r){zt(this,e);var i=Vt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="InvalidInputException",i.symbology=a,i.input=r,i.message='"'+i.input+'" is not a valid input for '+i.symbology,i}return e}(Error),_c=function(t){Ht(e,t);function e(){zt(this,e);var a=Vt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="InvalidElementException",a.message="Not supported type to render on",a}return e}(Error),jc=function(t){Ht(e,t);function e(){zt(this,e);var a=Vt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="NoElementException",a.message="No element to render on.",a}return e}(Error);ye.InvalidInputException=bc;ye.InvalidElementException=_c;ye.NoElementException=jc;Object.defineProperty(Rt,"__esModule",{value:!0});var wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc=Dt,dt=Hr(Nc),Ec=Bt,Oe=Hr(Ec),Oc=ye;function Hr(t){return t&&t.__esModule?t:{default:t}}function qt(t){if(typeof t=="string")return Sc(t);if(Array.isArray(t)){for(var e=[],a=0;a<t.length;a++)e.push(qt(t[a]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return kc(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,dt.default)(t),renderer:Oe.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,dt.default)(t),renderer:Oe.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:Oe.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":wc(t))==="object"&&!t.nodeName)return{element:t,renderer:Oe.default.ObjectRenderer};throw new Oc.InvalidElementException}}function Sc(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var a=[],r=0;r<e.length;r++)a.push(qt(e[r]));return a}}function kc(t){var e=document.createElement("canvas");return{element:e,options:(0,dt.default)(t),renderer:Oe.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}Rt.default=qt;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});var $c=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();function Pc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Cc=function(){function t(e){Pc(this,t),this.api=e}return $c(t,[{key:"handleCatch",value:function(a){if(a.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw a.message;else throw a;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(a){try{var r=a.apply(void 0,arguments);return this.api._options.valid(!0),r}catch(i){return this.handleCatch(i),this.api}}}]),t}();Xt.default=Cc;var Ac=pt,ie=ae(Ac),Ic=ge,Ie=ae(Ic),Tc=Tt,qr=ae(Tc),Mc=Mt,pr=ae(Mc),Rc=Rt,Dc=ae(Rc),Bc=Ke,Lc=ae(Bc),Fc=Xt,Uc=ae(Fc),Xr=ye,Gc=Ze,Wr=ae(Gc);function ae(t){return t&&t.__esModule?t:{default:t}}var ee=function(){},et=function(e,a,r){var i=new ee;if(typeof e>"u")throw Error("No element to render on was provided.");return i._renderProperties=(0,Dc.default)(e),i._encodings=[],i._options=Wr.default,i._errorHandler=new Uc.default(i),typeof a<"u"&&(r=r||{},r.format||(r.format=Jr()),i.options(r)[r.format](a,r).render()),i};et.getModule=function(t){return ie.default[t]};for(var vr in ie.default)ie.default.hasOwnProperty(vr)&&zc(ie.default,vr);function zc(t,e){ee.prototype[e]=ee.prototype[e.toUpperCase()]=ee.prototype[e.toLowerCase()]=function(a,r){var i=this;return i._errorHandler.wrapBarcodeCall(function(){r.text=typeof r.text>"u"?void 0:""+r.text;var s=(0,Ie.default)(i._options,r);s=(0,Lc.default)(s);var o=t[e],l=Yr(a,o,s);return i._encodings.push(l),i})}}function Yr(t,e,a){t=""+t;var r=new e(t,a);if(!r.valid())throw new Xr.InvalidInputException(r.constructor.name,t);var i=r.encode();i=(0,qr.default)(i);for(var s=0;s<i.length;s++)i[s].options=(0,Ie.default)(a,i[s].options);return i}function Jr(){return ie.default.CODE128?"CODE128":Object.keys(ie.default)[0]}ee.prototype.options=function(t){return this._options=(0,Ie.default)(this._options,t),this};ee.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};ee.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var a=(0,Ie.default)(this._options,t.options);a.format=="auto"&&(a.format=Jr()),this._errorHandler.wrapBarcodeCall(function(){var r=a.value,i=ie.default[a.format.toUpperCase()],s=Yr(r,i,a);ut(t,s,a)})}}};ee.prototype.render=function(){if(!this._renderProperties)throw new Xr.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)ut(this._renderProperties[t],this._encodings,this._options);else ut(this._renderProperties,this._encodings,this._options);return this};ee.prototype._defaults=Wr.default;function ut(t,e,a){e=(0,qr.default)(e);for(var r=0;r<e.length;r++)e[r].options=(0,Ie.default)(a,e[r].options),(0,pr.default)(e[r].options);(0,pr.default)(a);var i=t.renderer,s=new i(t.element,e,a);s.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=et);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var a=[];return jQuery(this).each(function(){a.push(this)}),et(a,t,e)});var Vc=et;const Qr=en(Vc),Hc=({product:t,barcodeValue:e,format:a="CODE128",onClose:r})=>{const i=v.useRef(null),[s,o]=v.useState(!1),[l,p]=v.useState(a),[x,E]=v.useState(e||(t==null?void 0:t.barcode)||""),d=[{value:"CODE128",label:"CODE128 (Recommended)"},{value:"CODE39",label:"CODE39"},{value:"EAN13",label:"EAN-13"},{value:"EAN8",label:"EAN-8"},{value:"UPC",label:"UPC-A"},{value:"ITF14",label:"ITF-14"},{value:"MSI",label:"MSI"},{value:"pharmacode",label:"Pharmacode"},{value:"codabar",label:"Codabar"}];v.useEffect(()=>{N()},[x,l]);const N=()=>{if(!(!i.current||!x))try{Qr(i.current,x,{format:l,width:2,height:100,displayValue:!0,fontSize:16,margin:10,background:"#ffffff",lineColor:"#000000"})}catch{z.error(`Invalid barcode format for ${l}. Please try a different format.`)}},y=()=>{if(!i.current)return;const _=i.current.toDataURL("image/png"),$=document.createElement("a");$.download=`barcode-${x}.png`,$.href=_,$.click(),z.success("Barcode downloaded successfully")},k=()=>{x&&navigator.clipboard.writeText(x).then(()=>{o(!0),z.success("Barcode copied to clipboard"),setTimeout(()=>o(!1),2e3)}).catch(()=>{z.error("Failed to copy barcode")})},T=()=>{if(!i.current)return;const c=i.current,_=window.open("","_blank");_.document.write(`
      <html>
        <head>
          <title>Barcode Print</title>
          <style>
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              min-height: 100vh;
            }
            img {
              max-width: 100%;
              height: auto;
            }
          </style>
        </head>
        <body>
          <img src="${c.toDataURL("image/png")}" alt="Barcode" />
          <script>
            window.onload = function() {
              window.print();
            };
          <\/script>
        </body>
      </html>
    `),_.document.close()},S=()=>{const c=Math.floor(1e12+Math.random()*9e12);E(c.toString())};return!t&&!e?n.jsx("div",{className:"p-4 text-center text-gray-500",children:n.jsx("p",{children:"No product or barcode value provided"})}):n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Nr,{className:"h-5 w-5 text-primary-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t?`Barcode for ${t.name}`:"Generate Barcode"})]}),r&&n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(te,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode Value"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",value:x,onChange:c=>E(c.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter barcode value"}),n.jsx("button",{onClick:S,className:"px-3 py-2 text-sm text-primary-600 hover:text-primary-700 border border-primary-300 rounded-md hover:bg-primary-50 transition-colors",children:"Generate Random"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode Format"}),n.jsx("select",{value:l,onChange:c=>p(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:d.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]}),n.jsx("div",{className:"flex justify-center p-4 bg-gray-50 rounded-lg",children:n.jsx("canvas",{ref:i,className:"max-w-full"})}),n.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-4 border-t",children:[n.jsxs("button",{onClick:k,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[s?n.jsx(In,{className:"h-4 w-4"}):n.jsx(Dn,{className:"h-4 w-4"}),n.jsx("span",{children:s?"Copied!":"Copy Value"})]}),n.jsxs("button",{onClick:y,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[n.jsx(he,{className:"h-4 w-4"}),n.jsx("span",{children:"Download"})]}),n.jsxs("button",{onClick:T,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[n.jsx(Ue,{className:"h-4 w-4"}),n.jsx("span",{children:"Print"})]})]})]})]})},qc=({products:t=[],onClose:e,initialLabelSize:a="standard"})=>{const[r,i]=v.useState([]),[s,o]=v.useState(a),[l,p]=v.useState("CODE128"),[x,E]=v.useState(!1),[d,N]=v.useState(!0),[y,k]=v.useState(2);v.useRef(null),v.useEffect(()=>{t.length>0&&i(t.map(m=>m._id||m.id))},[t]);const T=m=>{i(M=>M.includes(m)?M.filter(f=>f!==m):[...M,m])},S=()=>{i(t.map(m=>m._id||m.id))},c=()=>{i([])},_=(m,M)=>{const f=document.createElement("canvas");try{return Qr(f,m,{format:M,width:s==="small"?1.5:s==="large"?3:2,height:s==="small"?60:s==="large"?120:80,displayValue:!0,fontSize:s==="small"?12:s==="large"?18:14,margin:5,background:"#ffffff",lineColor:"#000000"}),f}catch{return null}},$=()=>{if(r.length===0){z.error("Please select at least one product");return}const m=t.filter(j=>r.includes(j._id||j.id)),M=window.open("","_blank"),f=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Barcode Labels</title>
          <style>
            @media print {
              @page {
                size: A4;
                margin: 10mm;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 20px;
            }
            .labels-container {
              display: grid;
              grid-template-columns: repeat(${y}, 1fr);
              gap: 10px;
              width: 100%;
            }
            .label {
              border: 1px solid #ddd;
              padding: 10px;
              text-align: center;
              page-break-inside: avoid;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              min-height: ${s==="small"?"80px":s==="large"?"150px":"120px"};
            }
            .label-name {
              font-size: ${s==="small"?"10px":s==="large"?"16px":"12px"};
              font-weight: bold;
              margin-bottom: 5px;
              word-wrap: break-word;
            }
            .label-price {
              font-size: ${s==="small"?"9px":s==="large"?"14px":"11px"};
              color: #666;
              margin-top: 5px;
            }
            .barcode-container {
              margin: 5px 0;
            }
          </style>
        </head>
        <body>
          <div class="labels-container">
            ${m.map(j=>{var D;const O=j.barcode||j.sku||j._id||j.id;if(!O)return"";const P=_(O,l);if(!P)return"";const F=P.toDataURL("image/png");return`
                <div class="label">
                  ${d?`<div class="label-name">${j.name||"Product"}</div>`:""}
                  <div class="barcode-container">
                    <img src="${F}" alt="Barcode" />
                  </div>
                  ${x&&((D=j.pricing)!=null&&D.retail)?`<div class="label-price">$${j.pricing.retail.toFixed(2)}</div>`:""}
                </div>
              `}).join("")}
          </div>
          <script>
            window.onload = function() {
              window.print();
            };
          <\/script>
        </body>
      </html>
    `;M.document.write(f),M.document.close(),z.success(`Printing ${m.length} label(s)`)},L=()=>{if(r.length===0){z.error("Please select at least one product");return}const m=t.filter(j=>r.includes(j._id||j.id)),M=window.open("","_blank"),f=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Barcode Labels</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 20px;
            }
            .labels-container {
              display: grid;
              grid-template-columns: repeat(${y}, 1fr);
              gap: 10px;
              width: 100%;
            }
            .label {
              border: 1px solid #ddd;
              padding: 10px;
              text-align: center;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              min-height: ${s==="small"?"80px":s==="large"?"150px":"120px"};
            }
            .label-name {
              font-size: ${s==="small"?"10px":s==="large"?"16px":"12px"};
              font-weight: bold;
              margin-bottom: 5px;
              word-wrap: break-word;
            }
            .label-price {
              font-size: ${s==="small"?"9px":s==="large"?"14px":"11px"};
              color: #666;
              margin-top: 5px;
            }
            .barcode-container {
              margin: 5px 0;
            }
          </style>
        </head>
        <body>
          <div class="labels-container">
            ${m.map(j=>{var D;const O=j.barcode||j.sku||j._id||j.id;if(!O)return"";const P=_(O,l);if(!P)return"";const F=P.toDataURL("image/png");return`
                <div class="label">
                  ${d?`<div class="label-name">${j.name||"Product"}</div>`:""}
                  <div class="barcode-container">
                    <img src="${F}" alt="Barcode" />
                  </div>
                  ${x&&((D=j.pricing)!=null&&D.retail)?`<div class="label-price">$${j.pricing.retail.toFixed(2)}</div>`:""}
                </div>
              `}).join("")}
          </div>
        </body>
      </html>
    `;M.document.write(f),M.document.close(),z.success("Labels ready for download/print")};return n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-75 flex items-center justify-center p-4",children:n.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ue,{className:"h-5 w-5 text-primary-600"}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Print Barcode Labels"})]}),e&&n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(te,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[n.jsx("div",{className:"lg:col-span-1 space-y-4",children:n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx(tn,{className:"h-4 w-4 text-gray-600"}),n.jsx("h3",{className:"font-medium text-gray-900",children:"Label Settings"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label Size"}),n.jsxs("select",{value:s,onChange:m=>o(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"small",children:"Small"}),n.jsx("option",{value:"standard",children:"Standard"}),n.jsx("option",{value:"large",children:"Large"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode Format"}),n.jsxs("select",{value:l,onChange:m=>p(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"CODE128",children:"CODE128"}),n.jsx("option",{value:"CODE39",children:"CODE39"}),n.jsx("option",{value:"EAN13",children:"EAN-13"}),n.jsx("option",{value:"EAN8",children:"EAN-8"}),n.jsx("option",{value:"UPC",children:"UPC-A"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labels Per Row"}),n.jsxs("select",{value:y,onChange:m=>k(Number(m.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"1",children:"1"}),n.jsx("option",{value:"2",children:"2"}),n.jsx("option",{value:"3",children:"3"}),n.jsx("option",{value:"4",children:"4"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:d,onChange:m=>N(m.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Include Product Name"})]}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:x,onChange:m=>E(m.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Include Price"})]})]})]})]})}),n.jsxs("div",{className:"lg:col-span-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"font-medium text-gray-900",children:["Select Products (",r.length," of ",t.length,")"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:S,className:"text-sm text-primary-600 hover:text-primary-700",children:"Select All"}),n.jsx("span",{className:"text-gray-300",children:"|"}),n.jsx("button",{onClick:c,className:"text-sm text-gray-600 hover:text-gray-700",children:"Deselect All"})]})]}),n.jsx("div",{className:"border rounded-lg max-h-96 overflow-y-auto",children:t.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(ke,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),n.jsx("p",{children:"No products available"})]}):n.jsx("div",{className:"divide-y",children:t.map(m=>{const M=r.includes(m._id||m.id),f=!!(m.barcode||m.sku);return n.jsxs("label",{className:`flex items-center p-3 cursor-pointer hover:bg-gray-50 ${M?"bg-primary-50":""}`,children:[n.jsx("input",{type:"checkbox",checked:M,onChange:()=>T(m._id||m.id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),n.jsxs("div",{className:"ml-3 flex-1",children:[n.jsx("div",{className:"font-medium text-gray-900",children:m.name}),n.jsx("div",{className:"text-sm text-gray-500",children:f?n.jsx("span",{className:"font-mono",children:m.barcode||m.sku}):n.jsx("span",{className:"text-yellow-600",children:"No barcode"})})]})]},m._id||m.id)})})})]})]})}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 border-t bg-gray-50",children:[e&&n.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:L,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[n.jsx(he,{className:"h-4 w-4"}),n.jsx("span",{children:"Preview"})]}),n.jsxs("button",{onClick:$,disabled:r.length===0,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[n.jsx(Ue,{className:"h-4 w-4"}),n.jsx("span",{children:"Print Labels"})]})]})]})})},Xc=({errors:t={},title:e="Please fix the following errors:",showCount:a=!0,collapsible:r=!0,className:i="",onFieldClick:s=null})=>{const[o,l]=rn.useState(!0),p=Object.entries(t).filter(([E,d])=>d!=null),x=p.length;return x===0?null:n.jsx("div",{className:`bg-red-50 border border-red-200 rounded-lg p-4 ${i}`,children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(ze,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5 mr-3"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h3",{className:"text-sm font-medium text-red-800",children:[e,a&&n.jsxs("span",{className:"ml-2 text-red-600",children:["(",x," ",x===1?"error":"errors",")"]})]}),r&&n.jsx("button",{onClick:()=>l(!o),className:"text-red-600 hover:text-red-800","aria-label":o?"Collapse":"Expand",children:o?n.jsx(mt,{className:"h-4 w-4"}):n.jsx(xt,{className:"h-4 w-4"})})]}),o&&n.jsx("ul",{className:"list-disc list-inside space-y-1",children:p.map(([E,d])=>n.jsxs("li",{className:`text-sm text-red-700 ${s?"cursor-pointer hover:text-red-900 hover:underline":""}`,onClick:()=>s==null?void 0:s(E),children:[n.jsxs("span",{className:"font-medium capitalize",children:[E.replace(/([A-Z])/g," $1").trim(),":"]})," ",d]},E))})]})]})})},Wc=({product:t,isOpen:e,onClose:a,onSave:r,isSubmitting:i,allProducts:s=[],onEditExisting:o,categories:l=[]})=>{const[p,x]=v.useState({name:"",description:"",category:"",status:"active",expiryDate:"",pricing:{cost:"",retail:"",wholesale:""},inventory:{currentStock:"",reorderPoint:""}}),[E,d]=v.useState(!1),[N,y]=v.useState([]),[k,T]=v.useState(null),[S,c]=v.useState({}),_=v.useCallback(f=>{const{name:j,value:O,type:P,checked:F}=f.target;let D=P==="checkbox"?F:O;if(j.includes(".")){const[u,h]=j.split(".");x(b=>({...b,[u]:{...b[u],[h]:D}}))}else x(u=>({...u,[j]:D}));if(j==="name"&&O.length>2&&!t){const u=s.find(h=>h.name.toLowerCase()===O.toLowerCase());if(u)T(u),d(!1),y([]);else{T(null);const h=s.filter(b=>b.name.toLowerCase().includes(O.toLowerCase())).slice(0,3);h.length>0?(y(h),d(!0)):(d(!1),y([]))}}else j==="name"&&(d(!1),y([]),T(null));c(u=>u[j]?{...u,[j]:null}:u)},[t,s]),$=v.useCallback(f=>{const{name:j,value:O}=f.target;j==="name"&&(!O||O.trim()==="")?c(P=>({...P,[j]:"Product name is required"})):j==="name"&&O.length<2?c(P=>({...P,[j]:"Product name must be at least 2 characters"})):c(P=>({...P,[j]:null}))},[]),L=v.useCallback(()=>{const f={};return!p.name||p.name.trim()===""?f.name="Product name is required":p.name.length<2&&(f.name="Product name must be at least 2 characters"),c(f),Object.keys(f).length===0},[p.name]),m=v.useCallback((f={})=>{var O,P,F,D,u;let j="";if(f.expiryDate){const h=new Date(f.expiryDate);isNaN(h.getTime())||(j=h.toISOString().split("T")[0])}x({name:f.name||"",description:f.description||"",category:f.category||"",status:f.status||"active",expiryDate:j,barcode:f.barcode||"",sku:f.sku||"",brand:f.brand||"",pricing:{cost:((O=f.pricing)==null?void 0:O.cost)||"",retail:((P=f.pricing)==null?void 0:P.retail)||"",wholesale:((F=f.pricing)==null?void 0:F.wholesale)||""},inventory:{currentStock:((D=f.inventory)==null?void 0:D.currentStock)||"",reorderPoint:((u=f.inventory)==null?void 0:u.reorderPoint)||""}}),c({})},[]);v.useEffect(()=>{m(t||{})},[t,m]),v.useEffect(()=>{e&&setTimeout(()=>{const f=document.querySelector('input[name="name"]');f&&f.focus()},100)},[e]);const M=f=>{if(f.preventDefault(),!L()){const O=Object.keys(S).find(P=>S[P]);O&&setTimeout(()=>{const P=document.querySelector(`[name="${O}"], #${O}`);P&&(P.focus(),P.scrollIntoView({behavior:"smooth",block:"center"}))},100);return}r(p),a()};return e?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:a}),n.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:n.jsxs("form",{onSubmit:M,children:[n.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:t?"Edit Product":"Add New Product"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{id:"name",name:"name",type:"text",value:p.name||"",onChange:_,onBlur:$,placeholder:"Enter product name",className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${S.name?"border-red-300":"border-gray-300"}`,autoComplete:"off"}),S.name&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.name}),k&&n.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-red-800",children:"⚠️ This product already exists!"}),n.jsxs("p",{className:"text-xs text-red-600 mt-1",children:['Product: "',k.name,'"']})]}),n.jsx("button",{type:"button",onClick:()=>{a(),setTimeout(()=>{o&&o(k)},100)},className:"text-red-600 hover:text-red-800 underline text-xs font-medium",children:"Edit Existing"})]})}),E&&N.length>0&&n.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Similar existing products:"}),n.jsx("ul",{className:"space-y-1",children:N.map((f,j)=>n.jsxs("li",{className:"flex items-center justify-between text-sm text-blue-700",children:[n.jsxs("span",{children:["• ",f.name]}),n.jsx("button",{type:"button",onClick:()=>{a(),setTimeout(()=>{o&&o(f)},100)},className:"text-blue-600 hover:text-blue-800 underline text-xs",children:"Edit"})]},j))}),n.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Choose a unique name to avoid duplicates, or edit an existing product."})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product name must be unique - no duplicates allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{id:"category",name:"category",value:p.category||"",onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[n.jsx("option",{value:"",children:"Select a category"}),l==null?void 0:l.map(f=>n.jsx("option",{value:f._id,children:f.name},f._id))]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional product category"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",value:p.description||"",onChange:_,onBlur:$,placeholder:"Enter product description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional description of the product"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{id:"status",name:"status",value:p.status||"active",onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive (Disabled)"}),n.jsx("option",{value:"discontinued",children:"Discontinued"})]}),n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[p.status==="active"&&"Product is active and available for sale",p.status==="inactive"&&"Product is disabled and hidden from sales",p.status==="discontinued"&&"Product is discontinued and no longer available"]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pricing.cost",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price"}),n.jsx("input",{id:"pricing.cost",name:"pricing.cost",type:"number",step:"0.01",value:p.pricing.cost||"",onChange:_,onBlur:$,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product cost"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pricing.retail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Retail Price"}),n.jsx("input",{id:"pricing.retail",name:"pricing.retail",type:"number",step:"0.01",value:p.pricing.retail||"",onChange:_,onBlur:$,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Retail selling price"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pricing.wholesale",className:"block text-sm font-medium text-gray-700 mb-1",children:"Wholesale Price"}),n.jsx("input",{id:"pricing.wholesale",name:"pricing.wholesale",type:"number",step:"0.01",value:p.pricing.wholesale||"",onChange:_,onBlur:$,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Wholesale selling price"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"inventory.currentStock",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock"}),n.jsx("input",{id:"inventory.currentStock",name:"inventory.currentStock",type:"number",value:p.inventory.currentStock||"",onChange:_,onBlur:$,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Current inventory quantity"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"inventory.reorderPoint",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Point"}),n.jsx("input",{id:"inventory.reorderPoint",name:"inventory.reorderPoint",type:"number",value:p.inventory.reorderPoint||"",onChange:_,onBlur:$,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Minimum stock level for reordering"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"expiryDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{id:"expiryDate",name:"expiryDate",type:"date",value:p.expiryDate||"",onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional expiry date for the product. Leave empty if product does not expire."})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"barcode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{id:"barcode",name:"barcode",type:"text",value:p.barcode||"",onChange:_,placeholder:"Enter or scan barcode",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("button",{type:"button",onClick:()=>{window.scanBarcode&&window.scanBarcode(f=>{_({target:{name:"barcode",value:f}})})},className:"px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",title:"Scan barcode",children:n.jsx(wr,{className:"h-4 w-4 text-gray-600"})})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product barcode for scanning"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),n.jsx("input",{id:"sku",name:"sku",type:"text",value:p.sku||"",onChange:_,placeholder:"Enter SKU",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Stock Keeping Unit"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),n.jsx("input",{id:"brand",name:"brand",type:"text",value:p.brand||"",onChange:_,placeholder:"Enter brand name",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product brand name"})]})]}),Object.keys(S).some(f=>S[f])&&n.jsx(Xc,{errors:S,title:"Please fix the following errors before submitting:",onFieldClick:f=>{const j=document.querySelector(`[name="${f}"], #${f}`);j&&(j.focus(),j.scrollIntoView({behavior:"smooth",block:"center"}))}})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[n.jsx(Se,{type:"submit",isLoading:i,disabled:!p.name||i||Object.keys(S).some(f=>S[f]),className:"btn btn-primary btn-md w-full sm:w-auto sm:ml-3 disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Update Product":"Create Product"}),n.jsx("button",{type:"button",onClick:a,disabled:i,className:"btn btn-secondary btn-md w-full sm:w-auto mt-3 sm:mt-0 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},Yc=({product:t,isOpen:e,onClose:a,onSave:r})=>{const[i,s]=v.useState([]),[o,l]=v.useState(""),[p,x]=v.useState(30),{data:E,isLoading:d}=Mn({},{skip:!e,refetchOnMountOrArgChange:!0}),N=v.useMemo(()=>{var c;return((c=E==null?void 0:E.data)==null?void 0:c.investors)||(E==null?void 0:E.investors)||E||[]},[E]);v.useEffect(()=>{if(t&&e){const c=(t.investors||[]).map(_=>{var $,L;return{investorId:(($=_.investor)==null?void 0:$._id)||_.investor,investorName:((L=_.investor)==null?void 0:L.name)||"Unknown",sharePercentage:_.sharePercentage||30}});s(c)}},[t,e]);const y=()=>{if(!o){z.error("Please select an investor");return}const c=N.find(_=>_._id===o);if(c){if(i.some(_=>_.investorId===o)){z.error("This investor is already linked to this product");return}s([...i,{investorId:o,investorName:c.name,sharePercentage:p}]),l(""),x(30)}},k=c=>{s(i.filter(_=>_.investorId!==c))},T=(c,_)=>{s(i.map($=>$.investorId===c?{...$,sharePercentage:parseFloat(_)||0}:$))},S=()=>{if(i.length===0){z.error("Please add at least one investor");return}const c=i.map(_=>({investor:_.investorId,sharePercentage:_.sharePercentage}));r(t._id,c)};return e?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:a}),n.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[n.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Manage Investors - ",t==null?void 0:t.name]}),n.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:n.jsx(te,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Add Investor"}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsx("div",{className:"col-span-2",children:n.jsxs("select",{value:o,onChange:c=>l(c.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[n.jsx("option",{value:"",children:d?"Loading investors...":"Select Investor"}),!d&&N.length===0?n.jsx("option",{value:"",disabled:!0,children:"No investors available. Create one from the Investors page."}):N.map(c=>n.jsx("option",{value:c._id,children:c.name},c._id))]})}),n.jsxs("div",{className:"col-span-1 flex gap-2",children:[n.jsx("input",{type:"number",min:"0",max:"100",value:p,onChange:c=>x(parseFloat(c.target.value)||0),placeholder:"%",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"}),n.jsx("button",{type:"button",onClick:y,className:"btn btn-primary px-4",children:"Add"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Set the profit share percentage for this product. This determines what % of profit goes to investors (split among all linked investors), with the remainder going to the company."})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:["Linked Investors (",i.length,")"]}),i.length===0?n.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No investors linked. Add investors above."}):n.jsx("div",{className:"space-y-2",children:i.map(c=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm font-medium text-gray-900",children:c.investorName})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"0",max:"100",value:c.sharePercentage,onChange:_=>T(c.investorId,_.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm"}),n.jsx("span",{className:"text-sm text-gray-600",children:"%"})]}),n.jsx("button",{onClick:()=>k(c.investorId),className:"text-red-600 hover:text-red-800",children:n.jsx(te,{className:"h-4 w-4"})})]})]},c.investorId))})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[n.jsx("button",{type:"button",onClick:S,className:"btn btn-primary btn-md w-full sm:w-auto sm:ml-3",children:"Save Investors"}),n.jsx("button",{type:"button",onClick:a,className:"btn btn-secondary btn-md w-full sm:w-auto mt-3 sm:mt-0",children:"Cancel"})]})]})]})}):null},gr=({checked:t,onChange:e,disabled:a=!1,className:r="",...i})=>n.jsx("input",{type:"checkbox",checked:t,onChange:s=>e==null?void 0:e(s.target.checked),disabled:a,className:`h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded ${r}`,...i}),yr=t=>{var e,a;return((e=t.inventory)==null?void 0:e.currentStock)<=((a=t.inventory)==null?void 0:a.reorderPoint)},Jc=t=>{if(!t.expiryDate)return null;const e=new Date(t.expiryDate),a=new Date;a.setHours(0,0,0,0),e.setHours(0,0,0,0);const r=e-a,i=Math.ceil(r/(1e3*60*60*24));return i<0?{status:"expired",days:Math.abs(i)}:i<=7?{status:"expiring_soon",days:i}:{status:"valid",days:i}},Qc=({products:t,searchTerm:e,bulkOps:a,onEdit:r,onDelete:i,onManageInvestors:s,onGenerateBarcode:o})=>t.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ke,{className:"mx-auto h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No products found"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e?"Try adjusting your search terms.":"Get started by adding a new product."})]}):n.jsx("div",{className:"card w-full",children:n.jsxs("div",{className:"card-content p-0 w-full",children:[n.jsx("div",{className:"bg-gray-50 px-8 py-6 border-b border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[n.jsx("div",{className:"col-span-1",children:n.jsx(gr,{checked:a.isSelectAll,onChange:()=>a.toggleSelectAll(t)})}),n.jsxs("div",{className:"col-span-4",children:[n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Product Name"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Description"})]}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Stock"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Cost"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Retail"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Wholesale"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Category"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Status"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Actions"})})]})}),n.jsx("div",{className:"divide-y divide-gray-200",children:t.map(l=>{var p,x,E,d,N;return n.jsx("div",{className:"px-8 py-6 hover:bg-gray-50",children:n.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[n.jsx("div",{className:"col-span-1",children:n.jsx(gr,{checked:a.isSelected(l._id),onChange:()=>a.toggleSelection(l._id)})}),n.jsx("div",{className:"col-span-4",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(ke,{className:"h-6 w-6 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-base font-medium text-gray-900",children:l.name}),l.expiryDate&&(()=>{const y=Jc(l);return(y==null?void 0:y.status)==="expired"?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",title:`Expired ${y.days} day${y.days>1?"s":""} ago`,children:"Expired"}):(y==null?void 0:y.status)==="expiring_soon"?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",title:`Expires in ${y.days} day${y.days>1?"s":""}`,children:"Expires Soon"}):y?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",title:`Expires in ${y.days} day${y.days>1?"s":""}`,children:new Date(l.expiryDate).toLocaleDateString()}):null})()]}),n.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",l._id]}),n.jsx("p",{className:"text-sm text-gray-500",children:l.description||"No description"}),l.expiryDate&&n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Expiry: ",new Date(l.expiryDate).toLocaleDateString()]})]})]})}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("p",{className:`text-sm font-medium ${yr(l)?"text-danger-600":"text-gray-600"}`,children:((p=l.inventory)==null?void 0:p.currentStock)||0}),yr(l)&&n.jsx("p",{className:"text-xs text-danger-600",children:"Low Stock"})]}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:Math.round(((x=l.pricing)==null?void 0:x.cost)||0)})}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:Math.round(((E=l.pricing)==null?void 0:E.retail)||0)})}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:Math.round(((d=l.pricing)==null?void 0:d.wholesale)||0)})}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:((N=l.category)==null?void 0:N.name)||"-"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("span",{className:`badge ${l.status==="active"?"badge-success":"badge-gray"}`,children:l.status})}),n.jsxs("div",{className:"col-span-1",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:()=>o(l),className:"text-green-600 hover:text-green-800",title:"Generate Barcode",children:n.jsx(Nr,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>s(l),className:"text-blue-600 hover:text-blue-800",title:"Manage Investors",children:n.jsx(br,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>r(l),className:"text-primary-600 hover:text-primary-800",title:"Edit Product",children:n.jsx(_r,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>i(l),className:"text-danger-600 hover:text-danger-800",title:"Delete Product",children:n.jsx(jr,{className:"h-5 w-5"})})]}),l.hasInvestors&&n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mt-2",children:"Has Investors"})]})]})},l._id)})})]})}),Kc=(t,e)=>{const a=ft(),[r,i]=v.useState(null),[s,o]=v.useState(!1),[l,p]=v.useState(null),[x,E]=v.useState(!1),[d,{isLoading:N}]=mn(),[y,{isLoading:k}]=xn(),[T]=pn(),[S,{isLoading:c}]=vn(),[_]=gn(),[$]=yn();return{selectedProduct:r,isModalOpen:s,selectedProductForInvestors:l,isInvestorsModalOpen:x,creating:N,updating:k,deleting:c,setSelectedProduct:i,setIsModalOpen:o,setSelectedProductForInvestors:p,setIsInvestorsModalOpen:E,handleEdit:u=>{i(u),o(!0)},handleEditExisting:u=>{i(u),o(!0)},handleCloseModal:()=>{o(!1),i(null)},handleSave:u=>{var A;let h=null;if(u.expiryDate&&u.expiryDate.trim()!==""){const w=new Date(u.expiryDate);isNaN(w.getTime())||(h=w.toISOString())}const b={...u,status:u.status||"active",expiryDate:h,pricing:{cost:parseFloat(u.pricing.cost)||0,retail:parseFloat(u.pricing.retail)||0,wholesale:parseFloat(u.pricing.wholesale)||0},inventory:{currentStock:parseInt(u.inventory.currentStock)||0,reorderPoint:parseInt(u.inventory.reorderPoint)||10}};if(!r){const w=(A=u.name)==null?void 0:A.trim().toLowerCase().replace(/\s+/g," ");if(t==null?void 0:t.find(B=>{var R;return((R=B.name)==null?void 0:R.trim().toLowerCase().replace(/\s+/g," "))===w})){Fe(`A product named "${u.name}" already exists. Please choose a different name.`);return}}r?y({id:r._id,...b}).unwrap().then(()=>{J("Product updated successfully"),e()}).catch(w=>{var g,B,U;((g=w==null?void 0:w.data)==null?void 0:g.code)==="DUPLICATE_PRODUCT_NAME"||(U=(B=w==null?void 0:w.data)==null?void 0:B.message)!=null&&U.includes("already exists")?Fe("A product with this name already exists. Please choose a different name."):Q(w,"Product Update")}):d(b).unwrap().then(()=>{J("Product created successfully"),e()}).catch(w=>{var g,B,U;((g=w==null?void 0:w.data)==null?void 0:g.code)==="DUPLICATE_PRODUCT_NAME"||(U=(B=w==null?void 0:w.data)==null?void 0:B.message)!=null&&U.includes("already exists")?Fe("A product with this name already exists. Please choose a different name or edit the existing product."):Q(w,"Product Creation")})},handleDelete:(u,h)=>{h(u.name,"Product",async()=>{try{await S(u._id).unwrap(),J("Product deleted successfully"),e()}catch(b){Q(b,"Product Deletion")}})},handleBulkUpdate:async(u,h)=>{const b=h.getSelectedItems();if(b.length===0)return;const A=b.map(w=>w._id);await h.executeBulkOperation("update",u);try{await _({productIds:A,updates:u}).unwrap(),J(`Successfully updated ${b.length} products`),e()}catch(w){Q(w,"Bulk Update")}},handleBulkDelete:async u=>{const h=u.getSelectedItems();if(h.length===0||!window.confirm(`Are you sure you want to delete ${h.length} products? This action cannot be undone.`))return;const b=h.map(A=>A._id);try{await $({productIds:b}).unwrap(),J(`Successfully deleted ${h.length} products`),u.deselectAll(),e()}catch(A){Q(A,"Bulk Delete")}},handleBulkExport:u=>{const h=u.getSelectedItems();if(h.length===0)return;const b=["Name","Description","SKU","Stock","Cost","Retail","Wholesale","Category","Status"],A=h.map(R=>{var G,Z,be,_e,je;return[R.name||"",R.description||"",R.sku||"",((G=R.inventory)==null?void 0:G.currentStock)||0,((Z=R.pricing)==null?void 0:Z.cost)||0,((be=R.pricing)==null?void 0:be.retail)||0,((_e=R.pricing)==null?void 0:_e.wholesale)||0,((je=R.category)==null?void 0:je.name)||"",R.status||""]}),w=[b,...A].map(R=>R.map(G=>`"${G}"`).join(",")).join(`
`),g=new Blob([w],{type:"text/csv"}),B=window.URL.createObjectURL(g),U=document.createElement("a");U.href=B,U.download=`products_export_${new Date().toISOString().split("T")[0]}.csv`,U.click(),window.URL.revokeObjectURL(B),J(`Exported ${h.length} products`)},handleLinkInvestors:async(u,h)=>{try{return await T({productId:u,investors:h}).unwrap(),z.success("Investors linked successfully!"),a(lt.util.invalidateTags([{type:"Products",id:"LIST"}])),E(!1),p(null),{success:!0}}catch(b){return Q(b,"Link Investors"),{success:!1,error:b}}}}},Sd=()=>{var Z,be,_e,je,Wt,Yt,Jt,Qt;const t=ft(),[e,a]=v.useState(""),[r,i]=v.useState({}),[s,o]=v.useState(null),[l,p]=v.useState(!1),[x,E]=v.useState(!1),[d,N]=v.useState(!1),[y,k]=v.useState(!1),[T,S]=v.useState(!1),[c,_]=v.useState(null),{openTab:$}=nn(),L={search:e,limit:999999,...r},{data:m,isLoading:M,error:f,refetch:j}=bn(L,{refetchOnMountOrArgChange:!0}),{data:O}=an(void 0,{refetchOnMountOrArgChange:!0}),P=v.useMemo(()=>{var C,ce,re;return O?Array.isArray(O)?O:(C=O==null?void 0:O.data)!=null&&C.categories?O.data.categories:O!=null&&O.categories?O.categories:(re=(ce=O==null?void 0:O.data)==null?void 0:ce.data)!=null&&re.categories?O.data.data.categories:[]:[]},[O]),F=v.useMemo(()=>{var C,ce,re;return m?Array.isArray(m)?m:(C=m==null?void 0:m.data)!=null&&C.products?m.data.products:m!=null&&m.products?m.products:(re=(ce=m==null?void 0:m.data)==null?void 0:ce.data)!=null&&re.products?m.data.data.products:m!=null&&m.items?m.items:[]:[]},[m]),D=_n(F,e,["name","description","brand","category.name"],{threshold:.4,minScore:.3,limit:null}),u=Un(D,{idField:"_id",enableUndo:!0}),{confirmation:h,confirmDelete:b,handleConfirm:A,handleCancel:w}=wn(),g=Kc(F,j),B=()=>{t(lt.util.invalidateTags([{type:"Categories",id:"LIST"}])),z.success("Categories refreshed")},U=C=>{i(C)},R=()=>{i({}),a("")},G=async C=>{await g.handleBulkUpdate(C,u),p(!1),o(null)};if(M&&!m)return n.jsx(sn,{message:"Loading products..."});if(f&&!m){let C="Unable to load products. Please try again.";if((be=(Z=f==null?void 0:f.response)==null?void 0:Z.data)!=null&&be.errors){const re=f.response.data.errors.map(Te=>{const Kt=Te.param||Te.field||"",Zt=Te.msg||Te.message||"Invalid value";return Kt?`${Kt}: ${Zt}`:Zt});C=re.length>0?re.join(", "):f.response.data.message||"Invalid request parameters"}else(je=(_e=f==null?void 0:f.response)==null?void 0:_e.data)!=null&&je.details?C=Array.isArray(f.response.data.details)?f.response.data.details.join(", "):f.response.data.details:(Yt=(Wt=f==null?void 0:f.response)==null?void 0:Wt.data)!=null&&Yt.message?C=f.response.data.message:f!=null&&f.message&&(C=f.message);return n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ze,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to Load Products"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:C}),n.jsxs("button",{onClick:()=>j(),className:"btn btn-primary btn-md",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),n.jsx("p",{className:"text-gray-600",children:"Manage your product catalog"})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{const C=on("/categories");C&&$({title:"Add Product Category",path:"/categories?action=add",component:C.component,icon:C.icon,allowMultiple:!0,props:{action:"add"}})},className:"btn btn-outline btn-md w-full sm:w-auto",children:[n.jsx(ht,{className:"h-4 w-4 mr-2"}),"Add Product Category"]}),n.jsxs("button",{onClick:B,className:"btn btn-outline btn-md w-full sm:w-auto",title:"Refresh categories list",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Refresh Categories"]}),n.jsxs("button",{onClick:()=>E(!0),className:"btn btn-outline btn-md w-full sm:w-auto",title:"Scan barcode to search product",children:[n.jsx(wr,{className:"h-4 w-4 mr-2"}),"Scan Barcode"]}),n.jsxs("button",{onClick:()=>k(!0),className:"btn btn-outline btn-md w-full sm:w-auto",title:"Print barcode labels",children:[n.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Print Labels"]}),n.jsxs("button",{onClick:()=>g.setIsModalOpen(!0),className:"btn btn-primary btn-md w-full sm:w-auto",children:[n.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products...",value:e,onChange:C=>a(C.target.value),className:"input pl-10"})]})}),n.jsx(Ln,{onImportComplete:()=>{t(lt.util.invalidateTags([{type:"Products",id:"LIST"}]))},filters:L}),n.jsx(Fn,{filters:r,onFiltersChange:U,onClearFilters:R,categories:P||[]}),n.jsx(Gn,{selectedCount:u.selectedCount,isOperationInProgress:u.isOperationInProgress,operationProgress:u.operationProgress,canUndo:u.canUndo,onBulkUpdate:()=>{o("update"),p(!0)},onBulkDelete:()=>g.handleBulkDelete(u),onBulkExport:()=>g.handleBulkExport(u),onBulkStatusChange:()=>{o("status"),p(!0)},onBulkCategoryChange:()=>{o("category"),p(!0)},onBulkPriceUpdate:()=>{o("price"),p(!0)},onBulkStockAdjust:()=>{o("stock"),p(!0)},onUndo:u.undoLastOperation,onClearSelection:u.deselectAll,availableActions:["update","delete","export","status","category","price","stock"]}),n.jsx(zn,{isOpen:l,onClose:()=>{p(!1),o(null)},selectedCount:u.selectedCount,updateType:s,onConfirm:G,categories:P||[],statusOptions:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"discontinued",label:"Discontinued"}],isLoading:u.isOperationInProgress}),n.jsx(Qc,{products:D,searchTerm:e,bulkOps:u,onEdit:g.handleEdit,onDelete:C=>g.handleDelete(C,b),onManageInvestors:C=>{g.setSelectedProductForInvestors(C),g.setIsInvestorsModalOpen(!0)},onGenerateBarcode:C=>{g.setSelectedProduct(C),N(!0)}}),n.jsx(Wc,{product:g.selectedProduct,isOpen:g.isModalOpen,onClose:g.handleCloseModal,onSave:g.handleSave,isSubmitting:g.creating||g.updating,allProducts:D||[],onEditExisting:g.handleEditExisting,categories:P||[]}),n.jsx(jn,{isOpen:h.isOpen,onClose:w,onConfirm:A,itemName:((Qt=(Jt=h.message)==null?void 0:Jt.match(/"([^"]*)"/))==null?void 0:Qt[1])||"",itemType:"Product",isLoading:g.deleting}),g.selectedProductForInvestors&&n.jsx(Yc,{product:g.selectedProductForInvestors,isOpen:g.isInvestorsModalOpen,onClose:()=>{g.setIsInvestorsModalOpen(!1),g.setSelectedProductForInvestors(null)},onSave:g.handleLinkInvestors}),n.jsx(An,{isOpen:x,onClose:()=>E(!1),onScan:C=>{a(C),i({barcode:C}),E(!1),z.success(`Searching for barcode: ${C}`)},scanMode:"both"}),d&&g.selectedProduct&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-75 flex items-center justify-center p-4",children:n.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full",children:n.jsx(Hc,{product:g.selectedProduct,barcodeValue:g.selectedProduct.barcode,onClose:()=>{N(!1),g.setSelectedProduct(null)}})})}),y&&n.jsx(qc,{products:D||[],onClose:()=>k(!1)}),T&&c&&n.jsx(Tn,{entityType:c.type,entityId:c.id,entityName:c.name,onClose:()=>{S(!1),_(null)}})]})};export{Sd as default};
