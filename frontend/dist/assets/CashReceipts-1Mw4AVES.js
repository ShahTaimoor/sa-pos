import{r as o,ba as Ie,bb as Ke,d as Je,R as ye,bc as We,bd as He,be as Ye,bf as Xe,bg as Ze,bh as et,bi as tt,bj as st,p as e,S as Y,aH as at,s as nt,w as Q,x as fe,y as U,A as X,B as G,z as I}from"./index-QHzcgHe1.js";import{u as rt}from"./suppliersApi-TtAmQji1.js";import{P as lt}from"./PrintModal-C-XpLZIw.js";import{D as it}from"./download-ULFDWFy_.js";import{P as ct}from"./plus-wthIFHeq.js";import{S as ot}from"./save-CQRiczmt.js";import{F as dt}from"./filter-DkEczEi5.js";import{P as mt}from"./printer-Dmqc0NC_.js";import{E as xt}from"./eye-D8xIUmp0.js";import{P as ut}from"./pen-square-D_ZZfkE6.js";import{T as ht}from"./trash-2-G7GOGhVq.js";import"./useCompanyInfo-CJ-A3-l8.js";import"./settingsApi-D-e2N-LC.js";const Z=(C=new Date)=>{const g=C.getFullYear(),K=String(C.getMonth()+1).padStart(2,"0"),m=String(C.getDate()).padStart(2,"0");return`${g}-${K}-${m}`},Rt=()=>{var xe,ue,he,pe,ge;const C=Z(),[g,K]=o.useState({fromDate:C,toDate:C,voucherCode:"",amount:"",particular:""}),[m,L]=o.useState({page:1,limit:50}),[ee,Ne]=o.useState({key:"date",direction:"desc"}),[ve,$]=o.useState(!1),[we,J]=o.useState(!1),[Ce,te]=o.useState(!1),[b,k]=o.useState(null),[V,se]=o.useState(null),[h,j]=o.useState(null),[x,R]=o.useState(null),[S,y]=o.useState(""),[M,f]=o.useState(""),[z,P]=o.useState(-1),[q,B]=o.useState(-1),[u,A]=o.useState("customer"),[n,d]=o.useState({date:C,amount:"",particular:"",customer:"",supplier:"",notes:""}),{data:c,isLoading:ke,error:ae,refetch:F}=Ie({...g,...m,sortConfig:ee},{refetchOnMountOrArgChange:!0}),[Se]=Ke(),{data:p,isLoading:ne,error:pt,refetch:re}=Je({search:"",limit:100},{refetchOnMountOrArgChange:!0}),N=ye.useMemo(()=>{var t;return((t=p==null?void 0:p.data)==null?void 0:t.customers)||(p==null?void 0:p.customers)||p||[]},[p]),{data:v,isLoading:gt,error:bt,refetch:le}=rt({search:"",limit:100},{refetchOnMountOrArgChange:!0}),D=ye.useMemo(()=>{var t;return((t=v==null?void 0:v.data)==null?void 0:t.suppliers)||(v==null?void 0:v.suppliers)||v||[]},[v]);o.useEffect(()=>{if(h!=null&&h._id&&N&&N.length>0){const t=N.find(s=>s._id===h._id);if(t){const s=h.pendingBalance||0,a=h.advanceBalance||0,r=t.pendingBalance||0,i=t.advanceBalance||0;(s!==r||a!==i)&&j(t)}}},[p,h==null?void 0:h._id]);const[Me,{isLoading:ie}]=We(),[Pe,{isLoading:ce}]=He(),[Be,{isLoading:jt}]=Ye(),[Ee]=Xe(),[Le]=Ze(),[Re]=et(),[_e]=tt(),[Ae]=st(),_=()=>{d({date:Z(),amount:"",particular:"",customer:"",supplier:"",notes:""}),j(null),R(null),y(""),f(""),P(-1),B(-1),A("customer")},W=o.useRef(null),oe=t=>{const s=N==null?void 0:N.find(a=>a._id===t);s&&j(s),d(a=>({...a,customer:t})),W.current&&clearTimeout(W.current),W.current=setTimeout(async()=>{var a;try{const{data:r}=await Se(t),i=((a=r==null?void 0:r.data)==null?void 0:a.customer)||(r==null?void 0:r.customer)||(r==null?void 0:r.data)||r;i&&(j(l=>(l==null?void 0:l._id)===t?i:l),queryClient.setQueryData(["customers",{search:"",limit:100}],l=>{var be;if(!l)return l;const w=(((be=l==null?void 0:l.data)==null?void 0:be.customers)||(l==null?void 0:l.customers)||(l==null?void 0:l.data)||[]).map(je=>je._id===t?i:je);return{...l,data:{...l.data,customers:w},customers:w}}))}catch{}},200)},Fe=t=>{y(t),P(-1),t===""&&(j(null),d(s=>({...s,customer:""})))},De=t=>{const s=(N||[]).filter(a=>(a.businessName||a.name||"").toLowerCase().includes(S.toLowerCase())||(a.phone||"").includes(S));if(!(!S||s.length===0))switch(t.key){case"ArrowDown":t.preventDefault(),P(a=>a<s.length-1?a+1:0);break;case"ArrowUp":t.preventDefault(),P(a=>a>0?a-1:s.length-1);break;case"Enter":if(t.preventDefault(),z>=0&&z<s.length){const a=s[z];oe(a._id),y(a.businessName||a.name||""),P(-1)}break;case"Escape":t.preventDefault(),y(""),P(-1);break}},de=t=>{const s=D==null?void 0:D.find(a=>a._id===t);R(s),d(a=>({...a,supplier:t,customer:""})),j(null),y("")},Te=t=>{f(t),B(-1),t===""&&(R(null),d(s=>({...s,supplier:""})))},Oe=t=>{const s=(D||[]).filter(a=>(a.companyName||a.name||"").toLowerCase().includes(M.toLowerCase())||(a.phone||"").includes(M));if(!(!M||s.length===0))switch(t.key){case"ArrowDown":t.preventDefault(),B(a=>a<s.length-1?a+1:0);break;case"ArrowUp":t.preventDefault(),B(a=>a>0?a-1:s.length-1);break;case"Enter":if(t.preventDefault(),q>=0&&q<s.length){const a=s[q];de(a._id),f(a.companyName||a.name||""),B(-1)}break;case"Escape":t.preventDefault(),f(""),B(-1);break}},T=(t,s)=>{K(a=>({...a,[t]:s})),L(a=>({...a,page:1}))},H=t=>{Ne(s=>({key:t,direction:s.key===t&&s.direction==="asc"?"desc":"asc"}))},Ue=()=>{const t={date:n.date||Z(),amount:parseFloat(n.amount)||0,particular:n.particular||void 0,notes:n.notes||void 0,paymentMethod:"cash"};u==="customer"&&n.customer?t.customer=n.customer:u==="supplier"&&n.supplier&&(t.supplier=n.supplier),Me(t).unwrap().then(()=>{_(),G("Cash receipt created successfully"),F(),u==="customer"&&n.customer?re():u==="supplier"&&n.supplier&&le()}).catch(s=>{I(U(s))})},$e=()=>{const t={date:n.date,amount:parseFloat(n.amount)||0,particular:n.particular||void 0,notes:n.notes||void 0};u==="customer"&&n.customer?t.customer=n.customer:u==="supplier"&&n.supplier&&(t.supplier=n.supplier),Pe({id:b._id,...t}).unwrap().then(()=>{$(!1),k(null),_(),G("Cash receipt updated successfully"),F(),u==="customer"&&n.customer?re():u==="supplier"&&n.supplier&&le()}).catch(s=>{I(U(s))})},Ve=t=>{window.confirm("Are you sure you want to delete this cash receipt?")&&Be(t).unwrap().then(()=>{G("Cash receipt deleted successfully"),F()}).catch(s=>{I(U(s))})},ze=t=>{var s,a,r,i;k(t),d({date:t.date?t.date.split("T")[0]:"",amount:t.amount||"",particular:t.particular||"",customer:((s=t.customer)==null?void 0:s._id)||"",supplier:((a=t.supplier)==null?void 0:a._id)||"",notes:t.notes||""}),(r=t.supplier)!=null&&r._id?(A("supplier"),R(t.supplier),f(t.supplier.companyName||t.supplier.name||""),j(null),y("")):(i=t.customer)!=null&&i._id&&(A("customer"),j(t.customer),y(t.customer.businessName||t.customer.name||""),R(null),f("")),$(!0)},qe=t=>{k(t),J(!0)},Qe=async(t="csv")=>{try{const s={...g,...m,sortConfig:ee};let a;t==="excel"?a=await Ee(s).unwrap():t==="pdf"?a=await Re(s).unwrap():t==="json"?a=await _e(s).unwrap():a=await Le(s).unwrap();const r=(a==null?void 0:a.filename)||(t==="excel"?"cash_receipts.xlsx":t==="pdf"?"cash_receipts.pdf":t==="json"?"cash_receipts.json":"cash_receipts.csv"),i=await Ae(r).unwrap(),l=i instanceof Blob?i:new Blob([i],{type:t==="excel"?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":t==="pdf"?"application/pdf":t==="json"?"application/json":"text/csv"}),O=URL.createObjectURL(l),w=document.createElement("a");w.href=O,w.download=r,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(O),G(`Exported cash receipts as ${t.toUpperCase()}`)}catch(s){I(U(s,"Cash Receipts Export"))}},Ge=t=>{const s={invoiceNumber:t.voucherCode,orderNumber:t.voucherCode,createdAt:t.date,invoiceDate:t.date,customer:t.customer||null,customerInfo:t.customer||null,supplier:t.supplier||null,pricing:{subtotal:t.amount||0,total:t.amount||0,discountAmount:0,taxAmount:0},total:t.amount||0,subtotal:t.amount||0,items:[],payment:{method:"Cash",status:"Paid",amountPaid:t.amount||0},notes:t.notes||t.particular||""};se(s),te(!0)},me=((xe=c==null?void 0:c.data)==null?void 0:xe.cashReceipts)||(c==null?void 0:c.cashReceipts)||((ue=c==null?void 0:c.data)==null?void 0:ue.receipts)||(c==null?void 0:c.receipts)||[],E=((he=c==null?void 0:c.data)==null?void 0:he.pagination)||(c==null?void 0:c.pagination)||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cash Receipts"}),e.jsx("p",{className:"text-gray-600",children:"Manage and view all cash receipt transactions"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:Qe,className:"btn btn-secondary flex items-center space-x-2",children:[e.jsx(it,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:_,className:"btn btn-primary btn-md",children:[e.jsx(ct,{className:"h-4 w-4 mr-2"}),"New Receipt"]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Receipt Details"})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"customer",checked:u==="customer",onChange:t=>{A(t.target.value),R(null),f(""),d(s=>({...s,supplier:""}))},className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Customer"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"supplier",checked:u==="supplier",onChange:t=>{A(t.target.value),j(null),y(""),d(s=>({...s,customer:""}))},className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Supplier"})]})]})]}),u==="customer"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:S,onChange:t=>Fe(t.target.value),onKeyDown:De,className:"input w-full pr-10",placeholder:"Search or select customer..."}),e.jsx(Y,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),S&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg",children:(N||[]).filter(t=>(t.businessName||t.name||"").toLowerCase().includes(S.toLowerCase())||(t.phone||"").includes(S)).map((t,s)=>{const a=t.pendingBalance||0,r=t.advanceBalance||0,i=a-r,l=i<0,O=a>0||r>0;return e.jsxs("div",{onClick:()=>{oe(t._id),y(t.businessName||t.name||""),P(-1)},className:`px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 ${z===s?"bg-blue-50":""}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.businessName||t.name||"Unknown"}),O&&e.jsxs("div",{className:`text-sm ${l?"text-red-600":"text-green-600"}`,children:[l?"Payables:":"Receivables:"," $",Math.abs(i).toFixed(2)]})]},t._id)})})]}),h&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Balance"}),e.jsx("div",{className:"space-y-1",children:(()=>{const t=h.pendingBalance||0,s=h.advanceBalance||0,a=t-s,r=a<0,i=a>0;return t>0||s>0?e.jsxs("div",{className:`flex items-center justify-between px-3 py-2 rounded ${r?"bg-red-50 border border-red-200":i?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[e.jsx("span",{className:`text-sm font-medium ${r?"text-red-700":i?"text-green-700":"text-gray-700"}`,children:r?"Payables:":i?"Receivables:":"Balance:"}),e.jsx("span",{className:`text-sm font-bold ${r?"text-red-700":i?"text-green-700":"text-gray-700"}`,children:Math.abs(a).toFixed(2)})]}):e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded text-sm text-gray-600 text-center",children:"No balance"})})()})]}),u==="supplier"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:M,onChange:t=>Te(t.target.value),onKeyDown:Oe,className:"input w-full pr-10",placeholder:"Search or select supplier..."}),e.jsx(Y,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),M&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg",children:(D||[]).filter(t=>(t.companyName||t.name||"").toLowerCase().includes(M.toLowerCase())||(t.phone||"").includes(M)).map((t,s)=>e.jsxs("div",{onClick:()=>{de(t._id),f(t.companyName||t.name||""),B(-1)},className:`px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 ${q===s?"bg-blue-50":""}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.companyName||t.name||"Unknown"}),t.phone&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Phone: ",t.phone]})]},t._id))})]}),u==="supplier"&&x&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Balance"}),e.jsxs("div",{className:"space-y-1",children:[x.pendingBalance>0&&e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-red-50 border border-red-200 rounded",children:[e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Payables:"}),e.jsx("span",{className:"text-sm font-bold text-red-700",children:x.pendingBalance.toFixed(2)})]}),x.advanceBalance>0&&e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-green-50 border border-green-200 rounded",children:[e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Advance:"}),e.jsx("span",{className:"text-sm font-bold text-green-700",children:x.advanceBalance.toFixed(2)})]}),x.pendingBalance===0&&x.advanceBalance===0&&e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded text-sm text-gray-600 text-center",children:"No balance"}),x.pendingBalance>0&&x.advanceBalance>0&&e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-50 border-2 border-blue-300 rounded",children:[e.jsx("span",{className:"text-sm font-bold text-blue-700",children:"Net Balance:"}),e.jsx("span",{className:`text-sm font-bold ${x.pendingBalance-x.advanceBalance>0?"text-red-700":"text-green-700"}`,children:(x.pendingBalance-x.advanceBalance).toFixed(2)})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:n.amount,onChange:t=>{const s=t.target.value===""?"":parseFloat(t.target.value)||"";d(a=>({...a,amount:s}))},className:"input w-full",placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:n.date,onChange:t=>d(s=>({...s,date:t.target.value})),className:"input w-full pr-10"}),e.jsx(at,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("input",{type:"text",value:n.particular,onChange:t=>d(s=>({...s,particular:t.target.value})),className:"input w-full",placeholder:"Enter receipt description..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:n.notes,onChange:t=>d(s=>({...s,notes:t.target.value})),className:"input w-full h-20 resize-none",placeholder:"Additional notes..."})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:_,className:"btn btn-secondary flex items-center space-x-2",children:[e.jsx(nt,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset"})]}),e.jsxs("button",{onClick:Ue,disabled:ie,className:"btn btn-primary flex items-center space-x-2",children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx("span",{children:ie?"Saving...":"Save Receipt"})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"h-5 w-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters"})]})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:g.fromDate,onChange:t=>T("fromDate",t.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:g.toDate,onChange:t=>T("toDate",t.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voucher Code"}),e.jsx("input",{type:"text",placeholder:"Contains...",value:g.voucherCode,onChange:t=>T("voucherCode",t.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsx("input",{type:"number",placeholder:"Equals...",value:g.amount,onChange:t=>T("amount",t.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Particular"}),e.jsx("input",{type:"text",placeholder:"Contains...",value:g.particular,onChange:t=>T("particular",t.target.value),className:"input"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:()=>F(),className:"btn btn-primary w-full flex items-center justify-center space-x-2",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{children:"Search"})]})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Cash Receipts From: ",Q(g.fromDate)," To: ",Q(g.toDate)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[E.totalItems||0," records"]}),e.jsx("button",{onClick:()=>F(),className:"p-2 text-gray-400 hover:text-gray-600",title:"Refresh",children:e.jsx(fe,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"card-content p-0",children:ke?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(fe,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading cash receipts..."})]}):ae?e.jsx("div",{className:"p-8 text-center text-red-600",children:e.jsxs("p",{children:["Error loading cash receipts: ",U(ae).message]})}):me.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:e.jsx("p",{children:"No cash receipts found for the selected criteria."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>H("date"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Date"}),e.jsx(X,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>H("voucherCode"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Voucher Code"}),e.jsx(X,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>H("amount"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Amount"}),e.jsx(X,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Particular"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:me.map((t,s)=>e.jsxs("tr",{className:s%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q(t.date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.voucherCode}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Math.round(t.amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.customer?t.customer.name:"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:t.particular}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Ge(t),className:"text-green-600 hover:text-green-900",title:"Print",children:e.jsx(mt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>qe(t),className:"text-blue-600 hover:text-blue-900",title:"View",children:e.jsx(xt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ze(t),className:"text-indigo-600 hover:text-indigo-900",title:"Edit",children:e.jsx(ut,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Ve(t._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(ht,{className:"h-4 w-4"})})]})})]},t._id))})]})}),E.totalPages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>L(t=>({...t,page:t.page-1})),disabled:m.page===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>L(t=>({...t,page:t.page+1})),disabled:m.page===E.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(m.page-1)*m.limit+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(m.page*m.limit,E.totalItems)})," ","of"," ",e.jsx("span",{className:"font-medium",children:E.totalItems})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>L(t=>({...t,page:t.page-1})),disabled:m.page===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:Math.min(5,E.totalPages)},(t,s)=>{const a=s+1;return e.jsx("button",{onClick:()=>L(r=>({...r,page:a})),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${m.page===a?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:a},a)}),e.jsx("button",{onClick:()=>L(t=>({...t,page:t.page+1})),disabled:m.page===E.totalPages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})]})})]}),!1,ve&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Cash Receipt"}),e.jsx("button",{onClick:()=>{$(!1),k(null),_()},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:n.date,onChange:t=>d(s=>({...s,date:t.target.value})),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:n.amount,onChange:t=>{const s=t.target.value===""?"":parseFloat(t.target.value)||"";d(a=>({...a,amount:s}))},className:"input w-full",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Particular"}),e.jsx("textarea",{value:n.particular,onChange:t=>d(s=>({...s,particular:t.target.value})),className:"input w-full",rows:"3",placeholder:"Enter transaction details...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer (Optional)"}),e.jsxs("select",{value:n.customer,onChange:t=>d(s=>({...s,customer:t.target.value})),className:"input w-full",disabled:ne,children:[e.jsx("option",{value:"",children:ne?"Loading customers...":"Select Customer"}),p==null?void 0:p.map(t=>e.jsxs("option",{value:t._id,children:[t.name," ",t.phone?`(${t.phone})`:""]},t._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:n.notes,onChange:t=>d(s=>({...s,notes:t.target.value})),className:"input w-full",rows:"2",placeholder:"Additional notes..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>{$(!1),k(null),_()},className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:$e,disabled:ce,className:"btn btn-primary",children:ce?"Updating...":"Update"})]})]})})}),we&&b&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cash Receipt Details"}),e.jsx("button",{onClick:()=>{J(!1),k(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Voucher Code"}),e.jsx("p",{className:"text-sm text-gray-900",children:b.voucherCode})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:Q(b.date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),e.jsx("p",{className:"text-sm text-gray-900",children:Math.round(b.amount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Particular"}),e.jsx("p",{className:"text-sm text-gray-900",children:b.particular})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:b.paymentMethod.replace("_"," ")})]}),b.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-900",children:b.notes})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[(pe=b.createdBy)==null?void 0:pe.firstName," ",(ge=b.createdBy)==null?void 0:ge.lastName]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>{J(!1),k(null)},className:"btn btn-secondary",children:"Close"})})]})})}),e.jsx(lt,{isOpen:Ce,onClose:()=>{te(!1),se(null)},orderData:V,documentTitle:"Cash Receipt",partyLabel:V!=null&&V.supplier?"Supplier":"Customer"})]})};export{Rt as default};
