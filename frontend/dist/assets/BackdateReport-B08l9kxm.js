import{r as p,p as e,ap as w,q as c,w as g}from"./index-DaTQeIrM.js";import{c as k}from"./reportsApi-sHFwC3Ov.js";const B=()=>{var m,h,u;const[l,j]=p.useState("all"),[n,y]=p.useState("all"),{data:d,isLoading:f,error:r,refetch:x}=k(),t=(d==null?void 0:d.data)||d,o=(r==null?void 0:r.message)||((m=r==null?void 0:r.data)==null?void 0:m.message)||(r?"Failed to fetch report data":null),b=s=>{switch(s){case"Backdate":return"bg-red-100 text-red-800 border-red-200";case"Future Date":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Recent Entry":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=s=>{switch(s){case"Sales":return"bg-green-100 text-green-800";case"Purchase":return"bg-blue-100 text-blue-800";case"Sales Order":return"bg-purple-100 text-purple-800";case"Purchase Order":return"bg-indigo-100 text-indigo-800";case"Cash Receipt":return"bg-emerald-100 text-emerald-800";case"Cash Payment":return"bg-orange-100 text-orange-800";case"Bank Receipt":return"bg-teal-100 text-teal-800";case"Bank Payment":return"bg-rose-100 text-rose-800";default:return"bg-gray-100 text-gray-800"}},i=((h=t==null?void 0:t.entries)==null?void 0:h.filter(s=>{const a=l==="all"||s.dateType===l,v=n==="all"||s.type===n;return a&&v}))||[];return f?e.jsx(w,{message:"Loading backdate report..."}):o?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Report"}),e.jsx("p",{className:"text-gray-600 mb-4",children:o}),e.jsx("button",{onClick:()=>x(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Retry"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Backdate & Future Date Report"}),e.jsx("p",{className:"text-gray-600",children:"Entries with dates significantly different from their creation date"})]}),(t==null?void 0:t.summary)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Entries"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.summary.totalEntries})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Backdated"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.summary.backdateEntries})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Future Dates"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.summary.futureEntries})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c(t.summary.totalAmount)})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Type"}),e.jsxs("select",{value:l,onChange:s=>j(s.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"Backdate",children:"Backdated"}),e.jsx("option",{value:"Future Date",children:"Future Dates"}),e.jsx("option",{value:"Recent Entry",children:"Recent Entries"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Type"}),e.jsxs("select",{value:n,onChange:s=>y(s.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"Sales",children:"Sales"}),e.jsx("option",{value:"Purchase",children:"Purchase"}),e.jsx("option",{value:"Sales Order",children:"Sales Orders"}),e.jsx("option",{value:"Purchase Order",children:"Purchase Orders"}),e.jsx("option",{value:"Cash Receipt",children:"Cash Receipts"}),e.jsx("option",{value:"Cash Payment",children:"Cash Payments"}),e.jsx("option",{value:"Bank Receipt",children:"Bank Receipts"}),e.jsx("option",{value:"Bank Payment",children:"Bank Payments"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>x(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Refresh"})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Entries (",i.length,")"]})}),i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"ðŸ“Š"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No entries found"}),e.jsx("p",{className:"text-gray-600",children:l==="all"&&n==="all"?"No backdated or future dated entries found in the system.":"No entries match the current filters."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Difference"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer/Supplier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((s,a)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(s.type)}`,children:s.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.reference}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g(s.date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${b(s.dateType)}`,children:s.dateType})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("span",{className:s.daysDifference<0?"text-red-600":s.daysDifference>0?"text-yellow-600":"text-gray-600",children:[s.daysDifference>0?"+":"",s.daysDifference," days"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c(s.amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.customer||s.supplier||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.status==="confirmed"||s.status==="paid"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":s.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(s.createdAt)})]},a))})]})})]}),((u=t==null?void 0:t.summary)==null?void 0:u.byType)&&Object.keys(t.summary.byType).length>0&&e.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Summary by Transaction Type"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(t.summary.byType).map(([s,a])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:s}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{className:"font-medium",children:a.count})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Amount:"}),e.jsx("span",{className:"font-medium",children:c(a.totalAmount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Backdated:"}),e.jsx("span",{className:"font-medium text-red-600",children:a.backdateCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Future:"}),e.jsx("span",{className:"font-medium text-yellow-600",children:a.futureCount})]})]})]},s))})]})]})})};export{B as default};
