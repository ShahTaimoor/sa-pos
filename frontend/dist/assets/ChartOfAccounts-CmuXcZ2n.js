import{r as m,R as ie,p as e,Q as ne,bS as I,T as $,aP as W,a1 as X,G as Z,S as ce,X as J,O as T,y as G}from"./index-DaTQeIrM.js";import{u as de,a as oe,b as xe,c as me,d as ue}from"./chartOfAccountsApi-AOutBST3.js";import{P as K}from"./plus-CH9F90nm.js";import{E as he}from"./eye-DQ0qHB88.js";import{E as pe}from"./eye-off-yu1ZFiMM.js";import{P as V}from"./pen-square-CD6kqgaB.js";import{T as Y}from"./trash-2-NO2IJ0Re.js";import{S as ee}from"./save-s6YX8dXx.js";const H=({type:s})=>{const A={asset:{bg:"bg-green-100",text:"text-green-800",label:"Asset",icon:$},liability:{bg:"bg-red-100",text:"text-red-800",label:"Liability",icon:W},equity:{bg:"bg-blue-100",text:"text-blue-800",label:"Equity",icon:X},revenue:{bg:"bg-purple-100",text:"text-purple-800",label:"Revenue",icon:$},expense:{bg:"bg-orange-100",text:"text-orange-800",label:"Expense",icon:Z}},p=A[s]||A.asset,v=p.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.bg} ${p.text}`,children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),p.label]})},ge=({account:s,onSave:A,onCancel:p,isOpen:v,existingAccounts:R,presetType:o,presetCategory:u,categories:_,categoryOptions:k})=>{var x,i,L;const[g,n]=m.useState(!s),[a,d]=m.useState({accountCode:(s==null?void 0:s.accountCode)||"",accountName:(s==null?void 0:s.accountName)||"",accountType:(s==null?void 0:s.accountType)||o||"asset",accountCategory:(s==null?void 0:s.accountCategory)||u||"current_assets",parentAccount:((x=s==null?void 0:s.parentAccount)==null?void 0:x._id)||"",level:(s==null?void 0:s.level)||0,normalBalance:(s==null?void 0:s.normalBalance)||"debit",openingBalance:(s==null?void 0:s.openingBalance)||0,description:(s==null?void 0:s.description)||"",allowDirectPosting:(s==null?void 0:s.allowDirectPosting)!==void 0?s.allowDirectPosting:!0,isTaxable:(s==null?void 0:s.isTaxable)||!1,taxRate:(s==null?void 0:s.taxRate)||0,requiresReconciliation:(s==null?void 0:s.requiresReconciliation)||!1});m.useEffect(()=>{var t;d({accountCode:(s==null?void 0:s.accountCode)||"",accountName:(s==null?void 0:s.accountName)||"",accountType:(s==null?void 0:s.accountType)||o||"asset",accountCategory:(s==null?void 0:s.accountCategory)||u||"current_assets",parentAccount:((t=s==null?void 0:s.parentAccount)==null?void 0:t._id)||"",level:(s==null?void 0:s.level)||0,normalBalance:(s==null?void 0:s.normalBalance)||"debit",openingBalance:(s==null?void 0:s.openingBalance)||0,description:(s==null?void 0:s.description)||"",allowDirectPosting:(s==null?void 0:s.allowDirectPosting)!==void 0?s.allowDirectPosting:!0,isTaxable:(s==null?void 0:s.isTaxable)||!1,taxRate:(s==null?void 0:s.taxRate)||0,requiresReconciliation:(s==null?void 0:s.requiresReconciliation)||!1}),n(!s)},[s,o,u]);const N={asset:{start:1e3,end:1999,prefix:"1"},liability:{start:2e3,end:2999,prefix:"2"},equity:{start:3e3,end:3999,prefix:"3"},revenue:{start:4e3,end:4999,prefix:"4"},expense:{start:5e3,end:5999,prefix:"5"}},B=t=>{var c;return Array.isArray(t)?t:t?Array.isArray(t.data)?t.data:Array.isArray(t.accounts)?t.accounts:Array.isArray((c=t.data)==null?void 0:c.accounts)?t.data.accounts:[]:[]},C=t=>{var F;const c=N[t];if(!c)return"1000";const E=B(R);if(!E.length)return((F=c.start)==null?void 0:F.toString())||"1000";const q=E.filter(b=>b.accountType===t).map(b=>parseInt(b.accountCode)).filter(b=>!isNaN(b)&&b>=c.start&&b<=c.end).sort((b,M)=>b-M);let D=c.start;for(const b of q)if(b===D)D++;else if(b>D)break;return D>c.end?(T.error(`No more account codes available for ${t}. Range: ${c.start}-${c.end}`),c.start.toString()):D.toString()};m.useEffect(()=>{if(o&&u&&!s){const t=["asset","expense"].includes(o)?"debit":"credit";d(c=>({...c,accountType:o,accountCategory:u,normalBalance:t}))}},[o,u,s]),m.useEffect(()=>{if(g&&!s&&a.accountType){const t=C(a.accountType);d(c=>({...c,accountCode:t}))}},[a.accountType,g,s]);const r=t=>{t.preventDefault(),A(a)};return v?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s?"Edit Account":"Create New Account"}),e.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",children:e.jsx(J,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Account Code *"}),!s&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"autoGenerateCode",checked:g,onChange:t=>{if(n(t.target.checked),t.target.checked){const c=C(a.accountType);d({...a,accountCode:c})}},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"autoGenerateCode",className:"text-xs text-gray-600 cursor-pointer",children:"Auto-generate"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:a.accountCode,onChange:t=>d({...a,accountCode:t.target.value.toUpperCase()}),className:"input pr-20",placeholder:g?"Auto-generated":"e.g., 1000, 2000, 3000",required:!0,disabled:!!s||g}),g&&!s&&e.jsx("button",{type:"button",onClick:()=>{const t=C(a.accountType);d({...a,accountCode:t})},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-xs text-primary-600 hover:text-primary-800 font-medium",children:"Regenerate"})]}),g&&!s&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Range: ",(i=N[a.accountType])==null?void 0:i.start," - ",(L=N[a.accountType])==null?void 0:L.end]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name *"}),e.jsx("input",{type:"text",value:a.accountName,onChange:t=>d({...a,accountName:t.target.value}),className:"input",placeholder:"e.g., Cash in Hand",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type *"}),e.jsxs("select",{value:a.accountType,onChange:t=>{const c=t.target.value;d({...a,accountType:c,accountCategory:k[c][0].value})},className:"input",required:!0,disabled:!!s,children:[e.jsx("option",{value:"asset",children:"Asset"}),e.jsx("option",{value:"liability",children:"Liability"}),e.jsx("option",{value:"equity",children:"Equity"}),e.jsx("option",{value:"revenue",children:"Revenue"}),e.jsx("option",{value:"expense",children:"Expense"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Category *"}),e.jsx("select",{value:a.accountCategory,onChange:t=>d({...a,accountCategory:t.target.value}),className:"input",required:!0,children:k[a.accountType].map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Normal Balance *"}),e.jsxs("select",{value:a.normalBalance,onChange:t=>d({...a,normalBalance:t.target.value}),className:"input",required:!0,disabled:!!s,children:[e.jsx("option",{value:"debit",children:"Debit"}),e.jsx("option",{value:"credit",children:"Credit"})]})]}),!s&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opening Balance"}),e.jsx("input",{type:"number",step:"0.01",value:a.openingBalance,onChange:t=>d({...a,openingBalance:parseFloat(t.target.value)||0}),className:"input",placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:t=>d({...a,description:t.target.value}),className:"input",rows:3,placeholder:"Account description..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"allowDirectPosting",checked:a.allowDirectPosting,onChange:t=>d({...a,allowDirectPosting:t.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"allowDirectPosting",className:"ml-2 text-sm text-gray-700",children:"Allow Direct Posting"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isTaxable",checked:a.isTaxable,onChange:t=>d({...a,isTaxable:t.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isTaxable",className:"ml-2 text-sm text-gray-700",children:"Taxable"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"requiresReconciliation",checked:a.requiresReconciliation,onChange:t=>d({...a,requiresReconciliation:t.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"requiresReconciliation",className:"ml-2 text-sm text-gray-700",children:"Requires Reconciliation"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:p,className:"btn btn-secondary",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),s?"Update Account":"Create Account"]})]})]})]})}):null},be=({categories:s,onCategoryCreated:A,onCategoryUpdated:p,onCategoryDeleted:v})=>{const[R,o]=m.useState(!1),[u,_]=m.useState(null),[k,g]=m.useState(!0),[n,a]=m.useState({name:"",code:"",accountType:"asset",description:"",displayOrder:0,color:"#6B7280"}),d=r=>{if(!r)return"";let x=r.toUpperCase().replace(/[^A-Z0-9\s]/g,"").replace(/\s+/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");return x.length>20&&(x=x.substring(0,20)),x},N=async r=>{r.preventDefault();try{u?(await accountCategoriesAPI.updateCategory(u._id,n),p(),T.success("Category updated successfully!")):(await accountCategoriesAPI.createCategory(n),A(),T.success("Category created successfully!")),o(!1),_(null),g(!0),a({name:"",code:"",accountType:"asset",description:"",displayOrder:0,color:"#6B7280"})}catch(x){G(x,"Category Management")}},B=r=>{_(r),g(!1),a({name:r.name,code:r.code,accountType:r.accountType,description:r.description||"",displayOrder:r.displayOrder||0,color:r.color||"#6B7280"}),o(!0)},C=async r=>{if(window.confirm(`Are you sure you want to delete category "${r.name}"?`))try{await accountCategoriesAPI.deleteCategory(r._id),v(),T.success("Category deleted successfully!")}catch(x){G(x,"Category Deletion")}};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Account Categories"}),e.jsxs("button",{onClick:()=>{_(null),g(!0),a({name:"",code:"",accountType:"asset",description:"",displayOrder:0,color:"#6B7280"}),o(!0)},className:"btn btn-primary btn-sm",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(s).map(([r,x])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3 capitalize",children:r}),e.jsx("div",{className:"space-y-2",children:x.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:i.color}}),e.jsx("span",{className:"text-sm font-medium",children:i.name})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>B(i),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(V,{className:"h-3 w-3"})}),!i.isSystemCategory&&e.jsx("button",{onClick:()=>C(i),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Y,{className:"h-3 w-3"})})]})]},i._id))})]},r))}),R&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:u?"Edit Category":"Create New Category"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(J,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name *"}),e.jsx("input",{type:"text",value:n.name,onChange:r=>{const x=r.target.value,i={...n,name:x};k&&!u&&(i.code=d(x)),a(i)},className:"input",placeholder:"e.g., Current Assets",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Code *"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:n.code,onChange:r=>a({...n,code:r.target.value.toUpperCase()}),className:"input flex-1",placeholder:"e.g., CUR_ASSETS",required:!0}),!u&&e.jsx("button",{type:"button",onClick:()=>a({...n,code:d(n.name)}),className:"px-3 py-2 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors",title:"Regenerate code from name",children:"Regenerate"})]}),!u&&e.jsxs("div",{className:"mt-2 flex items-center",children:[e.jsx("input",{type:"checkbox",id:"autoGenerateCode",checked:k,onChange:r=>g(r.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"autoGenerateCode",className:"ml-2 text-sm text-gray-600",children:"Auto-generate from name"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type *"}),e.jsxs("select",{value:n.accountType,onChange:r=>a({...n,accountType:r.target.value}),className:"input",required:!0,children:[e.jsx("option",{value:"asset",children:"Asset"}),e.jsx("option",{value:"liability",children:"Liability"}),e.jsx("option",{value:"equity",children:"Equity"}),e.jsx("option",{value:"revenue",children:"Revenue"}),e.jsx("option",{value:"expense",children:"Expense"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",value:n.displayOrder,onChange:r=>a({...n,displayOrder:parseInt(r.target.value)||0}),className:"input",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:n.description,onChange:r=>a({...n,description:r.target.value}),className:"input",rows:3,placeholder:"Category description..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:n.color,onChange:r=>a({...n,color:r.target.value}),className:"w-12 h-10 border border-gray-300 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:n.color,onChange:r=>a({...n,color:r.target.value}),className:"input flex-1",placeholder:"#6B7280"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"btn btn-secondary",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),u?"Update Category":"Create Category"]})]})]})]})})]})},ke=()=>{const[s,A]=m.useState(""),[p,v]=m.useState(null),[R,o]=m.useState(!1),u=l=>{let y=[];if(Array.isArray(l)?y=l:l!=null&&l.data&&(Array.isArray(l.data)?y=l.data:Array.isArray(l.data.accounts)?y=l.data.accounts:Array.isArray(l.accounts)&&(y=l.accounts)),!Array.isArray(y))return{};const f={asset:{},liability:{},equity:{},revenue:{},expense:{}};return y.forEach(j=>{const w=j.accountType,O=j.accountCategory;f[w][O]||(f[w][O]=[]),f[w][O].push(j)}),Object.keys(f).forEach(j=>{Object.keys(f[j]).forEach(w=>{f[j][w].sort((O,S)=>O.accountCode.localeCompare(S.accountCode))})}),f},_={asset:[{value:"current_assets",label:"Current Assets"},{value:"fixed_assets",label:"Fixed Assets"},{value:"other_assets",label:"Other Assets"},{value:"inventory",label:"Inventory"},{value:"prepaid_expenses",label:"Prepaid Expenses"}],liability:[{value:"current_liabilities",label:"Current Liabilities"},{value:"long_term_liabilities",label:"Long-term Liabilities"},{value:"accrued_expenses",label:"Accrued Expenses"},{value:"deferred_revenue",label:"Deferred Revenue"}],equity:[{value:"owner_equity",label:"Owner Equity"},{value:"retained_earnings",label:"Retained Earnings"}],revenue:[{value:"sales_revenue",label:"Sales Revenue"},{value:"other_revenue",label:"Other Revenue"}],expense:[{value:"cost_of_goods_sold",label:"Cost of Goods Sold"},{value:"operating_expenses",label:"Operating Expenses"},{value:"other_expenses",label:"Other Expenses"},{value:"manufacturing_overhead",label:"Manufacturing Overhead"},{value:"service_delivery",label:"Service Delivery"},{value:"quality_control",label:"Quality Control"},{value:"warehouse_operations",label:"Warehouse Operations"},{value:"shipping_handling",label:"Shipping & Handling"},{value:"security_loss_prevention",label:"Security & Loss Prevention"}]},[k,g]=m.useState(""),[n,a]=m.useState(!1),[d,N]=m.useState(null),[B,C]=m.useState(null),[r,x]=m.useState(!1),{data:i,isLoading:L,error:t,refetch:c}=de({search:s,accountType:k||void 0,isActive:n?void 0:"true"},{onError:()=>{}}),E=ie.useMemo(()=>{var l;return Array.isArray(i)?i:Array.isArray(i==null?void 0:i.data)?i.data:Array.isArray((l=i==null?void 0:i.data)==null?void 0:l.accounts)?i.data.accounts:Array.isArray(i==null?void 0:i.accounts)?i.accounts:[]},[i]),{data:q,isLoading:D}=oe(void 0,{onError:()=>{}}),[F]=xe(),[b]=me(),[M]=ue(),se=async l=>{try{p?(await b({id:p._id,...l}).unwrap(),T.success("Account updated successfully!")):(await F(l).unwrap(),T.success("Account created successfully!")),o(!1),v(null),c()}catch(y){G(y,p?"Account Update":"Account Creation")}},te=l=>{v(l),o(!0)},ae=async l=>{if(window.confirm(`Are you sure you want to delete account "${l.accountName}"?`))try{await M(l._id).unwrap(),T.success("Account deleted successfully!"),c()}catch(y){G(y,"Account Deletion")}},re=()=>{v(null),N(null),C(null),o(!0)},P=(l,y)=>{v(null),N(l),C(y),o(!0)};return L?e.jsx(ne,{}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Chart of Accounts"}),e.jsx("p",{className:"text-gray-600",children:"Manage your accounting structure and account heads"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(I,{className:"mx-auto h-12 w-12"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Accounts"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load chart of accounts. Please try again."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Retry"})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Chart of Accounts"}),e.jsx("p",{className:"text-gray-600",children:"Manage your accounting structure and account heads"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>x(!r),className:"btn btn-secondary btn-md",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),r?"Hide Categories":"Manage Categories"]}),e.jsxs("button",{onClick:re,className:"btn btn-primary btn-md",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Create Account"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Create Accounts"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("button",{onClick:()=>P("asset","current_assets"),className:"flex flex-col items-center p-4 border-2 border-green-200 rounded-lg hover:border-green-300 hover:bg-green-50 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-3 group-hover:bg-green-200",children:e.jsx($,{className:"h-6 w-6 text-green-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Asset"}),e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"Current Assets"})]}),e.jsxs("button",{onClick:()=>P("liability","current_liabilities"),className:"flex flex-col items-center p-4 border-2 border-red-200 rounded-lg hover:border-red-300 hover:bg-red-50 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-3 group-hover:bg-red-200",children:e.jsx(W,{className:"h-6 w-6 text-red-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Liability"}),e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"Current Liabilities"})]}),e.jsxs("button",{onClick:()=>P("equity","owner_equity"),className:"flex flex-col items-center p-4 border-2 border-blue-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-3 group-hover:bg-blue-200",children:e.jsx(X,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Equity"}),e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"Owner Equity"})]}),e.jsxs("button",{onClick:()=>P("revenue","sales_revenue"),className:"flex flex-col items-center p-4 border-2 border-purple-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mb-3 group-hover:bg-purple-200",children:e.jsx($,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Revenue"}),e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"Sales Revenue"})]}),e.jsxs("button",{onClick:()=>P("expense","operating_expenses"),className:"flex flex-col items-center p-4 border-2 border-orange-200 rounded-lg hover:border-orange-300 hover:bg-orange-50 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mb-3 group-hover:bg-orange-200",children:e.jsx(Z,{className:"h-6 w-6 text-orange-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Expense"}),e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"Operating Expenses"})]})]})]}),r&&e.jsx(be,{categories:(q==null?void 0:q.data)||{},onCategoryCreated:()=>queryClient.invalidateQueries("accountCategories"),onCategoryUpdated:()=>queryClient.invalidateQueries("accountCategories"),onCategoryDeleted:()=>queryClient.invalidateQueries("accountCategories")}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by account code, name, or description...",value:s,onChange:l=>A(l.target.value),className:"pl-10 input"})]}),e.jsxs("select",{value:k,onChange:l=>g(l.target.value),className:"input w-48",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"asset",children:"Assets"}),e.jsx("option",{value:"liability",children:"Liabilities"}),e.jsx("option",{value:"equity",children:"Equity"}),e.jsx("option",{value:"revenue",children:"Revenue"}),e.jsx("option",{value:"expense",children:"Expenses"})]}),e.jsxs("button",{onClick:()=>a(!n),className:`btn ${n?"btn-primary":"btn-secondary"}`,children:[n?e.jsx(he,{className:"h-4 w-4 mr-2"}):e.jsx(pe,{className:"h-4 w-4 mr-2"}),n?"Show Active":"Show All"]})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Balance"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Normal Balance"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:!E||E.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(I,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),e.jsx("p",{children:"No accounts found. Create your first account to get started."})]})}):(()=>{const l=u(E),y={asset:"Assets",liability:"Liabilities",equity:"Equity",revenue:"Revenue",expense:"Expenses"},f=[];return Object.keys(l).forEach(j=>{const w=l[j];Object.values(w).some(S=>S.length>0)&&(f.push(e.jsx("tr",{className:"bg-gray-50 border-t-2 border-gray-200",children:e.jsx("td",{colSpan:"7",className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{type:j}),e.jsx("span",{className:"ml-3 text-lg font-semibold text-gray-900",children:y[j]})]})})},`type-${j}`)),Object.keys(w).forEach(S=>{var Q,z;const U=w[S];if(U.length>0){const le=((z=(Q=_[j])==null?void 0:Q.find(h=>h.value===S))==null?void 0:z.label)||S;f.push(e.jsx("tr",{className:"bg-blue-50",children:e.jsx("td",{colSpan:"7",className:"px-6 py-2 pl-12",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-3"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:le})]})})},`category-${j}-${S}`)),U.forEach(h=>{f.push(e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap pl-20",children:e.jsx("span",{className:"text-sm font-mono font-medium text-gray-900",children:h.accountCode})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:h.accountName}),h.description&&e.jsx("div",{className:"text-xs text-gray-500",children:h.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(H,{type:h.accountType})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:h.accountCategory.replace(/_/g," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("span",{className:`text-sm font-semibold ${h.currentBalance>=0?"text-green-600":"text-red-600"}`,children:h.currentBalance.toFixed(2)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${h.normalBalance==="debit"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:h.normalBalance.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>te(h),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(V,{className:"h-4 w-4"})}),!h.isSystemAccount&&e.jsx("button",{onClick:()=>ae(h),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Y,{className:"h-4 w-4"})})]})})]},h._id))})}}))}),f})()})]})})}),e.jsx(ge,{account:p,onSave:se,onCancel:()=>{o(!1),v(null),N(null),C(null)},isOpen:R,existingAccounts:E,presetType:d,presetCategory:B,categories:q,categoryOptions:_})]})};export{ke as ChartOfAccounts,ke as default};
