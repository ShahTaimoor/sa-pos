import{D as Ve,ah as mt,r as g,p as n,a2 as rr,L as Pe,X as re,B as K,y as Q,ai as en,z as Ge,O as B,aj as tn,S as ct,P as Ce,ak as xt,I as He,T as jr,al as rn,am as nn,R as an,E as ut,u as sn,an as on,ao as ln,ap as cn,x as nr,aq as un}from"./index-DaTQeIrM.js";import{c as dn,d as fn,e as hn,f as mn,g as xn,p as pn,h as vn,i as gn,j as yn,k as bn,l as _n,m as jn,a as wn}from"./productsApi-CuUSDwZw.js";import{u as Nn}from"./useFuzzySearch-BgntWuv8.js";import{D as En}from"./ConfirmationDialog-DxRMdj0p.js";import{a as On}from"./useConfirmation-C3qnwA_z.js";import{D as Sn}from"./database-YLEgbeHu.js";import{U as kn}from"./upload-BtANNzlj.js";import{C as pt}from"./chevron-up-B1QiEVPM.js";import{C as vt}from"./chevron-down-5FLXPK9w.js";import{D as me}from"./download-sNUxQ2Ce.js";import{F as $n}from"./file-spreadsheet-CU1oWIfN.js";import{H as Pn}from"./help-circle-CajzmjgH.js";import{C as Cn}from"./check-circle-C7Swk4iC.js";import{A as An}from"./alert-circle-3gdbj3DL.js";import{F as In}from"./filter-Dd-_7AND.js";import{P as wr}from"./pen-square-CD6kqgaB.js";import{T as Nr}from"./trash-2-NO2IJ0Re.js";import{S as Tn}from"./save-s6YX8dXx.js";import{C as Er,B as Mn}from"./BarcodeScanner-mW7EPbdL.js";import{C as Rn}from"./check-D4trJhmm.js";import{P as ze}from"./printer-sSBWtYCz.js";import{N as Dn}from"./NotesPanel-Dw5m6zyf.js";import{u as Bn}from"./investorsApi-CNmZztl-.js";import{P as Ln}from"./plus-CH9F90nm.js";import"./shield-DyTx0jkP.js";import"./info-geJWZ_yE.js";import"./message-square-DnREj1zG.js";import"./history-DotX95kV.js";import"./lock-I7-ewCB8.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=Ve("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=Ve("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=Ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=Ve("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]),Gn=({onImportComplete:t,filters:e={}})=>{const a=mt(),[r,i]=g.useState(!1),[s,o]=g.useState(!1),[l,p]=g.useState(!1),[x,E]=g.useState(null),[u,N]=g.useState(null),[y,$]=g.useState(!1),[T,k]=g.useState("csv"),[c]=dn(),[_]=fn(),[P]=hn(),[F]=mn(),[m]=xn(),M=async()=>{try{return await m().unwrap()}catch{const b=await m();return b.data||b}},f=async h=>(await a(pn.endpoints.downloadFile.initiate(h))).data,j=async()=>{try{o(!0);const h=await c(e).unwrap(),b=await f(h.filename),A=(b==null?void 0:b.data)||b,w=new Blob([A],{type:"text/csv;charset=utf-8;"}),v=document.createElement("a"),L=URL.createObjectURL(w);v.setAttribute("href",L),v.setAttribute("download",h.filename),v.style.visibility="hidden",document.body.appendChild(v),v.click(),document.body.removeChild(v),K(`Exported ${h.recordCount} products to CSV`)}catch(h){Q(h,"CSV Export")}finally{o(!1)}},O=async()=>{try{o(!0);const h=await _(e).unwrap(),b=await f(h.filename),A=(b==null?void 0:b.data)||b,w=new Blob([A],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),v=document.createElement("a"),L=URL.createObjectURL(w);v.setAttribute("href",L),v.setAttribute("download",h.filename),v.style.visibility="hidden",document.body.appendChild(v),v.click(),document.body.removeChild(v),K(`Exported ${h.recordCount} products to Excel`)}catch(h){Q(h,"Excel Export")}finally{o(!1)}},C=h=>{const b=h.target.files[0];if(b){const w=en(b,{allowedTypes:["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],maxSizeInMB:10,required:!0});if(w){Ge(w),h.target.value="";return}E(b),k(b.type.includes("csv")?"csv":"excel")}},U=async()=>{var h,b,A;if(!x){B.error("Please select a file to import");return}try{p(!0);const w=T==="csv"?await F(x).unwrap():await P(x).unwrap();N(w.results||((h=w.data)==null?void 0:h.results));const v=w.results||((b=w.data)==null?void 0:b.results);(v==null?void 0:v.success)>0&&(K(`Successfully imported ${v.success} products`),t&&t()),((A=v==null?void 0:v.errors)==null?void 0:A.length)>0&&tn(`${v.errors.length} products failed to import`)}catch(w){Q(w,"Product Import")}finally{p(!1)}},D=async()=>{try{const h=await M(),b=(h==null?void 0:h.data)||h,A=new Blob([b],{type:"text/csv;charset=utf-8;"}),w=document.createElement("a"),v=URL.createObjectURL(A);w.setAttribute("href",v),w.setAttribute("download","product_template.csv"),w.style.visibility="hidden",document.body.appendChild(w),w.click(),document.body.removeChild(w),K("Template downloaded successfully")}catch(h){Q(h,"Template Download")}},d=()=>{E(null),N(null),$(!1)};return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:()=>i(!r),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Sn,{className:"h-5 w-5 text-gray-600"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Import / Export Products"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:h=>{h.stopPropagation(),$(!0)},className:"btn btn-primary btn-sm",children:[n.jsx(kn,{className:"h-4 w-4 mr-2"}),"Import Products"]}),r?n.jsx(pt,{className:"h-4 w-4 text-gray-400"}):n.jsx(vt,{className:"h-4 w-4 text-gray-400"})]})]}),r&&n.jsxs("div",{className:"border-t border-gray-200 p-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(rr,{className:"h-5 w-5 text-blue-600 mr-2"}),n.jsx("h4",{className:"font-medium text-gray-900",children:"Export to CSV"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Export all products to a CSV file for backup or analysis."}),n.jsxs(Pe,{onClick:j,isLoading:s,className:"btn btn-secondary btn-sm w-full",children:[n.jsx(me,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx($n,{className:"h-5 w-5 text-green-600 mr-2"}),n.jsx("h4",{className:"font-medium text-gray-900",children:"Export to Excel"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Export all products to an Excel file with formatting."}),n.jsxs(Pe,{onClick:O,isLoading:s,className:"btn btn-secondary btn-sm w-full",children:[n.jsx(me,{className:"h-4 w-4 mr-2"}),"Export Excel"]})]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Pn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Import Guidelines"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:"• Download the template to see the required format"}),n.jsx("li",{children:"• Required fields: Product Name, Category"}),n.jsx("li",{children:"• Supported formats: CSV, Excel (.xlsx)"}),n.jsx("li",{children:"• Maximum file size: 10MB"}),n.jsx("li",{children:"• Products with duplicate names will be skipped"})]}),n.jsxs("button",{onClick:D,className:"btn btn-primary btn-xs mt-3",children:[n.jsx(me,{className:"h-3 w-3 mr-1"}),"Download Template"]})]})]})}),y&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Import Products"}),n.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:n.jsx(re,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"p-6",children:u?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Import Results"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[n.jsx(Cn,{className:"h-6 w-6 text-green-600 mx-auto mb-1"}),n.jsx("div",{className:"text-lg font-semibold text-green-600",children:u.success}),n.jsx("div",{className:"text-sm text-green-700",children:"Success"})]}),n.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[n.jsx(An,{className:"h-6 w-6 text-red-600 mx-auto mb-1"}),n.jsx("div",{className:"text-lg font-semibold text-red-600",children:u.errors.length}),n.jsx("div",{className:"text-sm text-red-700",children:"Errors"})]})]}),u.errors.length>0&&n.jsxs("div",{className:"max-h-40 overflow-y-auto",children:[n.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Errors:"}),n.jsxs("div",{className:"space-y-2",children:[u.errors.slice(0,10).map((h,b)=>n.jsxs("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:["Row ",h.row,": ",h.error]},b)),u.errors.length>10&&n.jsxs("div",{className:"text-sm text-gray-500",children:["... and ",u.errors.length-10," more errors"]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:d,className:"btn btn-primary btn-sm",children:"Close"})})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"}),n.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:C,className:"input w-full"})]}),x&&n.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(rr,{className:"h-4 w-4 text-gray-600 mr-2"}),n.jsx("span",{className:"text-sm text-gray-700",children:x.name}),n.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[(x.size/1024/1024).toFixed(2)," MB"]})]})}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{onClick:d,className:"btn btn-secondary btn-sm",children:"Cancel"}),n.jsx(Pe,{onClick:U,isLoading:l,disabled:!x,className:"btn btn-primary btn-sm",children:"Import Products"})]})]})})]})})]})]})},zn=({filters:t,onFiltersChange:e,categories:a=[],onClearFilters:r})=>{const[i,s]=g.useState(!1),o=(u,N)=>{e({...t,[u]:N})},l=u=>{const N={...t};delete N[u],e(N)},p=()=>{e({}),r&&r()},x=Object.keys(t).some(u=>t[u]!==""&&t[u]!==null&&t[u]!==void 0),E=()=>Object.keys(t).filter(u=>t[u]!==""&&t[u]!==null&&t[u]!==void 0).length;return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:()=>s(!i),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(In,{className:"h-5 w-5 text-gray-600"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Filters"}),x&&n.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full",children:[E()," active"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[x&&n.jsx("button",{onClick:u=>{u.stopPropagation(),p()},className:"text-sm text-red-600 hover:text-red-800 font-medium",children:"Clear All"}),i?n.jsx(pt,{className:"h-4 w-4 text-gray-400"}):n.jsx(vt,{className:"h-4 w-4 text-gray-400"})]})]}),i&&n.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(ct,{className:"h-4 w-4 inline mr-1"}),"Search Products"]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Product name or description...",value:t.search||"",onChange:u=>o("search",u.target.value),className:"input pl-8"}),n.jsx(ct,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.search&&n.jsx("button",{onClick:()=>l("search"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n.jsx(re,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Ce,{className:"h-4 w-4 inline mr-1"}),"Status"]}),n.jsxs("select",{value:t.status||"",onChange:u=>o("status",u.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Statuses"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"discontinued",children:"Discontinued"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(xt,{className:"h-4 w-4 inline mr-1"}),"Category"]}),n.jsxs("select",{value:t.category||"",onChange:u=>o("category",u.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Categories"}),a.map(u=>n.jsx("option",{value:u._id,children:u.name},u._id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(He,{className:"h-4 w-4 inline mr-1"}),"Stock Status"]}),n.jsxs("select",{value:t.stockStatus||"",onChange:u=>o("stockStatus",u.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Stock Levels"}),n.jsx("option",{value:"lowStock",children:"Low Stock"}),n.jsx("option",{value:"outOfStock",children:"Out of Stock"}),n.jsx("option",{value:"inStock",children:"In Stock"})]})]})]}),x&&n.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Active Filters:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(t).map(([u,N])=>{if(!N||N==="")return null;let y=N,$=u;switch(u){case"status":$="Status",y=N.charAt(0).toUpperCase()+N.slice(1);break;case"category":$="Category";const T=a.find(k=>k._id===N);y=T?T.name:N;break;case"stockStatus":$="Stock",y=N==="lowStock"?"Low Stock":N==="outOfStock"?"Out of Stock":N==="inStock"?"In Stock":N;break;case"search":$="Search",y=`"${N}"`;break;default:$=u.charAt(0).toUpperCase()+u.slice(1)}return n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[$,": ",y,n.jsx("button",{onClick:()=>l(u),className:"ml-1 hover:text-blue-600",children:n.jsx(re,{className:"h-3 w-3"})})]},u)})})]})]})]})},Vn=(t=[],e={})=>{const{idField:a="_id",onBulkOperation:r=null,enableUndo:i=!0,maxUndoHistory:s=10}=e,[o,l]=g.useState(new Set),[p,x]=g.useState(!1),[E,u]=g.useState(!1),[N,y]=g.useState({current:0,total:0,message:""}),[$,T]=g.useState([]),[k,c]=g.useState(null),_=g.useRef([]),P=g.useCallback(d=>{l(h=>{const b=new Set(h);return b.has(d)?b.delete(d):b.add(d),x(b.size===t.length&&t.length>0),b})},[t]),F=g.useCallback((d=null)=>{const h=d||t,b=new Set(h.map(A=>A[a]));l(b),x(!0)},[t,a]),m=g.useCallback(()=>{l(new Set),x(!1)},[]),M=g.useCallback((d=null)=>{p?m():F(d||t)},[p,t,F,m]),f=g.useCallback(()=>t.filter(d=>o.has(d[a])),[t,o,a]),j=g.useCallback(d=>o.has(d),[o]),O=o.size,C=g.useCallback(async(d,h={})=>{const b=f();if(b.length===0)return{success:!1,message:"No items selected"};u(!0),y({current:0,total:b.length,message:"Starting operation..."});const A=b.map(v=>({...v})),w={id:Date.now().toString(),type:d,timestamp:new Date().toISOString(),items:A,data:h};try{let v=0,L=0;const G=[];for(let R=0;R<b.length;R++){const z=b[R];y({current:R+1,total:b.length,message:`Processing ${z.name||z.orderNumber||z.businessName||"item"}...`});try{r&&await r(z,d,h),v++}catch(ne){L++,G.push({item:z,error:ne.message||"Unknown error"})}await new Promise(ne=>setTimeout(ne,50))}return i&&(T(R=>{const z=[w,...R].slice(0,s);return _.current=z,z}),c(w)),v>0&&m(),u(!1),y({current:0,total:0,message:""}),{success:!0,successCount:v,failureCount:L,errors:G,operationRecord:w}}catch(v){return u(!1),y({current:0,total:0,message:""}),{success:!1,message:v.message||"Operation failed",operationRecord:w}}},[f,r,i,s,m]),U=g.useCallback(async()=>{if($.length===0||!k)return{success:!1,message:"No operation to undo"};u(!0),y({current:0,total:k.items.length,message:"Undoing operation..."});try{for(let d=0;d<k.items.length;d++){const h=k.items[d];y({current:d+1,total:k.items.length,message:`Reverting ${h.name||h.orderNumber||h.businessName||"item"}...`}),r&&await r(h,`undo_${k.type}`,k.data),await new Promise(b=>setTimeout(b,50))}return T(d=>d.filter(h=>h.id!==k.id)),c($[1]||null),u(!1),y({current:0,total:0,message:""}),{success:!0,message:"Operation undone successfully"}}catch(d){return u(!1),y({current:0,total:0,message:""}),{success:!1,message:d.message||"Undo failed"}}},[$,k,r]),D=g.useCallback(()=>{T([]),c(null),_.current=[]},[]);return{selectedIds:Array.from(o),selectedCount:O,isSelectAll:p,isSelected:j,getSelectedItems:f,toggleSelection:P,selectAll:F,deselectAll:m,toggleSelectAll:M,isOperationInProgress:E,operationProgress:N,canUndo:i&&k!==null,undoHistory:$,executeBulkOperation:C,undoLastOperation:U,clearUndoHistory:D}},Hn=({selectedCount:t,isOperationInProgress:e,operationProgress:a,canUndo:r,onBulkUpdate:i,onBulkDelete:s,onBulkExport:o,onBulkStatusChange:l,onBulkCategoryChange:p,onBulkPriceUpdate:x,onBulkStockAdjust:E,onUndo:u,onClearSelection:N,availableActions:y=["update","delete","export","status","category","price","stock"],className:$=""})=>t===0&&!e?null:n.jsxs("div",{className:`bg-primary-50 border border-primary-200 rounded-lg p-4 ${$}`,children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ar,{className:"h-5 w-5 text-primary-600"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[t," ",t===1?"item":"items"," selected"]})]}),e&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary-600 border-t-transparent"}),n.jsxs("span",{className:"text-sm text-gray-600",children:[a.message||"Processing..."," (",a.current,"/",a.total,")"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 flex-wrap",children:[r&&n.jsxs("button",{onClick:u,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",title:"Undo last operation",children:[n.jsx(Un,{className:"h-4 w-4 mr-1"}),"Undo"]}),y.includes("update")&&i&&n.jsxs("button",{onClick:i,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(wr,{className:"h-4 w-4 mr-1"}),"Update"]}),y.includes("status")&&l&&n.jsxs("button",{onClick:l,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(ar,{className:"h-4 w-4 mr-1"}),"Change Status"]}),y.includes("category")&&p&&n.jsxs("button",{onClick:p,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(xt,{className:"h-4 w-4 mr-1"}),"Change Category"]}),y.includes("price")&&x&&n.jsxs("button",{onClick:x,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(jr,{className:"h-4 w-4 mr-1"}),"Update Prices"]}),y.includes("stock")&&E&&n.jsxs("button",{onClick:E,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Ce,{className:"h-4 w-4 mr-1"}),"Adjust Stock"]}),y.includes("export")&&o&&n.jsxs("button",{onClick:o,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(me,{className:"h-4 w-4 mr-1"}),"Export"]}),y.includes("delete")&&s&&n.jsxs("button",{onClick:s,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-red-700 bg-white border border-red-300 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Nr,{className:"h-4 w-4 mr-1"}),"Delete"]}),n.jsxs("button",{onClick:N,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(re,{className:"h-4 w-4 mr-1"}),"Clear"]})]})]}),e&&a.total>0&&n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${a.current/a.total*100}%`}})})})]}),qn=({isOpen:t,onClose:e,selectedCount:a,updateType:r,onConfirm:i,categories:s=[],statusOptions:o=[],tierOptions:l=[],isLoading:p=!1})=>{const[x,E]=g.useState({}),[u,N]=g.useState({});if(!t)return null;const y=(c,_)=>{E(P=>({...P,[c]:_})),N(P=>({...P,[c]:null}))},$=c=>{c.preventDefault();const _={};if(r==="price"&&!x.priceType&&(_.priceType="Please select a price type"),r==="price"&&x.priceValue===void 0&&(_.priceValue="Please enter a price value"),r==="category"&&!x.category&&(_.category="Please select a category"),r==="status"&&!x.status&&(_.status="Please select a status"),r==="stock"&&x.stockAdjustment===void 0&&(_.stockAdjustment="Please enter a stock adjustment"),r==="tier"&&!x.tier&&(_.tier="Please select a tier"),Object.keys(_).length>0){N(_);return}i(x)},T=()=>{switch(r){case"price":return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Type"}),n.jsxs("select",{value:x.priceType||"",onChange:c=>y("priceType",c.target.value),className:`w-full px-3 py-2 border rounded-md ${u.priceType?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select price type"}),n.jsx("option",{value:"retail",children:"Retail Price"}),n.jsx("option",{value:"wholesale",children:"Wholesale Price"}),n.jsx("option",{value:"cost",children:"Cost Price"})]}),u.priceType&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.priceType})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Update Method"}),n.jsxs("select",{value:x.updateMethod||"set",onChange:c=>y("updateMethod",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"set",children:"Set to value"}),n.jsx("option",{value:"increase",children:"Increase by amount"}),n.jsx("option",{value:"decrease",children:"Decrease by amount"}),n.jsx("option",{value:"percentage",children:"Change by percentage"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),n.jsx("input",{type:"number",step:"0.01",value:x.priceValue||"",onChange:c=>y("priceValue",parseFloat(c.target.value)),className:`w-full px-3 py-2 border rounded-md ${u.priceValue?"border-red-300":"border-gray-300"}`,placeholder:"Enter value"}),u.priceValue&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.priceValue})]})]});case"category":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{value:x.category||"",onChange:c=>y("category",c.target.value),className:`w-full px-3 py-2 border rounded-md ${u.category?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select category"}),s.map(c=>n.jsx("option",{value:c._id||c.id,children:c.name},c._id||c.id))]}),u.category&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.category})]});case"status":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{value:x.status||"",onChange:c=>y("status",c.target.value),className:`w-full px-3 py-2 border rounded-md ${u.status?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select status"}),o.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))]}),u.status&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.status})]});case"stock":return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adjustment Method"}),n.jsxs("select",{value:x.stockMethod||"set",onChange:c=>y("stockMethod",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"set",children:"Set to value"}),n.jsx("option",{value:"increase",children:"Increase by amount"}),n.jsx("option",{value:"decrease",children:"Decrease by amount"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Adjustment"}),n.jsx("input",{type:"number",value:x.stockAdjustment||"",onChange:c=>y("stockAdjustment",parseInt(c.target.value)),className:`w-full px-3 py-2 border rounded-md ${u.stockAdjustment?"border-red-300":"border-gray-300"}`,placeholder:"Enter amount"}),u.stockAdjustment&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.stockAdjustment})]})]});case"tier":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Tier"}),n.jsxs("select",{value:x.tier||"",onChange:c=>y("tier",c.target.value),className:`w-full px-3 py-2 border rounded-md ${u.tier?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select tier"}),l.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))]}),u.tier&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.tier})]});case"tags":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),n.jsx("input",{type:"text",value:x.tags||"",onChange:c=>y("tags",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"tag1, tag2, tag3"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter tags separated by commas. Existing tags will be replaced."})]});default:return null}},k=()=>({price:"Bulk Update Prices",category:"Bulk Change Category",status:"Bulk Change Status",stock:"Bulk Adjust Stock",tier:"Bulk Change Customer Tier",tags:"Bulk Update Tags"})[r]||"Bulk Update";return n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),n.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:n.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:k()}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(re,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(He,{className:"h-5 w-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:["This will update ",n.jsx("strong",{children:a})," ",a===1?"item":"items","."]})]})}),n.jsxs("form",{onSubmit:$,children:[T(),n.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:e,disabled:p,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),n.jsxs(Pe,{type:"submit",isLoading:p,className:"px-4 py-2 bg-primary-600 text-white rounded-md text-sm font-medium hover:bg-primary-700",children:[n.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Update ",a," ",a===1?"Item":"Items"]})]})]})]})})]})})};var gt={},qe={},V={};Object.defineProperty(V,"__esModule",{value:!0});function Xn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Wn=function t(e,a){Xn(this,t),this.data=e,this.text=a.text||e,this.options=a};V.default=Wn;Object.defineProperty(qe,"__esModule",{value:!0});qe.CODE39=void 0;var Yn=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Jn=V,Kn=Qn(Jn);function Qn(t){return t&&t.__esModule?t:{default:t}}function Zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ea(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ta(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ra=function(t){ta(e,t);function e(a,r){return Zn(this,e),a=a.toUpperCase(),r.mod43&&(a+=ia(sa(a))),ea(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Yn(e,[{key:"encode",value:function(){for(var r=nt("*"),i=0;i<this.data.length;i++)r+=nt(this.data[i])+"0";return r+=nt("*"),{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(Kn.default),Sr=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],na=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function nt(t){return aa(kr(t))}function aa(t){return na[t].toString(2)}function ia(t){return Sr[t]}function kr(t){return Sr.indexOf(t)}function sa(t){for(var e=0,a=0;a<t.length;a++)e+=kr(t[a]);return e=e%43,e}qe.CODE39=ra;var Z={},yt={},ve={},I={};Object.defineProperty(I,"__esModule",{value:!0});var Oe;function at(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var $r=I.SET_A=0,Pr=I.SET_B=1,Cr=I.SET_C=2;I.SHIFT=98;var oa=I.START_A=103,la=I.START_B=104,ca=I.START_C=105;I.MODULO=103;I.STOP=106;I.FNC1=207;I.SET_BY_CODE=(Oe={},at(Oe,oa,$r),at(Oe,la,Pr),at(Oe,ca,Cr),Oe);I.SWAP={101:$r,100:Pr,99:Cr};I.A_START_CHAR="Ð";I.B_START_CHAR="Ñ";I.C_START_CHAR="Ò";I.A_CHARS="[\0-_È-Ï]";I.B_CHARS="[ -È-Ï]";I.C_CHARS="(Ï*[0-9]{2}Ï*)";I.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(ve,"__esModule",{value:!0});var ua=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),da=V,fa=ha(da),X=I;function ha(t){return t&&t.__esModule?t:{default:t}}function ma(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xa(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function pa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var va=function(t){pa(e,t);function e(a,r){ma(this,e);var i=xa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.substring(1),r));return i.bytes=a.split("").map(function(s){return s.charCodeAt(0)}),i}return ua(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.bytes,i=r.shift()-105,s=X.SET_BY_CODE[i];if(s===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&r.unshift(X.FNC1);var o=e.next(r,1,s);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(i)+o.result+e.getBar((o.checksum+i)%X.MODULO)+e.getBar(X.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var r=this.options.ean128||!1;return typeof r=="string"&&(r=r.toLowerCase()==="true"),r}}],[{key:"getBar",value:function(r){return X.BARS[r]?X.BARS[r].toString():""}},{key:"correctIndex",value:function(r,i){if(i===X.SET_A){var s=r.shift();return s<32?s+64:s-32}else return i===X.SET_B?r.shift()-32:(r.shift()-48)*10+r.shift()-48}},{key:"next",value:function(r,i,s){if(!r.length)return{result:"",checksum:0};var o=void 0,l=void 0;if(r[0]>=200){l=r.shift()-105;var p=X.SWAP[l];p!==void 0?o=e.next(r,i+1,p):((s===X.SET_A||s===X.SET_B)&&l===X.SHIFT&&(r[0]=s===X.SET_A?r[0]>95?r[0]-96:r[0]:r[0]<32?r[0]+96:r[0]),o=e.next(r,i+1,s))}else l=e.correctIndex(r,s),o=e.next(r,i+1,s);var x=e.getBar(l),E=l*i;return{result:x+o.result,checksum:E+o.checksum}}}]),e}(fa.default);ve.default=va;var bt={};Object.defineProperty(bt,"__esModule",{value:!0});var ae=I,Ar=function(e){return e.match(new RegExp("^"+ae.A_CHARS+"*"))[0].length},Ir=function(e){return e.match(new RegExp("^"+ae.B_CHARS+"*"))[0].length},Tr=function(e){return e.match(new RegExp("^"+ae.C_CHARS+"*"))[0]};function _t(t,e){var a=e?ae.A_CHARS:ae.B_CHARS,r=t.match(new RegExp("^("+a+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(r)return r[1]+"Ì"+Mr(t.substring(r[1].length));var i=t.match(new RegExp("^"+a+"+"))[0];return i.length===t.length?t:i+String.fromCharCode(e?205:206)+_t(t.substring(i.length),!e)}function Mr(t){var e=Tr(t),a=e.length;if(a===t.length)return t;t=t.substring(a);var r=Ar(t)>=Ir(t);return e+String.fromCharCode(r?206:205)+_t(t,r)}bt.default=function(t){var e=void 0,a=Tr(t).length;if(a>=2)e=ae.C_START_CHAR+Mr(t);else{var r=Ar(t)>Ir(t);e=(r?ae.A_START_CHAR:ae.B_START_CHAR)+_t(t,r)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(i,s){return"Ë"+s})};Object.defineProperty(yt,"__esModule",{value:!0});var ga=ve,ya=Rr(ga),ba=bt,_a=Rr(ba);function Rr(t){return t&&t.__esModule?t:{default:t}}function ja(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function it(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function wa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Na=function(t){wa(e,t);function e(a,r){if(ja(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(a))var i=it(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,_a.default)(a),r));else var i=it(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return it(i)}return e}(ya.default);yt.default=Na;var jt={};Object.defineProperty(jt,"__esModule",{value:!0});var Ea=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Oa=ve,Sa=ka(Oa),ir=I;function ka(t){return t&&t.__esModule?t:{default:t}}function $a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pa(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ca(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Aa=function(t){Ca(e,t);function e(a,r){return $a(this,e),Pa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,ir.A_START_CHAR+a,r))}return Ea(e,[{key:"valid",value:function(){return new RegExp("^"+ir.A_CHARS+"+$").test(this.data)}}]),e}(Sa.default);jt.default=Aa;var wt={};Object.defineProperty(wt,"__esModule",{value:!0});var Ia=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ta=ve,Ma=Ra(Ta),sr=I;function Ra(t){return t&&t.__esModule?t:{default:t}}function Da(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ba(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function La(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Fa=function(t){La(e,t);function e(a,r){return Da(this,e),Ba(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,sr.B_START_CHAR+a,r))}return Ia(e,[{key:"valid",value:function(){return new RegExp("^"+sr.B_CHARS+"+$").test(this.data)}}]),e}(Ma.default);wt.default=Fa;var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});var Ua=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ga=ve,za=Va(Ga),or=I;function Va(t){return t&&t.__esModule?t:{default:t}}function Ha(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qa(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Xa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Wa=function(t){Xa(e,t);function e(a,r){return Ha(this,e),qa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,or.C_START_CHAR+a,r))}return Ua(e,[{key:"valid",value:function(){return new RegExp("^"+or.C_CHARS+"+$").test(this.data)}}]),e}(za.default);Nt.default=Wa;Object.defineProperty(Z,"__esModule",{value:!0});Z.CODE128C=Z.CODE128B=Z.CODE128A=Z.CODE128=void 0;var Ya=yt,Ja=Xe(Ya),Ka=jt,Qa=Xe(Ka),Za=wt,ei=Xe(Za),ti=Nt,ri=Xe(ti);function Xe(t){return t&&t.__esModule?t:{default:t}}Z.CODE128=Ja.default;Z.CODE128A=Qa.default;Z.CODE128B=ei.default;Z.CODE128C=ri.default;var q={},Et={},J={};Object.defineProperty(J,"__esModule",{value:!0});J.SIDE_BIN="101";J.MIDDLE_BIN="01010";J.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};J.EAN2_STRUCTURE=["LL","LG","GL","GG"];J.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];J.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var We={},le={};Object.defineProperty(le,"__esModule",{value:!0});var ni=J,ai=function(e,a,r){var i=e.split("").map(function(o,l){return ni.BINARIES[a[l]]}).map(function(o,l){return o?o[e[l]]:""});if(r){var s=e.length-1;i=i.map(function(o,l){return l<s?o+r:o})}return i.join("")};le.default=ai;Object.defineProperty(We,"__esModule",{value:!0});var ii=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),de=J,si=le,lr=Dr(si),oi=V,li=Dr(oi);function Dr(t){return t&&t.__esModule?t:{default:t}}function ci(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ui(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function di(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var fi=function(t){di(e,t);function e(a,r){ci(this,e);var i=ui(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.fontSize=!r.flat&&r.fontSize>r.width*10?r.width*10:r.fontSize,i.guardHeight=r.height+i.fontSize/2+r.textMargin,i}return ii(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(r,i){return this.text.substr(r,i)}},{key:"leftEncode",value:function(r,i){return(0,lr.default)(r,i)}},{key:"rightText",value:function(r,i){return this.text.substr(r,i)}},{key:"rightEncode",value:function(r,i){return(0,lr.default)(r,i)}},{key:"encodeGuarded",value:function(){var r={fontSize:this.fontSize},i={height:this.guardHeight};return[{data:de.SIDE_BIN,options:i},{data:this.leftEncode(),text:this.leftText(),options:r},{data:de.MIDDLE_BIN,options:i},{data:this.rightEncode(),text:this.rightText(),options:r},{data:de.SIDE_BIN,options:i}]}},{key:"encodeFlat",value:function(){var r=[de.SIDE_BIN,this.leftEncode(),de.MIDDLE_BIN,this.rightEncode(),de.SIDE_BIN];return{data:r.join(""),text:this.text}}}]),e}(li.default);We.default=fi;Object.defineProperty(Et,"__esModule",{value:!0});var hi=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Se=function t(e,a,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,a);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,a,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},mi=J,xi=We,pi=vi(xi);function vi(t){return t&&t.__esModule?t:{default:t}}function gi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function bi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var cr=function(e){var a=e.substr(0,12).split("").map(function(r){return+r}).reduce(function(r,i,s){return s%2?r+i*3:r+i},0);return(10-a%10)%10},_i=function(t){bi(e,t);function e(a,r){gi(this,e),a.search(/^[0-9]{12}$/)!==-1&&(a+=cr(a));var i=yi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.lastChar=r.lastChar,i}return hi(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===cr(this.data)}},{key:"leftText",value:function(){return Se(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var r=this.data.substr(1,6),i=mi.EAN13_STRUCTURE[this.data[0]];return Se(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,i)}},{key:"rightText",value:function(){return Se(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var r=this.data.substr(7,6);return Se(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRRRR")}},{key:"encodeGuarded",value:function(){var r=Se(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(r.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(r.push({data:"00"}),r.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),r}}]),e}(pi.default);Et.default=_i;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});var ji=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),De=function t(e,a,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,a);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,a,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},wi=We,Ni=Ei(wi);function Ei(t){return t&&t.__esModule?t:{default:t}}function Oi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Si(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ki(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ur=function(e){var a=e.substr(0,7).split("").map(function(r){return+r}).reduce(function(r,i,s){return s%2?r+i:r+i*3},0);return(10-a%10)%10},$i=function(t){ki(e,t);function e(a,r){return Oi(this,e),a.search(/^[0-9]{7}$/)!==-1&&(a+=ur(a)),Si(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return ji(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===ur(this.data)}},{key:"leftText",value:function(){return De(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var r=this.data.substr(0,4);return De(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,"LLLL")}},{key:"rightText",value:function(){return De(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var r=this.data.substr(4,4);return De(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRR")}}]),e}(Ni.default);Ot.default=$i;var St={};Object.defineProperty(St,"__esModule",{value:!0});var Pi=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ci=J,Ai=le,Ii=Br(Ai),Ti=V,Mi=Br(Ti);function Br(t){return t&&t.__esModule?t:{default:t}}function Ri(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Di(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Bi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Li=function(e){var a=e.split("").map(function(r){return+r}).reduce(function(r,i,s){return s%2?r+i*9:r+i*3},0);return a%10},Fi=function(t){Bi(e,t);function e(a,r){return Ri(this,e),Di(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Pi(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var r=Ci.EAN5_STRUCTURE[Li(this.data)];return{data:"1011"+(0,Ii.default)(this.data,r,"01"),text:this.text}}}]),e}(Mi.default);St.default=Fi;var kt={};Object.defineProperty(kt,"__esModule",{value:!0});var Ui=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Gi=J,zi=le,Vi=Lr(zi),Hi=V,qi=Lr(Hi);function Lr(t){return t&&t.__esModule?t:{default:t}}function Xi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Yi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ji=function(t){Yi(e,t);function e(a,r){return Xi(this,e),Wi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Ui(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var r=Gi.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,Vi.default)(this.data,r,"01"),text:this.text}}}]),e}(qi.default);kt.default=Ji;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});var Ki=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();Ae.checksum=dt;var Qi=le,fe=Fr(Qi),Zi=V,es=Fr(Zi);function Fr(t){return t&&t.__esModule?t:{default:t}}function ts(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rs(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ns(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var as=function(t){ns(e,t);function e(a,r){ts(this,e),a.search(/^[0-9]{11}$/)!==-1&&(a+=dt(a));var i=rs(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.displayValue=r.displayValue,r.fontSize>r.width*10?i.fontSize=r.width*10:i.fontSize=r.fontSize,i.guardHeight=r.height+i.fontSize/2+r.textMargin,i}return Ki(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==dt(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=(0,fe.default)(this.data.substr(0,6),"LLLLLL"),r+="01010",r+=(0,fe.default)(this.data.substr(6,6),"RRRRRR"),r+="101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101"+(0,fe.default)(this.data[0],"L"),options:{height:this.guardHeight}}),r.push({data:(0,fe.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),r.push({data:"01010",options:{height:this.guardHeight}}),r.push({data:(0,fe.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),r.push({data:(0,fe.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),r}}]),e}(es.default);function dt(t){var e=0,a;for(a=1;a<11;a+=2)e+=parseInt(t[a]);for(a=0;a<11;a+=2)e+=parseInt(t[a])*3;return(10-e%10)%10}Ae.default=as;var $t={};Object.defineProperty($t,"__esModule",{value:!0});var is=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ss=le,os=Ur(ss),ls=V,cs=Ur(ls),us=Ae;function Ur(t){return t&&t.__esModule?t:{default:t}}function ds(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function st(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function fs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var hs=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],ms=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],xs=function(t){fs(e,t);function e(a,r){ds(this,e);var i=st(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));if(i.isValid=!1,a.search(/^[0-9]{6}$/)!==-1)i.middleDigits=a,i.upcA=dr(a,"0"),i.text=r.text||""+i.upcA[0]+a+i.upcA[i.upcA.length-1],i.isValid=!0;else if(a.search(/^[01][0-9]{7}$/)!==-1)if(i.middleDigits=a.substring(1,a.length-1),i.upcA=dr(i.middleDigits,a[0]),i.upcA[i.upcA.length-1]===a[a.length-1])i.isValid=!0;else return st(i);else return st(i);return i.displayValue=r.displayValue,r.fontSize>r.width*10?i.fontSize=r.width*10:i.fontSize=r.fontSize,i.guardHeight=r.height+i.fontSize/2+r.textMargin,i}return is(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=this.encodeMiddleDigits(),r+="010101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101",options:{height:this.guardHeight}}),r.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),r.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),r}},{key:"encodeMiddleDigits",value:function(){var r=this.upcA[0],i=this.upcA[this.upcA.length-1],s=ms[parseInt(i)][parseInt(r)];return(0,os.default)(this.middleDigits,s)}}]),e}(cs.default);function dr(t,e){for(var a=parseInt(t[t.length-1]),r=hs[a],i="",s=0,o=0;o<r.length;o++){var l=r[o];l==="X"?i+=t[s++]:i+=l}return i=""+e+i,""+i+(0,us.checksum)(i)}$t.default=xs;Object.defineProperty(q,"__esModule",{value:!0});q.UPCE=q.UPC=q.EAN2=q.EAN5=q.EAN8=q.EAN13=void 0;var ps=Et,vs=ge(ps),gs=Ot,ys=ge(gs),bs=St,_s=ge(bs),js=kt,ws=ge(js),Ns=Ae,Es=ge(Ns),Os=$t,Ss=ge(Os);function ge(t){return t&&t.__esModule?t:{default:t}}q.EAN13=vs.default;q.EAN8=ys.default;q.EAN5=_s.default;q.EAN2=ws.default;q.UPC=Es.default;q.UPCE=Ss.default;var xe={},Ye={},Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.START_BIN="1010";Ie.END_BIN="11101";Ie.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(Ye,"__esModule",{value:!0});var ks=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Be=Ie,$s=V,Ps=Cs($s);function Cs(t){return t&&t.__esModule?t:{default:t}}function As(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Is(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ts(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ms=function(t){Ts(e,t);function e(){return As(this,e),Is(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ks(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var r=this,i=this.data.match(/.{2}/g).map(function(s){return r.encodePair(s)}).join("");return{data:Be.START_BIN+i+Be.END_BIN,text:this.text}}},{key:"encodePair",value:function(r){var i=Be.BINARIES[r[1]];return Be.BINARIES[r[0]].split("").map(function(s,o){return(s==="1"?"111":"1")+(i[o]==="1"?"000":"0")}).join("")}}]),e}(Ps.default);Ye.default=Ms;var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});var Rs=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ds=Ye,Bs=Ls(Ds);function Ls(t){return t&&t.__esModule?t:{default:t}}function Fs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Us(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Gs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var fr=function(e){var a=e.substr(0,13).split("").map(function(r){return parseInt(r,10)}).reduce(function(r,i,s){return r+i*(3-s%2*2)},0);return Math.ceil(a/10)*10-a},zs=function(t){Gs(e,t);function e(a,r){return Fs(this,e),a.search(/^[0-9]{13}$/)!==-1&&(a+=fr(a)),Us(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Rs(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===fr(this.data)}}]),e}(Bs.default);Pt.default=zs;Object.defineProperty(xe,"__esModule",{value:!0});xe.ITF14=xe.ITF=void 0;var Vs=Ye,Hs=Gr(Vs),qs=Pt,Xs=Gr(qs);function Gr(t){return t&&t.__esModule?t:{default:t}}xe.ITF=Hs.default;xe.ITF14=Xs.default;var Y={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});var Ws=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ys=V,Js=Ks(Ys);function Ks(t){return t&&t.__esModule?t:{default:t}}function Qs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zs(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function eo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var to=function(t){eo(e,t);function e(a,r){return Qs(this,e),Zs(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Ws(e,[{key:"encode",value:function(){for(var r="110",i=0;i<this.data.length;i++){var s=parseInt(this.data[i]),o=s.toString(2);o=ro(o,4-o.length);for(var l=0;l<o.length;l++)r+=o[l]=="0"?"100":"110"}return r+="1001",{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(Js.default);function ro(t,e){for(var a=0;a<e;a++)t="0"+t;return t}ce.default=to;var Ct={},ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.mod10=no;ue.mod11=ao;function no(t){for(var e=0,a=0;a<t.length;a++){var r=parseInt(t[a]);(a+t.length)%2===0?e+=r:e+=r*2%10+Math.floor(r*2/10)}return(10-e%10)%10}function ao(t){for(var e=0,a=[2,3,4,5,6,7],r=0;r<t.length;r++){var i=parseInt(t[t.length-1-r]);e+=a[r%a.length]*i}return(11-e%11)%11}Object.defineProperty(Ct,"__esModule",{value:!0});var io=ce,so=lo(io),oo=ue;function lo(t){return t&&t.__esModule?t:{default:t}}function co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function fo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ho=function(t){fo(e,t);function e(a,r){return co(this,e),uo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a+(0,oo.mod10)(a),r))}return e}(so.default);Ct.default=ho;var At={};Object.defineProperty(At,"__esModule",{value:!0});var mo=ce,xo=vo(mo),po=ue;function vo(t){return t&&t.__esModule?t:{default:t}}function go(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function bo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _o=function(t){bo(e,t);function e(a,r){return go(this,e),yo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a+(0,po.mod11)(a),r))}return e}(xo.default);At.default=_o;var It={};Object.defineProperty(It,"__esModule",{value:!0});var jo=ce,wo=No(jo),hr=ue;function No(t){return t&&t.__esModule?t:{default:t}}function Eo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function So(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ko=function(t){So(e,t);function e(a,r){return Eo(this,e),a+=(0,hr.mod10)(a),a+=(0,hr.mod10)(a),Oo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return e}(wo.default);It.default=ko;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});var $o=ce,Po=Co($o),mr=ue;function Co(t){return t&&t.__esModule?t:{default:t}}function Ao(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Io(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function To(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Mo=function(t){To(e,t);function e(a,r){return Ao(this,e),a+=(0,mr.mod11)(a),a+=(0,mr.mod10)(a),Io(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return e}(Po.default);Tt.default=Mo;Object.defineProperty(Y,"__esModule",{value:!0});Y.MSI1110=Y.MSI1010=Y.MSI11=Y.MSI10=Y.MSI=void 0;var Ro=ce,Do=Te(Ro),Bo=Ct,Lo=Te(Bo),Fo=At,Uo=Te(Fo),Go=It,zo=Te(Go),Vo=Tt,Ho=Te(Vo);function Te(t){return t&&t.__esModule?t:{default:t}}Y.MSI=Do.default;Y.MSI10=Lo.default;Y.MSI11=Uo.default;Y.MSI1010=zo.default;Y.MSI1110=Ho.default;var Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.pharmacode=void 0;var qo=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Xo=V,Wo=Yo(Xo);function Yo(t){return t&&t.__esModule?t:{default:t}}function Jo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ko(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Qo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Zo=function(t){Qo(e,t);function e(a,r){Jo(this,e);var i=Ko(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.number=parseInt(a,10),i}return qo(e,[{key:"encode",value:function(){for(var r=this.number,i="";!isNaN(r)&&r!=0;)r%2===0?(i="11100"+i,r=(r-2)/2):(i="100"+i,r=(r-1)/2);return i=i.slice(0,-2),{data:i,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(Wo.default);Je.pharmacode=Zo;var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.codabar=void 0;var el=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),tl=V,rl=nl(tl);function nl(t){return t&&t.__esModule?t:{default:t}}function al(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function il(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function sl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ol=function(t){sl(e,t);function e(a,r){al(this,e),a.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(a="A"+a+"A");var i=il(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.toUpperCase(),r));return i.text=i.options.text||i.text.replace(/[A-D]/g,""),i}return el(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var r=[],i=this.getEncodings(),s=0;s<this.data.length;s++)r.push(i[this.data.charAt(s)]),s!==this.data.length-1&&r.push("0");return{text:this.text,data:r.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(rl.default);Ke.codabar=ol;var pe={},Qe={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","ÿ"];Me.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];Me.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]};Object.defineProperty(Qe,"__esModule",{value:!0});var ll=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Le=Me,cl=V,ul=dl(cl);function dl(t){return t&&t.__esModule?t:{default:t}}function fl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ml(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var xl=function(t){ml(e,t);function e(a,r){return fl(this,e),hl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return ll(e,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.data.split("").flatMap(function(l){return Le.MULTI_SYMBOLS[l]||l}),i=r.map(function(l){return e.getEncoding(l)}).join(""),s=e.checksum(r,20),o=e.checksum(r.concat(s),15);return{text:this.text,data:e.getEncoding("ÿ")+i+e.getEncoding(s)+e.getEncoding(o)+e.getEncoding("ÿ")+"1"}}}],[{key:"getEncoding",value:function(r){return Le.BINARIES[e.symbolValue(r)]}},{key:"getSymbol",value:function(r){return Le.SYMBOLS[r]}},{key:"symbolValue",value:function(r){return Le.SYMBOLS.indexOf(r)}},{key:"checksum",value:function(r,i){var s=r.slice().reverse().reduce(function(o,l,p){var x=p%i+1;return o+e.symbolValue(l)*x},0);return e.getSymbol(s%47)}}]),e}(ul.default);Qe.default=xl;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});var pl=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),vl=Qe,gl=yl(vl);function yl(t){return t&&t.__esModule?t:{default:t}}function bl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function jl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wl=function(t){jl(e,t);function e(a,r){return bl(this,e),_l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return pl(e,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),e}(gl.default);Mt.default=wl;Object.defineProperty(pe,"__esModule",{value:!0});pe.CODE93FullASCII=pe.CODE93=void 0;var Nl=Qe,El=zr(Nl),Ol=Mt,Sl=zr(Ol);function zr(t){return t&&t.__esModule?t:{default:t}}pe.CODE93=El.default;pe.CODE93FullASCII=Sl.default;var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.GenericBarcode=void 0;var kl=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),$l=V,Pl=Cl($l);function Cl(t){return t&&t.__esModule?t:{default:t}}function Al(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Il(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Tl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ml=function(t){Tl(e,t);function e(a,r){return Al(this,e),Il(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return kl(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(Pl.default);Ze.GenericBarcode=Ml;Object.defineProperty(gt,"__esModule",{value:!0});var Rl=qe,Fe=Z,he=q,xr=xe,ke=Y,Dl=Je,Bl=Ke,pr=pe,Ll=Ze;gt.default={CODE39:Rl.CODE39,CODE128:Fe.CODE128,CODE128A:Fe.CODE128A,CODE128B:Fe.CODE128B,CODE128C:Fe.CODE128C,EAN13:he.EAN13,EAN8:he.EAN8,EAN5:he.EAN5,EAN2:he.EAN2,UPC:he.UPC,UPCE:he.UPCE,ITF14:xr.ITF14,ITF:xr.ITF,MSI:ke.MSI,MSI10:ke.MSI10,MSI11:ke.MSI11,MSI1010:ke.MSI1010,MSI1110:ke.MSI1110,pharmacode:Dl.pharmacode,codabar:Bl.codabar,CODE93:pr.CODE93,CODE93FullASCII:pr.CODE93FullASCII,GenericBarcode:Ll.GenericBarcode};var ye={};Object.defineProperty(ye,"__esModule",{value:!0});var Fl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};ye.default=function(t,e){return Fl({},t,e)};var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.default=Ul;function Ul(t){var e=[];function a(r){if(Array.isArray(r))for(var i=0;i<r.length;i++)a(r[i]);else r.text=r.text||"",r.data=r.data||"",e.push(r)}return a(t),e}var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.default=Gl;function Gl(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var Bt={},Lt={},et={};Object.defineProperty(et,"__esModule",{value:!0});et.default=zl;function zl(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var a in e)e.hasOwnProperty(a)&&(a=e[a],typeof t[a]=="string"&&(t[a]=parseInt(t[a],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var tt={};Object.defineProperty(tt,"__esModule",{value:!0});var Vl={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};tt.default=Vl;Object.defineProperty(Lt,"__esModule",{value:!0});var Hl=et,ql=Vr(Hl),Xl=tt,vr=Vr(Xl);function Vr(t){return t&&t.__esModule?t:{default:t}}function Wl(t){var e={};for(var a in vr.default)vr.default.hasOwnProperty(a)&&(t.hasAttribute("jsbarcode-"+a.toLowerCase())&&(e[a]=t.getAttribute("jsbarcode-"+a.toLowerCase())),t.hasAttribute("data-"+a.toLowerCase())&&(e[a]=t.getAttribute("data-"+a.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,ql.default)(e),e}Lt.default=Wl;var Ft={},Ut={},W={};Object.defineProperty(W,"__esModule",{value:!0});W.getTotalWidthOfEncodings=W.calculateEncodingAttributes=W.getBarcodePadding=W.getEncodingHeight=W.getMaximumHeightOfEncodings=void 0;var Yl=ye,Jl=Kl(Yl);function Kl(t){return t&&t.__esModule?t:{default:t}}function Hr(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function qr(t,e,a){if(a.displayValue&&e<t){if(a.textAlign=="center")return Math.floor((t-e)/2);if(a.textAlign=="left")return 0;if(a.textAlign=="right")return Math.floor(t-e)}return 0}function Ql(t,e,a){for(var r=0;r<t.length;r++){var i=t[r],s=(0,Jl.default)(e,i.options),o;s.displayValue?o=tc(i.text,s,a):o=0;var l=i.data.length*s.width;i.width=Math.ceil(Math.max(o,l)),i.height=Hr(i,s),i.barcodePadding=qr(o,l,s)}}function Zl(t){for(var e=0,a=0;a<t.length;a++)e+=t[a].width;return e}function ec(t){for(var e=0,a=0;a<t.length;a++)t[a].height>e&&(e=t[a].height);return e}function tc(t,e,a){var r;if(a)r=a;else if(typeof document<"u")r=document.createElement("canvas").getContext("2d");else return 0;r.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var i=r.measureText(t);if(!i)return 0;var s=i.width;return s}W.getMaximumHeightOfEncodings=ec;W.getEncodingHeight=Hr;W.getBarcodePadding=qr;W.calculateEncodingAttributes=Ql;W.getTotalWidthOfEncodings=Zl;Object.defineProperty(Ut,"__esModule",{value:!0});var rc=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),nc=ye,ac=ic(nc),ot=W;function ic(t){return t&&t.__esModule?t:{default:t}}function sc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var oc=function(){function t(e,a,r){sc(this,t),this.canvas=e,this.encodings=a,this.options=r}return rc(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var a=0;a<this.encodings.length;a++){var r=(0,ac.default)(this.options,this.encodings[a].options);this.drawCanvasBarcode(r,this.encodings[a]),this.drawCanvasText(r,this.encodings[a]),this.moveCanvasDrawing(this.encodings[a])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var a=this.canvas.getContext("2d");a.save(),(0,ot.calculateEncodingAttributes)(this.encodings,this.options,a);var r=(0,ot.getTotalWidthOfEncodings)(this.encodings),i=(0,ot.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=r+this.options.marginLeft+this.options.marginRight,this.canvas.height=i,a.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(a.fillStyle=this.options.background,a.fillRect(0,0,this.canvas.width,this.canvas.height)),a.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(a,r){var i=this.canvas.getContext("2d"),s=r.data,o;a.textPosition=="top"?o=a.marginTop+a.fontSize+a.textMargin:o=a.marginTop,i.fillStyle=a.lineColor;for(var l=0;l<s.length;l++){var p=l*a.width+r.barcodePadding;s[l]==="1"?i.fillRect(p,o,a.width,a.height):s[l]&&i.fillRect(p,o,a.width,a.height*s[l])}}},{key:"drawCanvasText",value:function(a,r){var i=this.canvas.getContext("2d"),s=a.fontOptions+" "+a.fontSize+"px "+a.font;if(a.displayValue){var o,l;a.textPosition=="top"?l=a.marginTop+a.fontSize-a.textMargin:l=a.height+a.textMargin+a.marginTop+a.fontSize,i.font=s,a.textAlign=="left"||r.barcodePadding>0?(o=0,i.textAlign="left"):a.textAlign=="right"?(o=r.width-1,i.textAlign="right"):(o=r.width/2,i.textAlign="center"),i.fillText(r.text,o,l)}}},{key:"moveCanvasDrawing",value:function(a){var r=this.canvas.getContext("2d");r.translate(a.width,0)}},{key:"restoreCanvas",value:function(){var a=this.canvas.getContext("2d");a.restore()}}]),t}();Ut.default=oc;var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});var lc=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),cc=ye,uc=dc(cc),lt=W;function dc(t){return t&&t.__esModule?t:{default:t}}function fc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Ue="http://www.w3.org/2000/svg",hc=function(){function t(e,a,r){fc(this,t),this.svg=e,this.encodings=a,this.options=r,this.document=r.xmlDocument||document}return lc(t,[{key:"render",value:function(){var a=this.options.marginLeft;this.prepareSVG();for(var r=0;r<this.encodings.length;r++){var i=this.encodings[r],s=(0,uc.default)(this.options,i.options),o=this.createGroup(a,s.marginTop,this.svg);this.setGroupOptions(o,s),this.drawSvgBarcode(o,s,i),this.drawSVGText(o,s,i),a+=i.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,lt.calculateEncodingAttributes)(this.encodings,this.options);var a=(0,lt.getTotalWidthOfEncodings)(this.encodings),r=(0,lt.getMaximumHeightOfEncodings)(this.encodings),i=a+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(i,r),this.options.background&&this.drawRect(0,0,i,r,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(a,r,i){var s=i.data,o;r.textPosition=="top"?o=r.fontSize+r.textMargin:o=0;for(var l=0,p=0,x=0;x<s.length;x++)p=x*r.width+i.barcodePadding,s[x]==="1"?l++:l>0&&(this.drawRect(p-r.width*l,o,r.width*l,r.height,a),l=0);l>0&&this.drawRect(p-r.width*(l-1),o,r.width*l,r.height,a)}},{key:"drawSVGText",value:function(a,r,i){var s=this.document.createElementNS(Ue,"text");if(r.displayValue){var o,l;s.setAttribute("style","font:"+r.fontOptions+" "+r.fontSize+"px "+r.font),r.textPosition=="top"?l=r.fontSize-r.textMargin:l=r.height+r.textMargin+r.fontSize,r.textAlign=="left"||i.barcodePadding>0?(o=0,s.setAttribute("text-anchor","start")):r.textAlign=="right"?(o=i.width-1,s.setAttribute("text-anchor","end")):(o=i.width/2,s.setAttribute("text-anchor","middle")),s.setAttribute("x",o),s.setAttribute("y",l),s.appendChild(this.document.createTextNode(i.text)),a.appendChild(s)}}},{key:"setSvgAttributes",value:function(a,r){var i=this.svg;i.setAttribute("width",a+"px"),i.setAttribute("height",r+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 "+a+" "+r),i.setAttribute("xmlns",Ue),i.setAttribute("version","1.1"),i.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(a,r,i){var s=this.document.createElementNS(Ue,"g");return s.setAttribute("transform","translate("+a+", "+r+")"),i.appendChild(s),s}},{key:"setGroupOptions",value:function(a,r){a.setAttribute("style","fill:"+r.lineColor+";")}},{key:"drawRect",value:function(a,r,i,s,o){var l=this.document.createElementNS(Ue,"rect");return l.setAttribute("x",a),l.setAttribute("y",r),l.setAttribute("width",i),l.setAttribute("height",s),o.appendChild(l),l}}]),t}();Gt.default=hc;var zt={};Object.defineProperty(zt,"__esModule",{value:!0});var mc=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();function xc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var pc=function(){function t(e,a,r){xc(this,t),this.object=e,this.encodings=a,this.options=r}return mc(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();zt.default=pc;Object.defineProperty(Ft,"__esModule",{value:!0});var vc=Ut,gc=Vt(vc),yc=Gt,bc=Vt(yc),_c=zt,jc=Vt(_c);function Vt(t){return t&&t.__esModule?t:{default:t}}Ft.default={CanvasRenderer:gc.default,SVGRenderer:bc.default,ObjectRenderer:jc.default};var be={};Object.defineProperty(be,"__esModule",{value:!0});function Ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Xt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wc=function(t){Xt(e,t);function e(a,r){Ht(this,e);var i=qt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="InvalidInputException",i.symbology=a,i.input=r,i.message='"'+i.input+'" is not a valid input for '+i.symbology,i}return e}(Error),Nc=function(t){Xt(e,t);function e(){Ht(this,e);var a=qt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="InvalidElementException",a.message="Not supported type to render on",a}return e}(Error),Ec=function(t){Xt(e,t);function e(){Ht(this,e);var a=qt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="NoElementException",a.message="No element to render on.",a}return e}(Error);be.InvalidInputException=wc;be.InvalidElementException=Nc;be.NoElementException=Ec;Object.defineProperty(Bt,"__esModule",{value:!0});var Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sc=Lt,ft=Xr(Sc),kc=Ft,$e=Xr(kc),$c=be;function Xr(t){return t&&t.__esModule?t:{default:t}}function Wt(t){if(typeof t=="string")return Pc(t);if(Array.isArray(t)){for(var e=[],a=0;a<t.length;a++)e.push(Wt(t[a]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return Cc(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,ft.default)(t),renderer:$e.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,ft.default)(t),renderer:$e.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:$e.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":Oc(t))==="object"&&!t.nodeName)return{element:t,renderer:$e.default.ObjectRenderer};throw new $c.InvalidElementException}}function Pc(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var a=[],r=0;r<e.length;r++)a.push(Wt(e[r]));return a}}function Cc(t){var e=document.createElement("canvas");return{element:e,options:(0,ft.default)(t),renderer:$e.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}Bt.default=Wt;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});var Ac=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();function Ic(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Tc=function(){function t(e){Ic(this,t),this.api=e}return Ac(t,[{key:"handleCatch",value:function(a){if(a.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw a.message;else throw a;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(a){try{var r=a.apply(void 0,arguments);return this.api._options.valid(!0),r}catch(i){return this.handleCatch(i),this.api}}}]),t}();Yt.default=Tc;var Mc=gt,oe=ie(Mc),Rc=ye,Re=ie(Rc),Dc=Rt,Wr=ie(Dc),Bc=Dt,gr=ie(Bc),Lc=Bt,Fc=ie(Lc),Uc=et,Gc=ie(Uc),zc=Yt,Vc=ie(zc),Yr=be,Hc=tt,Jr=ie(Hc);function ie(t){return t&&t.__esModule?t:{default:t}}var te=function(){},rt=function(e,a,r){var i=new te;if(typeof e>"u")throw Error("No element to render on was provided.");return i._renderProperties=(0,Fc.default)(e),i._encodings=[],i._options=Jr.default,i._errorHandler=new Vc.default(i),typeof a<"u"&&(r=r||{},r.format||(r.format=Qr()),i.options(r)[r.format](a,r).render()),i};rt.getModule=function(t){return oe.default[t]};for(var yr in oe.default)oe.default.hasOwnProperty(yr)&&qc(oe.default,yr);function qc(t,e){te.prototype[e]=te.prototype[e.toUpperCase()]=te.prototype[e.toLowerCase()]=function(a,r){var i=this;return i._errorHandler.wrapBarcodeCall(function(){r.text=typeof r.text>"u"?void 0:""+r.text;var s=(0,Re.default)(i._options,r);s=(0,Gc.default)(s);var o=t[e],l=Kr(a,o,s);return i._encodings.push(l),i})}}function Kr(t,e,a){t=""+t;var r=new e(t,a);if(!r.valid())throw new Yr.InvalidInputException(r.constructor.name,t);var i=r.encode();i=(0,Wr.default)(i);for(var s=0;s<i.length;s++)i[s].options=(0,Re.default)(a,i[s].options);return i}function Qr(){return oe.default.CODE128?"CODE128":Object.keys(oe.default)[0]}te.prototype.options=function(t){return this._options=(0,Re.default)(this._options,t),this};te.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};te.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var a=(0,Re.default)(this._options,t.options);a.format=="auto"&&(a.format=Qr()),this._errorHandler.wrapBarcodeCall(function(){var r=a.value,i=oe.default[a.format.toUpperCase()],s=Kr(r,i,a);ht(t,s,a)})}}};te.prototype.render=function(){if(!this._renderProperties)throw new Yr.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)ht(this._renderProperties[t],this._encodings,this._options);else ht(this._renderProperties,this._encodings,this._options);return this};te.prototype._defaults=Jr.default;function ht(t,e,a){e=(0,Wr.default)(e);for(var r=0;r<e.length;r++)e[r].options=(0,Re.default)(a,e[r].options),(0,gr.default)(e[r].options);(0,gr.default)(a);var i=t.renderer,s=new i(t.element,e,a);s.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=rt);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var a=[];return jQuery(this).each(function(){a.push(this)}),rt(a,t,e)});var Xc=rt;const Zr=rn(Xc),Wc=({product:t,barcodeValue:e,format:a="CODE128",onClose:r})=>{const i=g.useRef(null),[s,o]=g.useState(!1),[l,p]=g.useState(a),[x,E]=g.useState(e||(t==null?void 0:t.barcode)||""),u=[{value:"CODE128",label:"CODE128 (Recommended)"},{value:"CODE39",label:"CODE39"},{value:"EAN13",label:"EAN-13"},{value:"EAN8",label:"EAN-8"},{value:"UPC",label:"UPC-A"},{value:"ITF14",label:"ITF-14"},{value:"MSI",label:"MSI"},{value:"pharmacode",label:"Pharmacode"},{value:"codabar",label:"Codabar"}];g.useEffect(()=>{N()},[x,l]);const N=()=>{if(!(!i.current||!x))try{Zr(i.current,x,{format:l,width:2,height:100,displayValue:!0,fontSize:16,margin:10,background:"#ffffff",lineColor:"#000000"})}catch{B.error(`Invalid barcode format for ${l}. Please try a different format.`)}},y=()=>{if(!i.current)return;const _=i.current.toDataURL("image/png"),P=document.createElement("a");P.download=`barcode-${x}.png`,P.href=_,P.click(),B.success("Barcode downloaded successfully")},$=()=>{x&&navigator.clipboard.writeText(x).then(()=>{o(!0),B.success("Barcode copied to clipboard"),setTimeout(()=>o(!1),2e3)}).catch(()=>{B.error("Failed to copy barcode")})},T=()=>{if(!i.current)return;const c=i.current,_=window.open("","_blank");_.document.write(`
      <html>
        <head>
          <title>Barcode Print</title>
          <style>
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              min-height: 100vh;
            }
            img {
              max-width: 100%;
              height: auto;
            }
          </style>
        </head>
        <body>
          <img src="${c.toDataURL("image/png")}" alt="Barcode" />
          <script>
            window.onload = function() {
              window.print();
            };
          <\/script>
        </body>
      </html>
    `),_.document.close()},k=()=>{const c=Math.floor(1e12+Math.random()*9e12);E(c.toString())};return!t&&!e?n.jsx("div",{className:"p-4 text-center text-gray-500",children:n.jsx("p",{children:"No product or barcode value provided"})}):n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Or,{className:"h-5 w-5 text-primary-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t?`Barcode for ${t.name}`:"Generate Barcode"})]}),r&&n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(re,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode Value"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",value:x,onChange:c=>E(c.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter barcode value"}),n.jsx("button",{onClick:k,className:"px-3 py-2 text-sm text-primary-600 hover:text-primary-700 border border-primary-300 rounded-md hover:bg-primary-50 transition-colors",children:"Generate Random"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode Format"}),n.jsx("select",{value:l,onChange:c=>p(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:u.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]}),n.jsx("div",{className:"flex justify-center p-4 bg-gray-50 rounded-lg",children:n.jsx("canvas",{ref:i,className:"max-w-full"})}),n.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-4 border-t",children:[n.jsxs("button",{onClick:$,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[s?n.jsx(Rn,{className:"h-4 w-4"}):n.jsx(Fn,{className:"h-4 w-4"}),n.jsx("span",{children:s?"Copied!":"Copy Value"})]}),n.jsxs("button",{onClick:y,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[n.jsx(me,{className:"h-4 w-4"}),n.jsx("span",{children:"Download"})]}),n.jsxs("button",{onClick:T,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[n.jsx(ze,{className:"h-4 w-4"}),n.jsx("span",{children:"Print"})]})]})]})]})},Yc=({products:t=[],onClose:e,initialLabelSize:a="standard"})=>{const[r,i]=g.useState([]),[s,o]=g.useState(a),[l,p]=g.useState("CODE128"),[x,E]=g.useState(!1),[u,N]=g.useState(!0),[y,$]=g.useState(2);g.useRef(null),g.useEffect(()=>{t.length>0&&i(t.map(m=>m._id||m.id))},[t]);const T=m=>{i(M=>M.includes(m)?M.filter(f=>f!==m):[...M,m])},k=()=>{i(t.map(m=>m._id||m.id))},c=()=>{i([])},_=(m,M)=>{const f=document.createElement("canvas");try{return Zr(f,m,{format:M,width:s==="small"?1.5:s==="large"?3:2,height:s==="small"?60:s==="large"?120:80,displayValue:!0,fontSize:s==="small"?12:s==="large"?18:14,margin:5,background:"#ffffff",lineColor:"#000000"}),f}catch{return null}},P=()=>{if(r.length===0){B.error("Please select at least one product");return}const m=t.filter(j=>r.includes(j._id||j.id)),M=window.open("","_blank"),f=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Barcode Labels</title>
          <style>
            @media print {
              @page {
                size: A4;
                margin: 10mm;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 20px;
            }
            .labels-container {
              display: grid;
              grid-template-columns: repeat(${y}, 1fr);
              gap: 10px;
              width: 100%;
            }
            .label {
              border: 1px solid #ddd;
              padding: 10px;
              text-align: center;
              page-break-inside: avoid;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              min-height: ${s==="small"?"80px":s==="large"?"150px":"120px"};
            }
            .label-name {
              font-size: ${s==="small"?"10px":s==="large"?"16px":"12px"};
              font-weight: bold;
              margin-bottom: 5px;
              word-wrap: break-word;
            }
            .label-price {
              font-size: ${s==="small"?"9px":s==="large"?"14px":"11px"};
              color: #666;
              margin-top: 5px;
            }
            .barcode-container {
              margin: 5px 0;
            }
          </style>
        </head>
        <body>
          <div class="labels-container">
            ${m.map(j=>{var D;const O=j.barcode||j.sku||j._id||j.id;if(!O)return"";const C=_(O,l);if(!C)return"";const U=C.toDataURL("image/png");return`
                <div class="label">
                  ${u?`<div class="label-name">${j.name||"Product"}</div>`:""}
                  <div class="barcode-container">
                    <img src="${U}" alt="Barcode" />
                  </div>
                  ${x&&((D=j.pricing)!=null&&D.retail)?`<div class="label-price">$${j.pricing.retail.toFixed(2)}</div>`:""}
                </div>
              `}).join("")}
          </div>
          <script>
            window.onload = function() {
              window.print();
            };
          <\/script>
        </body>
      </html>
    `;M.document.write(f),M.document.close(),B.success(`Printing ${m.length} label(s)`)},F=()=>{if(r.length===0){B.error("Please select at least one product");return}const m=t.filter(j=>r.includes(j._id||j.id)),M=window.open("","_blank"),f=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Barcode Labels</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 20px;
            }
            .labels-container {
              display: grid;
              grid-template-columns: repeat(${y}, 1fr);
              gap: 10px;
              width: 100%;
            }
            .label {
              border: 1px solid #ddd;
              padding: 10px;
              text-align: center;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              min-height: ${s==="small"?"80px":s==="large"?"150px":"120px"};
            }
            .label-name {
              font-size: ${s==="small"?"10px":s==="large"?"16px":"12px"};
              font-weight: bold;
              margin-bottom: 5px;
              word-wrap: break-word;
            }
            .label-price {
              font-size: ${s==="small"?"9px":s==="large"?"14px":"11px"};
              color: #666;
              margin-top: 5px;
            }
            .barcode-container {
              margin: 5px 0;
            }
          </style>
        </head>
        <body>
          <div class="labels-container">
            ${m.map(j=>{var D;const O=j.barcode||j.sku||j._id||j.id;if(!O)return"";const C=_(O,l);if(!C)return"";const U=C.toDataURL("image/png");return`
                <div class="label">
                  ${u?`<div class="label-name">${j.name||"Product"}</div>`:""}
                  <div class="barcode-container">
                    <img src="${U}" alt="Barcode" />
                  </div>
                  ${x&&((D=j.pricing)!=null&&D.retail)?`<div class="label-price">$${j.pricing.retail.toFixed(2)}</div>`:""}
                </div>
              `}).join("")}
          </div>
        </body>
      </html>
    `;M.document.write(f),M.document.close(),B.success("Labels ready for download/print")};return n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-75 flex items-center justify-center p-4",children:n.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ze,{className:"h-5 w-5 text-primary-600"}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Print Barcode Labels"})]}),e&&n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(re,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[n.jsx("div",{className:"lg:col-span-1 space-y-4",children:n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx(nn,{className:"h-4 w-4 text-gray-600"}),n.jsx("h3",{className:"font-medium text-gray-900",children:"Label Settings"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label Size"}),n.jsxs("select",{value:s,onChange:m=>o(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"small",children:"Small"}),n.jsx("option",{value:"standard",children:"Standard"}),n.jsx("option",{value:"large",children:"Large"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode Format"}),n.jsxs("select",{value:l,onChange:m=>p(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"CODE128",children:"CODE128"}),n.jsx("option",{value:"CODE39",children:"CODE39"}),n.jsx("option",{value:"EAN13",children:"EAN-13"}),n.jsx("option",{value:"EAN8",children:"EAN-8"}),n.jsx("option",{value:"UPC",children:"UPC-A"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labels Per Row"}),n.jsxs("select",{value:y,onChange:m=>$(Number(m.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"1",children:"1"}),n.jsx("option",{value:"2",children:"2"}),n.jsx("option",{value:"3",children:"3"}),n.jsx("option",{value:"4",children:"4"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:u,onChange:m=>N(m.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Include Product Name"})]}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:x,onChange:m=>E(m.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Include Price"})]})]})]})]})}),n.jsxs("div",{className:"lg:col-span-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"font-medium text-gray-900",children:["Select Products (",r.length," of ",t.length,")"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:k,className:"text-sm text-primary-600 hover:text-primary-700",children:"Select All"}),n.jsx("span",{className:"text-gray-300",children:"|"}),n.jsx("button",{onClick:c,className:"text-sm text-gray-600 hover:text-gray-700",children:"Deselect All"})]})]}),n.jsx("div",{className:"border rounded-lg max-h-96 overflow-y-auto",children:t.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(Ce,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),n.jsx("p",{children:"No products available"})]}):n.jsx("div",{className:"divide-y",children:t.map(m=>{const M=r.includes(m._id||m.id),f=!!(m.barcode||m.sku);return n.jsxs("label",{className:`flex items-center p-3 cursor-pointer hover:bg-gray-50 ${M?"bg-primary-50":""}`,children:[n.jsx("input",{type:"checkbox",checked:M,onChange:()=>T(m._id||m.id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),n.jsxs("div",{className:"ml-3 flex-1",children:[n.jsx("div",{className:"font-medium text-gray-900",children:m.name}),n.jsx("div",{className:"text-sm text-gray-500",children:f?n.jsx("span",{className:"font-mono",children:m.barcode||m.sku}):n.jsx("span",{className:"text-yellow-600",children:"No barcode"})})]})]},m._id||m.id)})})})]})]})}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 border-t bg-gray-50",children:[e&&n.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:F,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[n.jsx(me,{className:"h-4 w-4"}),n.jsx("span",{children:"Preview"})]}),n.jsxs("button",{onClick:P,disabled:r.length===0,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[n.jsx(ze,{className:"h-4 w-4"}),n.jsx("span",{children:"Print Labels"})]})]})]})})},Jc=({errors:t={},title:e="Please fix the following errors:",showCount:a=!0,collapsible:r=!0,className:i="",onFieldClick:s=null})=>{const[o,l]=an.useState(!0),p=Object.entries(t).filter(([E,u])=>u!=null),x=p.length;return x===0?null:n.jsx("div",{className:`bg-red-50 border border-red-200 rounded-lg p-4 ${i}`,children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(He,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5 mr-3"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h3",{className:"text-sm font-medium text-red-800",children:[e,a&&n.jsxs("span",{className:"ml-2 text-red-600",children:["(",x," ",x===1?"error":"errors",")"]})]}),r&&n.jsx("button",{onClick:()=>l(!o),className:"text-red-600 hover:text-red-800","aria-label":o?"Collapse":"Expand",children:o?n.jsx(pt,{className:"h-4 w-4"}):n.jsx(vt,{className:"h-4 w-4"})})]}),o&&n.jsx("ul",{className:"list-disc list-inside space-y-1",children:p.map(([E,u])=>n.jsxs("li",{className:`text-sm text-red-700 ${s?"cursor-pointer hover:text-red-900 hover:underline":""}`,onClick:()=>s==null?void 0:s(E),children:[n.jsxs("span",{className:"font-medium capitalize",children:[E.replace(/([A-Z])/g," $1").trim(),":"]})," ",u]},E))})]})]})})},Kc=({product:t,isOpen:e,onClose:a,onSave:r,isSubmitting:i,allProducts:s=[],onEditExisting:o,categories:l=[]})=>{const[p,x]=g.useState({name:"",description:"",category:"",status:"active",expiryDate:"",pricing:{cost:"",retail:"",wholesale:""},inventory:{currentStock:"",reorderPoint:""}}),[E,u]=g.useState(!1),[N,y]=g.useState([]),[$,T]=g.useState(null),[k,c]=g.useState({}),_=g.useCallback(f=>{const{name:j,value:O,type:C,checked:U}=f.target;let D=C==="checkbox"?U:O;if(j.includes(".")){const[d,h]=j.split(".");x(b=>({...b,[d]:{...b[d],[h]:D}}))}else x(d=>({...d,[j]:D}));if(j==="name"&&O.length>2&&!t){const d=s.find(h=>h.name.toLowerCase()===O.toLowerCase());if(d)T(d),u(!1),y([]);else{T(null);const h=s.filter(b=>b.name.toLowerCase().includes(O.toLowerCase())).slice(0,3);h.length>0?(y(h),u(!0)):(u(!1),y([]))}}else j==="name"&&(u(!1),y([]),T(null));c(d=>d[j]?{...d,[j]:null}:d)},[t,s]),P=g.useCallback(f=>{const{name:j,value:O}=f.target;j==="name"&&(!O||O.trim()==="")?c(C=>({...C,[j]:"Product name is required"})):j==="name"&&O.length<2?c(C=>({...C,[j]:"Product name must be at least 2 characters"})):c(C=>({...C,[j]:null}))},[]),F=g.useCallback(()=>{const f={};return!p.name||p.name.trim()===""?f.name="Product name is required":p.name.length<2&&(f.name="Product name must be at least 2 characters"),c(f),Object.keys(f).length===0},[p.name]),m=g.useCallback((f={})=>{var O,C,U,D,d;let j="";if(f.expiryDate){const h=new Date(f.expiryDate);isNaN(h.getTime())||(j=h.toISOString().split("T")[0])}x({name:f.name||"",description:f.description||"",category:f.category||"",status:f.status||"active",expiryDate:j,barcode:f.barcode||"",sku:f.sku||"",brand:f.brand||"",pricing:{cost:((O=f.pricing)==null?void 0:O.cost)||"",retail:((C=f.pricing)==null?void 0:C.retail)||"",wholesale:((U=f.pricing)==null?void 0:U.wholesale)||""},inventory:{currentStock:((D=f.inventory)==null?void 0:D.currentStock)||"",reorderPoint:((d=f.inventory)==null?void 0:d.reorderPoint)||""}}),c({})},[]);g.useEffect(()=>{m(t||{})},[t,m]),g.useEffect(()=>{e&&setTimeout(()=>{const f=document.querySelector('input[name="name"]');f&&f.focus()},100)},[e]);const M=f=>{if(f.preventDefault(),!F()){const O=Object.keys(k).find(C=>k[C]);O&&setTimeout(()=>{const C=document.querySelector(`[name="${O}"], #${O}`);C&&(C.focus(),C.scrollIntoView({behavior:"smooth",block:"center"}))},100);return}r(p),a()};return e?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:a}),n.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:n.jsxs("form",{onSubmit:M,children:[n.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:t?"Edit Product":"Add New Product"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{id:"name",name:"name",type:"text",value:p.name||"",onChange:_,onBlur:P,placeholder:"Enter product name",className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${k.name?"border-red-300":"border-gray-300"}`,autoComplete:"off"}),k.name&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.name}),$&&n.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-red-800",children:"⚠️ This product already exists!"}),n.jsxs("p",{className:"text-xs text-red-600 mt-1",children:['Product: "',$.name,'"']})]}),n.jsx("button",{type:"button",onClick:()=>{a(),setTimeout(()=>{o&&o($)},100)},className:"text-red-600 hover:text-red-800 underline text-xs font-medium",children:"Edit Existing"})]})}),E&&N.length>0&&n.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Similar existing products:"}),n.jsx("ul",{className:"space-y-1",children:N.map((f,j)=>n.jsxs("li",{className:"flex items-center justify-between text-sm text-blue-700",children:[n.jsxs("span",{children:["• ",f.name]}),n.jsx("button",{type:"button",onClick:()=>{a(),setTimeout(()=>{o&&o(f)},100)},className:"text-blue-600 hover:text-blue-800 underline text-xs",children:"Edit"})]},j))}),n.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Choose a unique name to avoid duplicates, or edit an existing product."})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product name must be unique - no duplicates allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{id:"category",name:"category",value:p.category||"",onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[n.jsx("option",{value:"",children:"Select a category"}),l==null?void 0:l.map(f=>n.jsx("option",{value:f._id,children:f.name},f._id))]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional product category"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",value:p.description||"",onChange:_,onBlur:P,placeholder:"Enter product description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional description of the product"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{id:"status",name:"status",value:p.status||"active",onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive (Disabled)"}),n.jsx("option",{value:"discontinued",children:"Discontinued"})]}),n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[p.status==="active"&&"Product is active and available for sale",p.status==="inactive"&&"Product is disabled and hidden from sales",p.status==="discontinued"&&"Product is discontinued and no longer available"]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pricing.cost",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price"}),n.jsx("input",{id:"pricing.cost",name:"pricing.cost",type:"number",step:"0.01",value:p.pricing.cost||"",onChange:_,onBlur:P,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product cost"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pricing.retail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Retail Price"}),n.jsx("input",{id:"pricing.retail",name:"pricing.retail",type:"number",step:"0.01",value:p.pricing.retail||"",onChange:_,onBlur:P,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Retail selling price"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pricing.wholesale",className:"block text-sm font-medium text-gray-700 mb-1",children:"Wholesale Price"}),n.jsx("input",{id:"pricing.wholesale",name:"pricing.wholesale",type:"number",step:"0.01",value:p.pricing.wholesale||"",onChange:_,onBlur:P,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Wholesale selling price"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"inventory.currentStock",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock"}),n.jsx("input",{id:"inventory.currentStock",name:"inventory.currentStock",type:"number",value:p.inventory.currentStock||"",onChange:_,onBlur:P,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Current inventory quantity"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"inventory.reorderPoint",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Point"}),n.jsx("input",{id:"inventory.reorderPoint",name:"inventory.reorderPoint",type:"number",value:p.inventory.reorderPoint||"",onChange:_,onBlur:P,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Minimum stock level for reordering"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"expiryDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{id:"expiryDate",name:"expiryDate",type:"date",value:p.expiryDate||"",onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional expiry date for the product. Leave empty if product does not expire."})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"barcode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{id:"barcode",name:"barcode",type:"text",value:p.barcode||"",onChange:_,placeholder:"Enter or scan barcode",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("button",{type:"button",onClick:()=>{window.scanBarcode&&window.scanBarcode(f=>{_({target:{name:"barcode",value:f}})})},className:"px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",title:"Scan barcode",children:n.jsx(Er,{className:"h-4 w-4 text-gray-600"})})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product barcode for scanning"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),n.jsx("input",{id:"sku",name:"sku",type:"text",value:p.sku||"",onChange:_,placeholder:"Enter SKU",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Stock Keeping Unit"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),n.jsx("input",{id:"brand",name:"brand",type:"text",value:p.brand||"",onChange:_,placeholder:"Enter brand name",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product brand name"})]})]}),Object.keys(k).some(f=>k[f])&&n.jsx(Jc,{errors:k,title:"Please fix the following errors before submitting:",onFieldClick:f=>{const j=document.querySelector(`[name="${f}"], #${f}`);j&&(j.focus(),j.scrollIntoView({behavior:"smooth",block:"center"}))}})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[n.jsx(Pe,{type:"submit",isLoading:i,disabled:!p.name||i||Object.keys(k).some(f=>k[f]),className:"btn btn-primary btn-md w-full sm:w-auto sm:ml-3 disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Update Product":"Create Product"}),n.jsx("button",{type:"button",onClick:a,disabled:i,className:"btn btn-secondary btn-md w-full sm:w-auto mt-3 sm:mt-0 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},Qc=({product:t,isOpen:e,onClose:a,onSave:r})=>{const[i,s]=g.useState([]),[o,l]=g.useState(""),[p,x]=g.useState(30),{data:E,isLoading:u}=Bn({},{skip:!e,refetchOnMountOrArgChange:!0}),N=g.useMemo(()=>{var c;return((c=E==null?void 0:E.data)==null?void 0:c.investors)||(E==null?void 0:E.investors)||E||[]},[E]);g.useEffect(()=>{if(t&&e){const c=(t.investors||[]).map(_=>{var P,F;return{investorId:((P=_.investor)==null?void 0:P._id)||_.investor,investorName:((F=_.investor)==null?void 0:F.name)||"Unknown",sharePercentage:_.sharePercentage||30}});s(c)}},[t,e]);const y=()=>{if(!o){B.error("Please select an investor");return}const c=N.find(_=>_._id===o);if(c){if(i.some(_=>_.investorId===o)){B.error("This investor is already linked to this product");return}s([...i,{investorId:o,investorName:c.name,sharePercentage:p}]),l(""),x(30)}},$=c=>{s(i.filter(_=>_.investorId!==c))},T=(c,_)=>{s(i.map(P=>P.investorId===c?{...P,sharePercentage:parseFloat(_)||0}:P))},k=()=>{if(i.length===0){B.error("Please add at least one investor");return}const c=i.map(_=>({investor:_.investorId,sharePercentage:_.sharePercentage}));r(t._id,c)};return e?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:a}),n.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[n.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Manage Investors - ",t==null?void 0:t.name]}),n.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:n.jsx(re,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Add Investor"}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsx("div",{className:"col-span-2",children:n.jsxs("select",{value:o,onChange:c=>l(c.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[n.jsx("option",{value:"",children:u?"Loading investors...":"Select Investor"}),!u&&N.length===0?n.jsx("option",{value:"",disabled:!0,children:"No investors available. Create one from the Investors page."}):N.map(c=>n.jsx("option",{value:c._id,children:c.name},c._id))]})}),n.jsxs("div",{className:"col-span-1 flex gap-2",children:[n.jsx("input",{type:"number",min:"0",max:"100",value:p,onChange:c=>x(parseFloat(c.target.value)||0),placeholder:"%",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"}),n.jsx("button",{type:"button",onClick:y,className:"btn btn-primary px-4",children:"Add"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Set the profit share percentage for this product. This determines what % of profit goes to investors (split among all linked investors), with the remainder going to the company."})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:["Linked Investors (",i.length,")"]}),i.length===0?n.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No investors linked. Add investors above."}):n.jsx("div",{className:"space-y-2",children:i.map(c=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm font-medium text-gray-900",children:c.investorName})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"0",max:"100",value:c.sharePercentage,onChange:_=>T(c.investorId,_.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm"}),n.jsx("span",{className:"text-sm text-gray-600",children:"%"})]}),n.jsx("button",{onClick:()=>$(c.investorId),className:"text-red-600 hover:text-red-800",children:n.jsx(re,{className:"h-4 w-4"})})]})]},c.investorId))})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[n.jsx("button",{type:"button",onClick:k,className:"btn btn-primary btn-md w-full sm:w-auto sm:ml-3",children:"Save Investors"}),n.jsx("button",{type:"button",onClick:a,className:"btn btn-secondary btn-md w-full sm:w-auto mt-3 sm:mt-0",children:"Cancel"})]})]})]})}):null},br=({checked:t,onChange:e,disabled:a=!1,className:r="",...i})=>n.jsx("input",{type:"checkbox",checked:t,onChange:s=>e==null?void 0:e(s.target.checked),disabled:a,className:`h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded ${r}`,...i}),_r=t=>{var e,a;return((e=t.inventory)==null?void 0:e.currentStock)<=((a=t.inventory)==null?void 0:a.reorderPoint)},Zc=t=>{if(!t.expiryDate)return null;const e=new Date(t.expiryDate),a=new Date;a.setHours(0,0,0,0),e.setHours(0,0,0,0);const r=e-a,i=Math.ceil(r/(1e3*60*60*24));return i<0?{status:"expired",days:Math.abs(i)}:i<=7?{status:"expiring_soon",days:i}:{status:"valid",days:i}},eu=({products:t,searchTerm:e,bulkOps:a,onEdit:r,onDelete:i,onManageInvestors:s,onGenerateBarcode:o})=>t.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Ce,{className:"mx-auto h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No products found"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e?"Try adjusting your search terms.":"Get started by adding a new product."})]}):n.jsx("div",{className:"card w-full",children:n.jsxs("div",{className:"card-content p-0 w-full",children:[n.jsx("div",{className:"bg-gray-50 px-8 py-6 border-b border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[n.jsx("div",{className:"col-span-1",children:n.jsx(br,{checked:a.isSelectAll,onChange:()=>a.toggleSelectAll(t)})}),n.jsxs("div",{className:"col-span-4",children:[n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Product Name"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Description"})]}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Stock"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Cost"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Retail"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Wholesale"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Category"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Status"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Actions"})})]})}),n.jsx("div",{className:"divide-y divide-gray-200",children:t.map(l=>{var p,x,E,u,N;return n.jsx("div",{className:"px-8 py-6 hover:bg-gray-50",children:n.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[n.jsx("div",{className:"col-span-1",children:n.jsx(br,{checked:a.isSelected(l._id),onChange:()=>a.toggleSelection(l._id)})}),n.jsx("div",{className:"col-span-4",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Ce,{className:"h-6 w-6 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-base font-medium text-gray-900",children:l.name}),l.expiryDate&&(()=>{const y=Zc(l);return(y==null?void 0:y.status)==="expired"?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",title:`Expired ${y.days} day${y.days>1?"s":""} ago`,children:"Expired"}):(y==null?void 0:y.status)==="expiring_soon"?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",title:`Expires in ${y.days} day${y.days>1?"s":""}`,children:"Expires Soon"}):y?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",title:`Expires in ${y.days} day${y.days>1?"s":""}`,children:new Date(l.expiryDate).toLocaleDateString()}):null})()]}),n.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",l._id]}),n.jsx("p",{className:"text-sm text-gray-500",children:l.description||"No description"}),l.expiryDate&&n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Expiry: ",new Date(l.expiryDate).toLocaleDateString()]})]})]})}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("p",{className:`text-sm font-medium ${_r(l)?"text-danger-600":"text-gray-600"}`,children:((p=l.inventory)==null?void 0:p.currentStock)||0}),_r(l)&&n.jsx("p",{className:"text-xs text-danger-600",children:"Low Stock"})]}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:Math.round(((x=l.pricing)==null?void 0:x.cost)||0)})}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:Math.round(((E=l.pricing)==null?void 0:E.retail)||0)})}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:Math.round(((u=l.pricing)==null?void 0:u.wholesale)||0)})}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:((N=l.category)==null?void 0:N.name)||"-"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("span",{className:`badge ${l.status==="active"?"badge-success":"badge-gray"}`,children:l.status})}),n.jsxs("div",{className:"col-span-1",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:()=>o(l),className:"text-green-600 hover:text-green-800",title:"Generate Barcode",children:n.jsx(Or,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>s(l),className:"text-blue-600 hover:text-blue-800",title:"Manage Investors",children:n.jsx(jr,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>r(l),className:"text-primary-600 hover:text-primary-800",title:"Edit Product",children:n.jsx(wr,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>i(l),className:"text-danger-600 hover:text-danger-800",title:"Delete Product",children:n.jsx(Nr,{className:"h-5 w-5"})})]}),l.hasInvestors&&n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mt-2",children:"Has Investors"})]})]})},l._id)})})]})}),tu=(t,e)=>{const a=mt(),[r,i]=g.useState(null),[s,o]=g.useState(!1),[l,p]=g.useState(null),[x,E]=g.useState(!1),[u,{isLoading:N}]=vn(),[y,{isLoading:$}]=gn(),[T]=yn(),[k,{isLoading:c}]=bn(),[_]=_n(),[P]=jn();return{selectedProduct:r,isModalOpen:s,selectedProductForInvestors:l,isInvestorsModalOpen:x,creating:N,updating:$,deleting:c,setSelectedProduct:i,setIsModalOpen:o,setSelectedProductForInvestors:p,setIsInvestorsModalOpen:E,handleEdit:d=>{i(d),o(!0)},handleEditExisting:d=>{i(d),o(!0)},handleCloseModal:()=>{o(!1),i(null)},handleSave:d=>{var A;let h=null;if(d.expiryDate&&d.expiryDate.trim()!==""){const w=new Date(d.expiryDate);isNaN(w.getTime())||(h=w.toISOString())}const b={...d,status:d.status||"active",expiryDate:h,pricing:{cost:parseFloat(d.pricing.cost)||0,retail:parseFloat(d.pricing.retail)||0,wholesale:parseFloat(d.pricing.wholesale)||0},inventory:{currentStock:parseInt(d.inventory.currentStock)||0,reorderPoint:parseInt(d.inventory.reorderPoint)||10}};if(!r){const w=(A=d.name)==null?void 0:A.trim().toLowerCase().replace(/\s+/g," ");if(t==null?void 0:t.find(L=>{var R;return((R=L.name)==null?void 0:R.trim().toLowerCase().replace(/\s+/g," "))===w})){Ge(`A product named "${d.name}" already exists. Please choose a different name.`);return}}r?y({id:r._id,...b}).unwrap().then(()=>{K("Product updated successfully"),e()}).catch(w=>{var v,L,G;((v=w==null?void 0:w.data)==null?void 0:v.code)==="DUPLICATE_PRODUCT_NAME"||(G=(L=w==null?void 0:w.data)==null?void 0:L.message)!=null&&G.includes("already exists")?Ge("A product with this name already exists. Please choose a different name."):Q(w,"Product Update")}):u(b).unwrap().then(()=>{K("Product created successfully"),e()}).catch(w=>{var v,L,G;((v=w==null?void 0:w.data)==null?void 0:v.code)==="DUPLICATE_PRODUCT_NAME"||(G=(L=w==null?void 0:w.data)==null?void 0:L.message)!=null&&G.includes("already exists")?Ge("A product with this name already exists. Please choose a different name or edit the existing product."):Q(w,"Product Creation")})},handleDelete:(d,h)=>{h(d.name,"Product",async()=>{try{await k(d._id).unwrap(),K("Product deleted successfully"),e()}catch(b){Q(b,"Product Deletion")}})},handleBulkUpdate:async(d,h)=>{const b=h.getSelectedItems();if(b.length===0)return;const A=b.map(w=>w._id);await h.executeBulkOperation("update",d);try{await _({productIds:A,updates:d}).unwrap(),K(`Successfully updated ${b.length} products`),e()}catch(w){Q(w,"Bulk Update")}},handleBulkDelete:async d=>{const h=d.getSelectedItems();if(h.length===0||!window.confirm(`Are you sure you want to delete ${h.length} products? This action cannot be undone.`))return;const b=h.map(A=>A._id);try{await P({productIds:b}).unwrap(),K(`Successfully deleted ${h.length} products`),d.deselectAll(),e()}catch(A){Q(A,"Bulk Delete")}},handleBulkExport:d=>{const h=d.getSelectedItems();if(h.length===0)return;const b=["Name","Description","SKU","Stock","Cost","Retail","Wholesale","Category","Status"],A=h.map(R=>{var z,ne,_e,je,we;return[R.name||"",R.description||"",R.sku||"",((z=R.inventory)==null?void 0:z.currentStock)||0,((ne=R.pricing)==null?void 0:ne.cost)||0,((_e=R.pricing)==null?void 0:_e.retail)||0,((je=R.pricing)==null?void 0:je.wholesale)||0,((we=R.category)==null?void 0:we.name)||"",R.status||""]}),w=[b,...A].map(R=>R.map(z=>`"${z}"`).join(",")).join(`
`),v=new Blob([w],{type:"text/csv"}),L=window.URL.createObjectURL(v),G=document.createElement("a");G.href=L,G.download=`products_export_${new Date().toISOString().split("T")[0]}.csv`,G.click(),window.URL.revokeObjectURL(L),K(`Exported ${h.length} products`)},handleLinkInvestors:async(d,h)=>{try{return await T({productId:d,investors:h}).unwrap(),B.success("Investors linked successfully!"),a(ut.util.invalidateTags([{type:"Products",id:"LIST"}])),E(!1),p(null),{success:!0}}catch(b){return Q(b,"Link Investors"),{success:!1,error:b}}}}},Cu=()=>{var _e,je,we,Jt,Kt,Qt,Zt,er;const t=mt(),[e,a]=g.useState(""),[r,i]=g.useState({}),[s,o]=g.useState(null),[l,p]=g.useState(!1),[x,E]=g.useState(!1),[u,N]=g.useState(!1),[y,$]=g.useState(!1),[T,k]=g.useState(!1),[c,_]=g.useState(null),{openTab:P}=sn(),F={search:e,limit:999999,...r},{data:m,isLoading:M,error:f,refetch:j}=wn(F,{refetchOnMountOrArgChange:!0}),{data:O}=on(void 0,{refetchOnMountOrArgChange:!0}),C=g.useMemo(()=>{var S,ee,H;return O?Array.isArray(O)?O:(S=O==null?void 0:O.data)!=null&&S.categories?O.data.categories:O!=null&&O.categories?O.categories:(H=(ee=O==null?void 0:O.data)==null?void 0:ee.data)!=null&&H.categories?O.data.data.categories:[]:[]},[O]),U=g.useMemo(()=>{var S,ee,H;return m?Array.isArray(m)?m:(S=m==null?void 0:m.data)!=null&&S.products?m.data.products:m!=null&&m.products?m.products:(H=(ee=m==null?void 0:m.data)==null?void 0:ee.data)!=null&&H.products?m.data.data.products:m!=null&&m.items?m.items:[]:[]},[m]),D=Nn(U,e,["name","description","brand","category.name"],{threshold:.4,minScore:.3,limit:null}),d=Vn(D,{idField:"_id",enableUndo:!0}),{confirmation:h,confirmDelete:b,handleConfirm:A,handleCancel:w}=On(),v=tu(U,j),L=()=>{t(ut.util.invalidateTags([{type:"Categories",id:"LIST"}])),B.success("Categories refreshed")},G=g.useMemo(()=>({"ctrl+n":()=>{v.setIsModalOpen(!0),B.success("Creating new product...")},"ctrl+f":()=>{const S=document.querySelector('input[placeholder*="Search products"]');S&&(S.focus(),S.select())},"ctrl+i":()=>{var ee;const S=Array.from(document.querySelectorAll("button")).find(H=>{var se,Ne,Ee,tr;return((se=H.textContent)==null?void 0:se.includes("Import Products"))||((tr=(Ee=(Ne=H.querySelector("svg"))==null?void 0:Ne.parentElement)==null?void 0:Ee.textContent)==null?void 0:tr.includes("Import"))});if(S)S.click(),B.success("Import dialog opened");else{const H=document.querySelector('[class*="Import"]')||((ee=document.querySelector("h2, h3, h4"))==null?void 0:ee.closest("div"));H?(H.scrollIntoView({behavior:"smooth",block:"center"}),B.success("Please use the Import button in the Import/Export section")):B.success("Use the Import/Export section to import products")}},escape:()=>{v.isModalOpen&&(v.handleCloseModal(),B.success("Cancelled"))},f1:()=>{B.success("Keyboard Shortcuts: Ctrl+N (New Product), Ctrl+F (Search), Ctrl+I (Import), Esc (Cancel)")}}),[v]);ln(G);const R=S=>{i(S)},z=()=>{i({}),a("")},ne=async S=>{await v.handleBulkUpdate(S,d),p(!1),o(null)};if(M&&!m)return n.jsx(cn,{message:"Loading products..."});if(f&&!m){let S="Unable to load products. Please try again.";if((je=(_e=f==null?void 0:f.response)==null?void 0:_e.data)!=null&&je.errors){const H=f.response.data.errors.map(se=>{const Ne=se.param||se.field||"",Ee=se.msg||se.message||"Invalid value";return Ne?`${Ne}: ${Ee}`:Ee});S=H.length>0?H.join(", "):f.response.data.message||"Invalid request parameters"}else(Jt=(we=f==null?void 0:f.response)==null?void 0:we.data)!=null&&Jt.details?S=Array.isArray(f.response.data.details)?f.response.data.details.join(", "):f.response.data.details:(Qt=(Kt=f==null?void 0:f.response)==null?void 0:Kt.data)!=null&&Qt.message?S=f.response.data.message:f!=null&&f.message&&(S=f.message);return n.jsxs("div",{className:"text-center py-12",children:[n.jsx(He,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to Load Products"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:S}),n.jsxs("button",{onClick:()=>j(),className:"btn btn-primary btn-md",children:[n.jsx(nr,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),n.jsx("p",{className:"text-gray-600",children:"Manage your product catalog"})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{const S=un("/categories");S&&P({title:"Add Product Category",path:"/categories?action=add",component:S.component,icon:S.icon,allowMultiple:!0,props:{action:"add"}})},className:"btn btn-outline btn-md w-full sm:w-auto",children:[n.jsx(xt,{className:"h-4 w-4 mr-2"}),"Add Product Category"]}),n.jsxs("button",{onClick:L,className:"btn btn-outline btn-md w-full sm:w-auto",title:"Refresh categories list",children:[n.jsx(nr,{className:"h-4 w-4 mr-2"}),"Refresh Categories"]}),n.jsxs("button",{onClick:()=>E(!0),className:"btn btn-outline btn-md w-full sm:w-auto",title:"Scan barcode to search product",children:[n.jsx(Er,{className:"h-4 w-4 mr-2"}),"Scan Barcode"]}),n.jsxs("button",{onClick:()=>$(!0),className:"btn btn-outline btn-md w-full sm:w-auto",title:"Print barcode labels",children:[n.jsx(ze,{className:"h-4 w-4 mr-2"}),"Print Labels"]}),n.jsxs("button",{onClick:()=>v.setIsModalOpen(!0),className:"btn btn-primary btn-md w-full sm:w-auto",children:[n.jsx(Ln,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products...",value:e,onChange:S=>a(S.target.value),className:"input pl-10"})]})}),n.jsx(Gn,{onImportComplete:()=>{t(ut.util.invalidateTags([{type:"Products",id:"LIST"}]))},filters:F}),n.jsx(zn,{filters:r,onFiltersChange:R,onClearFilters:z,categories:C||[]}),n.jsx(Hn,{selectedCount:d.selectedCount,isOperationInProgress:d.isOperationInProgress,operationProgress:d.operationProgress,canUndo:d.canUndo,onBulkUpdate:()=>{o("update"),p(!0)},onBulkDelete:()=>v.handleBulkDelete(d),onBulkExport:()=>v.handleBulkExport(d),onBulkStatusChange:()=>{o("status"),p(!0)},onBulkCategoryChange:()=>{o("category"),p(!0)},onBulkPriceUpdate:()=>{o("price"),p(!0)},onBulkStockAdjust:()=>{o("stock"),p(!0)},onUndo:d.undoLastOperation,onClearSelection:d.deselectAll,availableActions:["update","delete","export","status","category","price","stock"]}),n.jsx(qn,{isOpen:l,onClose:()=>{p(!1),o(null)},selectedCount:d.selectedCount,updateType:s,onConfirm:ne,categories:C||[],statusOptions:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"discontinued",label:"Discontinued"}],isLoading:d.isOperationInProgress}),n.jsx(eu,{products:D,searchTerm:e,bulkOps:d,onEdit:v.handleEdit,onDelete:S=>v.handleDelete(S,b),onManageInvestors:S=>{v.setSelectedProductForInvestors(S),v.setIsInvestorsModalOpen(!0)},onGenerateBarcode:S=>{v.setSelectedProduct(S),N(!0)}}),n.jsx(Kc,{product:v.selectedProduct,isOpen:v.isModalOpen,onClose:v.handleCloseModal,onSave:v.handleSave,isSubmitting:v.creating||v.updating,allProducts:D||[],onEditExisting:v.handleEditExisting,categories:C||[]}),n.jsx(En,{isOpen:h.isOpen,onClose:w,onConfirm:A,itemName:((er=(Zt=h.message)==null?void 0:Zt.match(/"([^"]*)"/))==null?void 0:er[1])||"",itemType:"Product",isLoading:v.deleting}),v.selectedProductForInvestors&&n.jsx(Qc,{product:v.selectedProductForInvestors,isOpen:v.isInvestorsModalOpen,onClose:()=>{v.setIsInvestorsModalOpen(!1),v.setSelectedProductForInvestors(null)},onSave:v.handleLinkInvestors}),n.jsx(Mn,{isOpen:x,onClose:()=>E(!1),onScan:S=>{a(S),i({barcode:S}),E(!1),B.success(`Searching for barcode: ${S}`)},scanMode:"both"}),u&&v.selectedProduct&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-75 flex items-center justify-center p-4",children:n.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full",children:n.jsx(Wc,{product:v.selectedProduct,barcodeValue:v.selectedProduct.barcode,onClose:()=>{N(!1),v.setSelectedProduct(null)}})})}),y&&n.jsx(Yc,{products:D||[],onClose:()=>$(!1)}),T&&c&&n.jsx(Dn,{entityType:c.type,entityId:c.id,entityName:c.name,onClose:()=>{k(!1),_(null)}})]})};export{Cu as default};
